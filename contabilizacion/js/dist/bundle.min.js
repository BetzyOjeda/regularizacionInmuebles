var municipalityTransactions={},stateTransactions=[],fbdate=!0,fcdate=!0,firstModuleComplete=!1,genders=[{id:"0",description:"Hombre"},{id:"1",description:"Mujer"}],catalogs={},moduleInitData={};console.log("%cRealizar alguna modificación en esta sección puede provocar la pérdida de tu información\n","color:#a90c0c;font-size:22px;");var servOrigin=window.location.origin,isLocal=-1!=servOrigin.indexOf("localhost");function redirectToLogin(){var e=window.location.origin;-1==e.indexOf("localhost")&&(-1!=e.indexOf("150.250.238.172")?window.location=e+"/mgbfprv_des_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("150.250.238.173")?window.location=e+"/mgbfprv_test_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("becasfmxt.mex.igrupobbva")?window.location=e+"/mgbfprv_test_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("calplataformabecas.fundacionbbvabancomer.com.mx")?window.location=e+"/mgbfprv_qa_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("plataformabecaslo.fundacionbbvabancomer.org")?window.location=e+"/mgbfprv_lo_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("plataformabecas.fundacionbbvabancomer.org")?window.location=e+"/mgbfprv_pr_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("plataformabecas.fundacionbbva.mx")&&(window.location=e+"/mgbfprv_pr_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/"))}isLocal||(window.oldconsole={},window.oldconsole.log=console.log,console.log=function(){},window.console.log=console.log);var countSession,minutes,timer,_timer,_minutes,_seconds,showLogOut=function(e){e?loadTemplate($("#modal_generic .body"),miniTemplates.success,{title:e,message:"",onAccept:function(){location.reload()}}):loadTemplate($("#modal_generic .body"),miniTemplates.error,{title:"Error",message:"Tu sesión ha terminado por inactividad",onAccept:function(){location.reload()}})},initCountSession=function(){stopCountSession(),timer=minutes=8,countSession=setInterval(function(){console.log("## timer",timer),0==--timer&&(showTimeSession(),stopCountSession())},6e4)},stopCountSession=function(){null!=countSession&&clearInterval(countSession)},refreshSession=function(){$("#modal_timeout").removeAttr("open"),$("#modal_timeout").find(".btn_acept span").text("Continuar con sesión"),showWait(),$.ajax({type:"GET",contentType:"image/png",url:"images/favicons/16x16.png",cache:!1,async:!0,success:function(e){if(initCountSession(),void 0!==e&&-1!=e.indexOf("<title>Login</title>"))return hideWait(),void redirectToLogin();hideWait()},error:function(){hideWait(),redirectToLogin()}})},showTimeSession=function(){var e,t,a=60,o=setInterval(function(){e=parseInt(a/60,10),t=parseInt(a%60,10),e=e<10?"0"+e:e,t=t<10?"0"+t:t,$("#cdSession").text(e+":"+t),--a<0&&($("#modal_timeout").find(".btn_acept span").text("Continuar"),clearInterval(o))},1e3);console.info("## showTimeSession"),$("#modal_timeout").attr("open","")};$("#modal_timeout").find(".btn_acept").click(refreshSession);var logout=function(){showWait(),setTimeout(function(){restExec({service:"TERMINATE_SESSION",async:!1,data:{},success:function(e){console.log("se cerró sesión en back end")},error:function(e){console.log("no se cerró sesión en back end")}}),$.ajax({type:"GET",dataType:"html",url:window.location.origin+"/pkmslogout.form",async:!0,success:function(){redirectToLogin()},error:function(){redirectToLogin()}})},400)};function showWait(){$("body").addClass("loading")}function hideWait(){$("body").removeClass("loading")}var callbackCloseModal=function(){};function formatMoney(e,t){e=(e+="").replace(/,/g,"").replace(/\$/g,"");var a=isNaN(a=Math.abs(a))?2:a,o=e<0?"-":"",i=String(parseInt(e=Math.abs(Number(e)||0).toFixed(a))),n=3<(n=i.length)?n%3:0;return o+(t?"":"$ ")+(n?i.substr(0,n)+",":"")+i.substr(n).replace(/(\d{3})(?=\d)/g,"$1,")+(a?"."+Math.abs(e-i).toFixed(a).slice(2):"")}var verifyCatalogs={catToVerify:[],catIndex:-1,callback:function(){},loopCatalogs:function(){verifyCatalogs.catIndex++,verifyCatalogs.catIndex<verifyCatalogs.catToVerify.length?(showWait(),"STATES"==verifyCatalogs.catToVerify[verifyCatalogs.catIndex]?loadModule.getStates():loadModule.getCatalog(verifyCatalogs.catToVerify[verifyCatalogs.catIndex],verifyCatalogs.loopCatalogs)):(verifyCatalogs.catToVerify=[],verifyCatalogs.catIndex=-1,verifyCatalogs.callback(),verifyCatalogs.callback=function(){},hideWait())}},fn_verifyCatalogs=function(e,t){verifyCatalogs.catToVerify=e,verifyCatalogs.callback=t,verifyCatalogs.loopCatalogs()};function concatSpace(e,t){return(e=e.toUpperCase().replace(/Á/gi,"A").replace(/É/gi,"E").replace(/Í/gi,"I").replace(/Ó/gi,"O").replace(/Ú/gi,"U")).concat(" ".repeat(t-e.length))}function validateEmptyOption(e){_tmpOpts=e.data("options")||[],_hasEmptyOp=!1;for(var t=0;t<_tmpOpts.length;t++)if(0==_tmpOpts[t].id||"0"==_tmpOpts[t].id){_hasEmptyOp=!0;break}_hasEmptyOp||(_descSt=dommySchools.getDommyDescription(),_tmpOpts.push({id:0,description:_descSt}),e.comboSelect(_tmpOpts)),e.data("selected",{id:0,description:_descSt}),e.removeComboError(),e.find(".option-text").removeClass("center"),e.find(".selected-option").text(_descSt)}var navbar=document.getElementsByClassName("header");function _get_window_height(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}function _get_window_Yscroll(){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0}function _get_doc_height(){return Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}function _get_scroll_percentage(){return(_get_window_Yscroll()+_get_window_height())/_get_doc_height()*100}var LIST_SERVICES={services:[],errors:[],callback:function(){},inProgress:!(window.onscroll=function(){0<window.pageYOffset?_get_scroll_percentage()<80&&navbar[0].classList.add("sticky"):navbar[0].classList.remove("sticky")}),listRestExec:function(e,t){e.ignoreError=e.ignoreError||!1,LIST_SERVICES.services.push(e),"function"==typeof t&&(LIST_SERVICES.callback=t),LIST_SERVICES.verifyServices()},verifyServices:function(){LIST_SERVICES.inProgress||(LIST_SERVICES.inProgress=!0,showWait(),LIST_SERVICES.loopServices())},loopServices:function(){LIST_SERVICES.services.length?(_restToExe=LIST_SERVICES.services[0],_restToExe.showWait=!1,_restToExe.async=!0,_restToExe.error=_restToExe.error||rest_fnNothig,void 0===_restToExe.finallyError?_restToExe.finallyError=[]:"function"==typeof _restToExe.finallyError&&(_restToExe.finallyError=[_restToExe.finallyError]),void 0===_restToExe.finallySuccess?_restToExe.finallySuccess=[]:"function"==typeof _restToExe.finallySuccess&&(_restToExe.finallySuccess=[_restToExe.finallySuccess]),_restToExe.ignoreError||_restToExe.finallyError.push(function(e){LIST_SERVICES.errors.push(e)}),_fnLoop=function(){LIST_SERVICES.services.shift(),LIST_SERVICES.loopServices()},_restToExe.finallySuccess.push(_fnLoop),_restToExe.finallyError.push(_fnLoop),restExec(_restToExe)):(LIST_SERVICES.errors.length&&(loadTemplate($("#modal_generic .body"),miniTemplates.error,{title:"Se presentaron algunos errores al realizar operación",message:"Es posible que tu información no se muestre de forma completa"}),LIST_SERVICES.errors=[]),hideWait(),LIST_SERVICES.inProgress=!1,LIST_SERVICES.callback())}};function restExec(e){var a={type:e.type||"POST",service:e.service,headers:e.headers||{},data:e.data||{},async:e.async||!0,success:e.success||rest_fnNothig,error:e.error||rest_fnShowError,showWait:e.showWait||!1,finallySuccess:e.finallySuccess||rest_fnNothig,finallyError:e.finallyError||rest_fnNothig,hasUrlParam:e.hasUrlParam||!1,urlParam:e.urlParam||{}};console.log("datos a enviar: ",a.data),console.log("string ",JSON.stringify(a.data)),rest_execute=function(){$.ajax({type:a.type,dataType:"json",contentType:"application/json; charset=utf-8",url:SCONFIG.get(a),data:JSON.stringify(a.data),async:a.async,cache:!1,success:function(t){initCountSession(),console.log("RESPUESTA "+a.service,t),a.showWait&&hideWait(),a.success(t),a.finallySuccess.constructor===Array?a.finallySuccess.forEach(function(e){e(t)}):a.finallySuccess(t)},error:function(t){if(initCountSession(),console.log("ERROR EN SERVICIO "+a.service,t),void 0!==t.responseText&&-1!=t.responseText.indexOf("<title>Login</title>"))return showLogOut(),void hideWait();void 0!==t.responseJSON&&(t.responseJSON.code=t.responseJSON.code||t.responseJSON.errorcode,t.responseJSON.message=t.responseJSON.message||t.responseJSON.errormessage),a.showWait&&hideWait(),a.error(t),a.finallyError.constructor===Array?a.finallyError.forEach(function(e){e(t)}):a.finallyError(t)}})},a.showWait&&showWait(),rest_execute()}var rest_fnNothig=function(){console.log("nothing")},rest_fnShowError=function(e){void 0!==e.responseJSON&&void 0!==e.responseJSON.message||(e.responseJSON={message:"SIN DETALLE DEL ERROR"}),loadTemplate($("#modal_generic .body"),miniTemplates.error,{title:"Ocurrió un error al realizar la operación",message:e.responseJSON.message,redirectToLogin:"No tienes privilegios para accesar"==e.responseJSON.message})},rest_fnGetSchoolCatalog=function(e,t){console.log("rest_fnGetSchoolCatalog"),console.log("cat:",e),console.log("data:",t),console.log(" data.data || []",t.data||[]),catalogs[e]=t.data||[]},rest_fnGetStates=function(e){stateTransactions=__.get(e,"stateTransactions",[]);var t=[];for(i=0;i<stateTransactions.length;i++)t.push({id:stateTransactions[i].state.code,description:stateTransactions[i].state.name});stateTransactions=t},rest_fnGetMunicipalities=function(e,t){var a=__.get(t,"municipalityTransactions",[]),o=[];for(i=0;i<a.length;i++)o.push({id:a[i].municipality.code,description:a[i].municipality.name});municipalityTransactions[e]=o||[]},validateGeneralStatus=function(){"COMPLETO"==__.get(moduleInitData.general,"moduleStatus","")?($(".page-container .i-form.accordion").not("#wf0").show(),firstModuleComplete?loadModule.legalDisclaimer(function(){loadModule.checkStatus(),changeModuleSatus($("#general-data"),"complete")}):(firstModuleComplete=!0,loadNextModules(function(){loadModule.checkStatus(),changeModuleSatus($("#general-data"),"complete")}))):$(".page-container .i-form.accordion").not("#wf0").hide()},SCONFIG=function(){var a=-1!=window.location.origin.indexOf("localhost:3000")?"http://127.0.0.1:3004/":"/mgbf_mult_web_fundacionbancomerextranetwebfront_01/",o={GET_STATES:"list/state",GET_MUNICIPALITY:"list/municipality",TERMINATE_SESSION:"terminate/session",LIST_CATALOGS:"catalogs/{{catalog}}"};return{get:function(e){var t=a+o[e.service];return e.hasUrlParam?Mustache.render(t,e.urlParam):t}}}(),fn_nothing=function(){},fn_showModal=function(){$("#modal_generic").attr("open","")},fn_hideModal=function(){$("#modal_generic").removeAttr("open")},fn_aceptModal=function(e,t){fn_showModal(),t.redirectToLogin?$(".btn_acept").click(function(e){e.preventDefault(),redirectToLogin()}):"function"==typeof t.onAccept?$(".btn_acept").click(function(){t.onAccept(),fn_hideModal()}):$(".btn_acept").click(function(e){e.preventDefault(),fn_hideModal()})},fn_confirmModal=function(e,t){t.onDecline="function"==typeof t.onDecline?t.onDecline:fn_hideModal,fn_showModal(),e.find(".btn_acept").click(t.onAccept.bind(t)),e.find(".btn_decline").click(t.onDecline.bind(t))},fn_closeNotification=function(e){e.find(".close-button").click(function(){$(this).closest(".notification").slideUp("slow",function(){$(this).remove()})}),e.slideDown("slow")},uploadFile={index:0,onFinish:function(){}},fn_uploadfilemodal=function(){var n=0,s={},e=new Dropzone("#dragndrop",{acceptedFiles:"application/pdf,image/jpeg,image/png",dictFileTooBig:"El archivo supera el tamaño permitido de {{maxFilesize}} MB",dictMaxFilesExceeded:"Número máximo de archivos alcanzado",dictInvalidFileType:"Sólo se permiten archivos JPG, PNG y PDF",autoProcessQueue:!1,dictDefaultMessage:"",maxFiles:2,maxFilesize:12,previewTemplate:miniTemplates.filepreview.html,previewsContainer:"#file-preview-wrapper",url:"/",init:function(){this.on("addedfile",function(e){}),this.on("drop",function(){})},accept:function(e,t){document.getElementById("filecontainer").classList.remove("empty"),$("#sbtmfiles").show();var a=this;e.idFile=n;var o=e.previewTemplate.querySelector(".btn-delete-file"),i=e;o.addEventListener("click",function(){a.removeFile(i)}),s[n]={active:!0,base64:""},n++,t()},removedfile:function(e){e.previewTemplate.remove(),0==this.getAcceptedFiles().length&&(document.getElementById("filecontainer").classList.add("empty"),$("#sbtmfiles").hide())},error:function(e,t){e.accepted||(this.removeFile(e),_$form=$(".fileform"),notifyElem=_$form.prev(),0!=notifyElem.length&&notifyElem.hasClass("notification")&&notifyElem.remove(),loadTemplate(_$form,miniTemplates.notification,{type:"error",title:t},"before"))}});$("#btn_sbtmfiles").data("complete",function(o){console.log(o),fn_hideModal(),uploadFile.onFinish=function(){},uploadFile.index=0,_fileDetails=e.getAcceptedFiles(),function t(a){if(a!=_fileDetails.length){currentFile=_fileDetails[a];var e=new FileReader;e.readAsDataURL(currentFile),e.onload=function(e){a!=_fileDetails.length&&(e.target.result,fext=currentFile.name.split("."),fext=fext[fext.length-1],uploadFile.onFinish=function(e){console.log("resp",e)},a==_fileDetails.length-1&&(uploadFile.onFinish=function(e){console.log("_end_fn",e),fn_sendDocument({moduleIndicator:o.module,typeDocument:o.document,schoolGrade:o.grade,schoolPeriod:o.period,folio:e.referenceNumber})}),uploadFile.index++,t(uploadFile.index))}}}(0)}),fn_showModal()},templates={conf:{path:"./views/modal/confirm_m.html",onload:fn_confirmModal},ufile:{path:"./views/modal/uploadfile.html",onload:fn_uploadfilemodal},notify:{path:"./views/modal/notifications.html",onload:fn_opennotification}};function loadTemplate(a,o,i,n){function e(e){var t=$(Mustache.to_html(e,i));a[n](t),"html"==n&&window.validateControl(a),void 0!==o.html&&(o.html=e),o.onload(t,i)}void 0===n&&(n="html"),o?i?void 0!==o.html?e(o.html):void 0!==o.path&&$.get(o.path,e):console.warn("loadTemplate: data is null ["+o+"]"):console.error("loadTemplate: template is undefined ["+a+"]")}var miniTemplates={success:{onload:fn_aceptModal,html:'<div class="title-gray">{{title}}</div><div class="step-container"><div class="icon-m icon-s"></div><div class="grid-c"><div class="grid-item"><div class="message-modal"><div>{{message}}</div></div></div></div><div class="actionsection"><div class="submtbtn"><span title="Enviar" aria-label="Enviar" class="btn__basic btn_acept"><span aria-hidden="true">Aceptar</span></span></div></div></div>'},error:{onload:fn_aceptModal,html:'<div class="title-gray">{{title}}</div><div class="step-container"><div class="icon-m icon-e"></div><div class="grid-c"><div class="grid-item"><div class="message-modal"><div>{{message}}</div></div></div></div><div class="actionsection"><div class="submtbtn"><span title="Enviar" aria-label="Enviar" class="btn__basic btn_acept"><span aria-hidden="true">Aceptar</span></span></div></div></div>'},notification:{onload:fn_closeNotification,html:'<div class="notification {{type}}" style="display: none;"><div class="wrapper"><div class="icon"><i class="bbva-icon"></i></div><div class="message"><div class="message__heading">{{title}}</div><span class="message__body">{{message}}</span></div><div class="close-button"><i class="bbva-icon ui-x"></i></div></div></div>'},filepreview:{html:'<div class="uploadfile animated fadeInLeft"><div class="wrapper"><div class="message"><div class="message__heading dz-filename"><span data-dz-name></span></div><span class="message__body"><span class="remove btn-delete-file"><i class="ui-trash"></i> Eliminar</span></span></div></div></div>'},visorProfile:{onload:function(){},html:'<div id="profile-view"><figure><img src="{{photo}}" alt=""></figure></div><div class="submtbtn"><span title="Continuar" aria-label="Continuar" class="help_section" id="btn_change_profile"><span aria-hidden="true" class="h_h1">Cambiar foto <i class="bbva-icon ui-camera"></i></span></span></div>'}};!function(n){n.fn.inputable=function(){return n(this).each(function(){t=this;var a=document.createElement("span"),e=document.createElement("div");if(!t.hasAttribute("required")){var o=document.createElement("span");n(o).addClass("is-optional"),t.parentElement.appendChild(o)}if(n(e).addClass("placeholder-wrapper"),t.parentElement.appendChild(e),a.appendChild(document.createTextNode(t.getAttribute("data-placeholder"))),n(a).addClass("placeholder-simulator"),e.appendChild(a),e.appendChild(t),e.appendChild(a),$t=n(t),ele_parent=$t.parents(".form-group"),0===ele_parent.find("span.text-message").length&&ele_parent.append("<p class='i-message'><span class='text-message'>&nbsp;</span></p>"),a.addEventListener("click",function(){n(this).siblings("input").focus()}),t.addEventListener("keyup",function(){if(t=n(this),0===t.val().length)t.removeClass("noempty"),t.removeClass("has-error");else{var e=t.siblings("small");n(e).remove(),n(t).removeError()}}),t.addEventListener("focus",function(){for(var e in _t={top:"5px",fontSize:"12px"},_t)a.style[e]=_t[e]}),t.addEventListener("blur",function(){if(t=n(this),0===t.val().length){for(var e in _t={top:"16px",fontSize:"15px"},_t)a.style[e]=_t[e];t.removeClass("noempty")}else t.removeClass("has-error"),n(t).addClass("noempty")}),0!==t.value.length){for(var i in _t={top:"5px",fontSize:"12px"},_t)a.style[i]=_t[i];n(t).addClass("noempty")}})},n.fn.showError=function(e){return this.each(function(){element=n(this),ele_parent=element.parents(".form-group"),ele_parent.addClass("hasError"),""!=e&&ele_parent.find("span.text-message").html("<i class='bbva-icon ui-warning'></i>"+e)})},n.fn.removeError=function(){return this.each(function(){element=n(this),ele_parent=element.parents(".form-group"),ele_parent.removeClass("hasError"),ele_parent.find("span.text-message").html('<i class="bbva-icon ui-empty"></i>&nbsp;')})},n.fn.clearInput=function(){return this.each(function(){element=n(this),element.removeError(),element.val(""),element.siblings(".placeholder-simulator").css({top:"16px","font-size":"15px"})})},n.fn.setValue=function(e){return this.each(function(){""!=e&&(element=n(this),element.val(e),element.siblings(".placeholder-simulator").css({top:"5px","font-size":"12px"}))})}}(jQuery),function(s){s.fn.comboSelect=function(e,t){return this.each(function(){var i=s(this);"function"==typeof t?i.data("selectCallback",t):"function"!=typeof i.data("selectCallback")&&i.data("selectCallback",function(){}),i.data("options",e),i.data("selected",null),i.find(".list-result").html(Mustache.to_html(s.fn.comboSelect.template,{items:e}));var n=i.find(".option-select");n.data("open",!1),n.removeAttr("open"),n.find("li").click(function(){var e=s(this),t=i.data("options");if(null==i.data("selected")||e.attr("data-id")!=i.data("selected").id)for(var a=0;a<t.length;a++){var o=t[a];if(o.id==e.attr("data-id")){i.data("selected",o),i.removeComboError(),i.find(".option-text").removeClass("center"),i.find(".selected-option").text(o.description),i.addClass("noempty"),s.fn.hideOptions(n),i.data("selectCallback")(o);break}}}),!0!==i.data("inicializate")&&(n.find(".select-title").click(function(){n.data("open")?s.fn.hideOptions(n):s.fn.showOptions(n)}),i.data("inicializate",!0),null==s(document).data("comboselectatached")&&(s(document).click(function(e){s(e.target).hasClass("sl")||($formOpened=s(".form-group-select .option-select[open]"),0!=$formOpened.length&&s.fn.hideOptions($formOpened))}),s(document).data("comboselectatached",!0)),void 0!==i.data("promess-select")&&(i.selectOptionId(i.data("promess-select")),i.data("promess-select",void 0)),void 0!==i.data("promess-selectdesc")&&(i.selectOptionDescription(i.data("promess-selectdesc")),i.data("promess-select",void 0)))})},s.fn.showOptions=function(e){e.hasClass("disabled")||(s.fn.hideOptions(s(".form-group-select .option-select[open]").not(e)),e.find("ul").slideDown(),e.data("open",!0),e.attr("open",""),e.find(".select-title .bbva-icon").css({transform:"rotate(180deg)"}))},s.fn.selectOptionId=function(e){context=this;var t=context.data("options");if(void 0!==t)for(var a=0;a<t.length;a++){var o=t[a];if(o.id==e){context.data("selected",o),context.removeComboError(),context.find(".option-text").removeClass("center"),context.find(".selected-option").text(o.description),context.data("selectCallback")(o);break}}else context.data("promess-select",e)},s.fn.selectOptionDescription=function(e){context=this;var t=context.data("options");if(void 0!==t)for(var a=0;a<t.length;a++){var o=t[a];if(o.description==e){context.data("selected",o),context.removeComboError(),context.find(".option-text").removeClass("center"),context.find(".selected-option").text(o.description),context.data("selectCallback")(o);break}}else context.data("promess-selectdesc",e)},s.fn.hideOptions=function(e){e.find("ul").slideUp(),_context=e.closest(".form-group-select"),_context.hasClass("required")&&null==_context.getOptionSelected()&&_context.showComboError(),e.data("open",!1),e.removeAttr("open"),e.find(".select-title .bbva-icon").css({transform:"rotate(0deg)"})},s.fn.getOptionSelected=function(){return this.data("selected")||null},s.fn.onSelect=function(e){"function"==typeof e&&this.data("selectCallback",e)},s.fn.reset=function(){return this.find(".option-text").addClass("center"),this.find(".selected-option").text(""),this.find(".option-select").removeClass("disabled"),this.removeComboError(),this.removeClass("noempty"),this.data("selected",null),this},s.fn.showComboError=function(e){return this.each(function(){s(this).addClass("hasError"),e=e||"Selecciona una opción",s(this).find("span.text-message").html('<i class="bbva-icon ui-warning"></i>'+e)})},s.fn.removeComboError=function(){return this.each(function(){s(this).removeClass("hasError"),s(this).find("span.text-message").html("&nbsp;")})},s.fn.comboSelect.template='<ul style="display:none">{{#items}}<li data-id="{{id}}">{{description}}</li>{{/items}}</ul>'}(jQuery);var day=[{id:"01",description:"01"},{id:"02",description:"02"},{id:"03",description:"03"},{id:"04",description:"04"},{id:"05",description:"05"},{id:"06",description:"06"},{id:"07",description:"07"},{id:"08",description:"08"},{id:"09",description:"09"},{id:"10",description:"10"},{id:"11",description:"11"},{id:"12",description:"12"},{id:"13",description:"13"},{id:"14",description:"14"},{id:"15",description:"15"},{id:"16",description:"16"},{id:"17",description:"17"},{id:"18",description:"18"},{id:"19",description:"19"},{id:"20",description:"20"},{id:"21",description:"21"},{id:"22",description:"22"},{id:"23",description:"23"},{id:"24",description:"24"},{id:"25",description:"25"},{id:"26",description:"26"},{id:"27",description:"27"},{id:"28",description:"28"},{id:"29",description:"29"},{id:"30",description:"30"},{id:"31",description:"31"}],month=[{id:"01",description:"Ene",monthcomplete:"ENERO"},{id:"02",description:"Feb",monthcomplete:"FEBRERO"},{id:"03",description:"Mar",monthcomplete:"MARZO"},{id:"04",description:"Abr",monthcomplete:"ABRIL"},{id:"05",description:"May",monthcomplete:"MAYO"},{id:"06",description:"Jun",monthcomplete:"JUNIO"},{id:"07",description:"Jul",monthcomplete:"JULIO"},{id:"08",description:"Ago",monthcomplete:"AGOSTO"},{id:"09",description:"Sep",monthcomplete:"SEPTIEMBRE"},{id:"10",description:"Oct",monthcomplete:"OCTUBRE"},{id:"11",description:"Nov",monthcomplete:"NOVIEMBRE"},{id:"12",description:"Dic",monthcomplete:"DICIEMBRE"}];!function(t){t.fn.radiobutton=function(e){return this.each(function(){$rad=t(this),null==$rad.data("resetCallback")&&$rad.data("resetCallback",function(){}),null!=e&&$rad.data("checkedCallback",e),$button=$rad.find(".radio"),$rad.append("<p class='i-message'><span class='text-message'>&nbsp;</span></p>"),$button.click(function(){t(this).parents(".radio-buttons").hasClass("disabled")||t.fn.selectRadio(t(this))})})},t.fn.getButtonSelected=function(){return{id:t(this).attr("data-selectedid"),description:t(this).attr("data-selected")}},t.fn.onChecked=function(e){return"function"==typeof e&&this.data("checkedCallback",e),this},t.fn.onRadioReset=function(e){return"function"==typeof e&&this.data("resetCallback",e),this},t.fn.clearRadio=function(){return this.removeRadioError(),this.find(".radio.checked").removeClass("checked"),this.removeAttr("data-selectedid"),this.removeAttr("data-selected"),this.data("resetCallback")(),this},t.fn.showRadioError=function(e){return t(this).addClass("hasError"),t(this).find("span.text-message").html('<i class="hasError bbva-icon ui-warning"></i>'+e),this},t.fn.removeRadioError=function(){return t(this).removeClass("hasError"),t(this).find("span.text-message").html("&nbsp;"),this},t.fn.selectRadioId=function(e){return t.fn.selectRadio(t(this).find("[data-id='"+e+"']")),this},t.fn.selectRadio=function(e){if(!e.hasClass("checked")){$rad_p=e.closest(".radio-section"),$buttons=$rad_p.find(".radio"),$buttons.removeClass("checked"),e.addClass("checked");var t={id:e.attr("data-id"),description:e.closest(".radio-button").find(".radio-label").text()};$rad_p.attr("data-selectedid",t.id),$rad_p.attr("data-selected",t.description),$rad_p.removeRadioError(),null!=$rad_p.data("checkedCallback")&&$rad_p.data("checkedCallback")(t)}return this}}(jQuery),function(a){a.fn.checkeable=function(e,t){return this.each(function(){"function"!=typeof e&&(e=function(){}),"function"!=typeof t&&(t=function(){}),a(this).data("checkcallback",e),a(this).data("uncheckcallback",t),a(this).click(function(){a(this).hasClass("disabled")||(a(this).hasClass("checked")?(a(this).removeClass("checked"),a(this).data("uncheckcallback")(a(this))):(a(this).removeCheckboxError(),a(this).addClass("checked"),a(this).data("checkcallback")(a(this))))})})},a.fn.isChecked=function(){return a(this).hasClass("checked")},a.fn.doCheck=function(){return this.each(function(){a(this).addClass("checked"),a(this).data("checkcallback")(a(this))})},a.fn.unCheck=function(){return this.each(function(){a(this).removeClass("checked")})},a.fn.showCheckBoxError=function(){a(this).addClass("error")},a.fn.removeCheckboxError=function(){a(this).removeClass("error")},a.fn.ckeckCallback=function(e,t){return this.each(function(){"function"!=typeof e&&(e=function(){}),"function"!=typeof t&&(t=function(){}),a(this).data("checkcallback",e),a(this).data("uncheckcallback",t)})}}(jQuery),function(n){n.fn.applyList=function(i,e){i.find(".list-result").html(Mustache.to_html(n.fn.searchList.templates[i.attr("data-template")],e)),i.find(".list-result")[0].scrollTo(0,0),i.find(".result-item").click(function(e){i.find(".result-item").not(this).removeClass("selected");for(var t=i.data("items"),a=0;a<t.items.length;a++){var o=t.items[a];if(o[t.filterid]==n(this).attr("data-id")){i.data("selected",o),i.find(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;"),i.find("input[name='filter']").val(o[t.filtertext]).removeError(),i.find(".list-result").slideUp(),i.data("selectCallback")(o);break}}n(this).addClass("selected")})},n.fn.searchList=function(e,o){return this.each(function(){var t=n(this);"function"==typeof o?t.data("selectCallback",o):"function"!=typeof t.data("selectCallback")&&t.data("selectCallback",function(){}),t.data("items",e),t.data("selected",null),n.fn.applyList(t,e);var a=t.find("input[name='filter']");a.clearInput(),t.find(".list-result").slideDown(),null==t.data("search-atached")&&(a.focus(function(e){e.preventDefault(),t.find(".list-result").slideDown(),n.fn.filterList(t,n(this).val())}),a.blur(function(e){null!=t.data("selected")&&(t.find(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;"),t.find("input[name='filter']").val(t.data("selected")[t.data("items").filtertext]).removeError(),t.find(".list-result").slideUp())}),a.keyup(function(e){n.fn.filterList(t,a.val())})),t.data("search-atached",!0),void 0!==t.data("promess-select")&&(t.selectFromList(t.data("promess-select")),t.data("promess-select",void 0))})},n.fn.selectFromList=function(o){return this.each(function(){var e=n(this);if(_allitems=e.data("items"),"undefined"!=typeof _allitems)for(var t=0;t<_allitems.items.length;t++){var a=_allitems.items[t];if(a[_allitems.filterid]==o){e.data("selected",a),e.find(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;"),e.find("input[name='filter']").val(a[_allitems.filtertext]).removeError(),e.find(".list-result").slideUp(),e.data("selectCallback")(a);break}}else e.data("promess-select",o)})},n.fn.unselect=function(){return this.each(function(){var e=n(this);e.data("selected",null),e.find("input[name='filter']").clearInput()})},n.fn.filterList=function(e,t){var a={items:[]},o=new RegExp(n.fn.escapeRegExp(n.fn.removeAcute(t)),"i"),i=e.data("items");a.items=n.map(i.items,function(e){if(o.test(n.fn.removeAcute(e[i.filtertext])))return e}),n.fn.applyList(e,a)},n.fn.getSelected=function(){return(context=this).data("selected")||null},n.fn.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},n.fn.removeAcute=function(e){for(var t=[{i:"á",o:"a"},{i:"é",o:"e"},{i:"í",o:"i"},{i:"ó",o:"o"},{i:"ú",o:"u"}],a=e.toLowerCase(),o=0;o<t.length;o++){var i=t[o];a=a.replace(i.i,i.o)}return a},n.fn.searchList.templates={simple:'{{#items}}<div class="result-item" data-id="{{description}}"><div class="item-title"><i class="bbva-icon bbva-icon__2_027_place"></i>{{description}}</div></div>{{/items}}',fulldetail:'{{#items}}<div class="result-item" data-id="{{keyWorkplace}}"><div class="item-title"><i class="bbva-icon bbva-icon__5_002_build"></i>{{schoolOficialName}}</div><div class="item-details"><p><span class="tagname">Tipo:</span> {{schoolAcronym}}</p><p><span class="tagname">CCT:</span> {{keyWorkplace}}</p><p><span class="tagname">Dirección:</span> {{schoolAddress}}</p><p><span class="tagname">Localidad:</span></i> {{location}}</p></div></div>{{/items}}'}}(jQuery);var expRegs={CURP:{regEx:/^[A-Z]{1}[AEIOUX]{1}[A-Z]{2}[0-9]{2}(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])[HM]{1}(AS|BC|BS|CC|CS|CH|CL|CM|DF|DG|GT|GR|HG|JC|MC|MN|MS|NT|NL|OC|PL|QT|QR|SP|SL|SR|TC|TS|TL|VZ|YN|ZS|NE)[B-DF-HJ-NP-TV-Z]{3}[0-9A-Z]{1}[0-9]{1}$/,error:"Ingresa una CURP válida"},EMAIL:{regEx:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/,error:"Ingresa un email válido"},ZIPCODE:{regEx:/^\d{5}/,error:"Por favor ingresa un código postal válido"}},formvalidations=[{selector:"input.form-control,textarea.form-control",invalid:function(e){return e.prop("required")&&(""==e.val().trim()||e.parents(".form-group").hasClass("hasError"))},saveValue:function(e,t){_id=e.attr("id"),t[_id]=void 0!==e.inputmask?e.inputmask("unmaskedvalue"):e.val()},resetValue:function(e){e.clearInput()},showError:function(e){e.parents(".form-group").hasClass("hasError")||e.showError("Campo obligatorio")}},{selector:".form-group-select",invalid:function(e){return e.hasClass("required")&&null==e.getOptionSelected()},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.getOptionSelected()},resetValue:function(e){e.reset()},showError:function(e){e.showComboError("Selecciona una opción")}},{selector:".radio-section",invalid:function(e){return e.hasClass("required")&&null==e.getButtonSelected().id},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.getButtonSelected()},resetValue:function(e){e.clearRadio()},showError:function(e){e.showRadioError("Selecciona una opción")}},{selector:".checkbox",invalid:function(e){return e.hasClass("required")&&!e.isChecked()},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.isChecked()},resetValue:function(e){e.unCheck()},showError:function(e){e.showCheckBoxError("")}},{selector:".list-filter-result",invalid:function(e){return!1},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.getSelected()},resetValue:function(e){e.unselect()},showError:function(e){}}];function hasAttr(e,t){var a=e.attr(t);return void 0!==a&&!1!==a}!function(e,t){t.validateControl=function(e){e.find(".openuploadfile").click(function(){loadTemplate($("#modal_generic .body"),templates.ufile,{})}),e.find("input[type='text']").inputable(),e.find("textarea").inputable(),e.find(".radio-section").radiobutton(),e.find(".uppercase").keyup(function(e){$(this).val($(this).val().replace(/á/gi,"A").replace(/é/gi,"E").replace(/í/gi,"I").replace(/ó/gi,"O").replace(/ú/gi,"U").toUpperCase())}),e.find(".letters").keypress(function(e){return 97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90||0==e.charCode||32==e.charCode||45==e.charCode||46==e.charCode||209==e.charCode||241==e.charCode||225==e.charCode||233==e.charCode||237==e.charCode||243==e.charCode||250==e.charCode||193==e.charCode||201==e.charCode||205==e.charCode||211==e.charCode||218==e.charCode||220==e.charCode||252==e.charCode}),e.find(".alphanumeric").keypress(function(e){return 97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90||48<=e.charCode&&e.charCode<=57||0==e.charCode||32==e.charCode}),e.find(".letnum").keypress(function(e){return 97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90||0==e.charCode||32==e.charCode||45==e.charCode||46==e.charCode||209==e.charCode||241==e.charCode||225==e.charCode||233==e.charCode||237==e.charCode||243==e.charCode||250==e.charCode||193==e.charCode||201==e.charCode||205==e.charCode||211==e.charCode||218==e.charCode||220==e.charCode||252==e.charCode||48<=e.charCode&&e.charCode<=57}),e.find(".decimals").keypress(function(e){return 48<=e.charCode&&e.charCode<=57||46==e.charCode}),e.find(".numbers").keypress(function(e){return 48<=e.charCode&&e.charCode<=57}),e.find(".numg").keypress(function(e){return 48<=e.charCode&&e.charCode<=57||45==e.charCode||97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90}),e.find("input[data-regex]").not("input[data-confirm]").blur(function(){_$this=$(this),_regex=$(this).attr("data-regex"),_thisval=$(this).val(),""==_thisval||expRegs[_regex].regEx.test(_thisval)?_$this.removeError():_$this.showError(expRegs[_regex].error)}),e.find("input[required]").attr("data-required",!0),e.find("input[data-confirm]").each(function(){confirm_element=$(this),main_element=$(confirm_element.attr("data-confirm")),main_element.keyup(function(){$confirm_element=$('[data-confirm="#'+$(this).attr("id")+'"]'),""!=$(this).val()?(hasAttr($(this),"data-required")||$(this).attr("required","required"),hasAttr($confirm_element,"data-required")||($confirm_element.parents(".grid-item").slideDown(),$confirm_element.attr("required",!0))):hasAttr($confirm_element,"data-required")||($confirm_element.parents(".grid-item").slideUp(),$confirm_element.removeAttr("required"),$confirm_element.val(""),$confirm_element.removeError())}),confirm_element.add(main_element).blur(function(){var e,t;t=hasAttr($(this),"data-confirm")?(e=$(this),$(e.attr("data-confirm"))):(e=$('[data-confirm="#'+$(this).attr("id")+'"]'),$(this)),""!=e.val()&&e.val()!=t.val()?(e.showError("Los correos no coinciden"),t.showError("")):""!=t.val()||hasAttr(t,"data-required")?""!=e.val()&&e.val()==t.val()&&(e.removeError(),t.removeError(),expRegs.EMAIL.regEx.test(t.val())||(t.showError(expRegs.EMAIL.error),e.showError(expRegs.EMAIL.error))):(t.removeAttr("required"),t.removeError(),e.removeError(),e.removeAttr("required"))})}),e.find("input.phonenumber").inputmask({mask:"(999) 999-9999",showMaskOnHover:!1}).blur(function(){_phonen=$(this).inputmask("unmaskedvalue").length,0<_phonen&&_phonen<10&&$(this).showError("Ingresa el número completo")}),e.find("input.no-repeat").each(function(){$(this).keyup(function(){var e=$(".no-repeat"),a="",t="",o=$().add($(this)),i=0;$.each(e,function(e,t){a=$().add(t),o.is(a)||o.val()===a.val()&&(o.showError("No se permite número telefónico repetido"),o.addClass("repeated"))});for(var n=0;n<e.length;n++){a=$().add(e[n]);for(var s=i=0;s<e.length;s++)t=$().add(e[s]),a.is(t)||a.hasClass("repeated")&&a.val()!==t.val()&&i++;2===i&&(a.removeError(),a.removeClass("repeated"))}})}),e.find("input.mxnamount").focus(function(){$(this).inputmask("currency",{rightAlign:!1,autoUnmask:!0,allowPlus:!1,allowMinus:!1,integerDigits:"6"})}).blur(function(){$(this).inputmask&&0==$(this).inputmask("unmaskedvalue").length&&$(this).inputmask("remove")}),e.find(".lastnameb").each(function(){$(this).keyup(function(){var e=$().add($(this)),t=e.closest(".grid-container").find('[data-targetdisable="#'+e.attr("id")+'"]');t.addClass("disabled");var a=e.closest(".grid-container").find('[data-targettoggle="#'+t.attr("id")+'"]');""!==e.val()||a.hasClass("checked")||t.removeClass("disabled")})}),e.find("form").each(function(){$form=$(this),$form.find("input.form-control").each(function(){$formelement=this,$formelement.addEventListener("blur",function(){$(this).val($(this).val().trim()),this.required&&0==$(this).val().length&&$(this).showError($(this).attr("data-emptymessage")||"Campo obligatorio")})}),$form.find(".form-group-select").each(function(){$formcombo=$(this),$formcombo.find(".option-select").append("<p class='i-message'><span class='text-message'>&nbsp;</span></p>")}),$form.find(".checkbox").checkeable(),$form.find(".checkbox[data-targettoggle]").each(function(){$(this).ckeckCallback(function(){$($(this).attr("data-targetdisable")).clearInput().prop("disabled",!0).prop("required",!1),$($(this).attr("data-targettoggle")).unCheck().addClass("disabled").data("uncheck",!0),$($(this).attr("data-targetdisable")).setValue("XXXXX")}.bind(this),function(){$($(this).attr("data-targetdisable")).clearInput().prop("disabled",!1).prop("required",!0),""===$($($(this).attr("data-targettoggle")).attr("data-targetdisable")).val()&&$($(this).attr("data-targettoggle")).removeClass("disabled").data("uncheck",!1)}.bind(this))}),$form.find(".e-tooltip-f").each(function(){$etooltip=$(this),new Tooltip($etooltip,{placement:"bottom",trigger:"focus",html:!0,title:$etooltip.attr("data-tooltitle")})}),$form.find(".e-tooltip").each(function(){$etooltip=$(this),new Tooltip($etooltip,{placement:"bottom",html:!0,title:$etooltip.attr("data-tooltitle")})}),$form.find("textarea.form-control").each(function(){$formelement=this,$formelement.addEventListener("blur",function(){$(this).val($(this).val().trim()),this.required&&0==$(this).val().length&&$(this).showError($(this).attr("data-emptymessage")||"Campo obligatorio")})}),$form.find(".btn__submit").click(function(){$(this).hasClass("btn__disabled")||(_$form=$(this).closest("form"),allDataForm=function(e){var t={isValid:!0};for(var a in _$form=$(e).closest("form"),formvalidations)_$form.find(formvalidations[a].selector).each(function(){formvalidations[a].saveValue($(this),t),formvalidations[a].invalid($(this))&&(t.isValid=!1,formvalidations[a].showError($(this)))});return t}(this),formValidations="function"!=typeof _$form.data("validations")||_$form.data("validations")(allDataForm),!_$form.hasClass("notify-on-error")||allDataForm.isValid&&formValidations?(0!=_$form.prev().length&&_$form.prev().hasClass("notification")&&_$form.prev().remove(),"function"==typeof $(this).data("complete")&&$(this).data("complete")(allDataForm)):(_$form.parents(".modal").length?(notifyElem=_$form.find(".actionsection:last").prev(),0!=notifyElem.length&&notifyElem.hasClass("notification")&&notifyElem.remove(),loadTemplate(_$form.find(".actionsection:last"),miniTemplates.notification,{type:"error",title:"Datos obligatorios incompletos",message:"Por favor ingresa todos campos obligatorios"},"before")):(_scrollTo=hasAttr(_$form,"data-notify")?_$form.attr("data-notify"):"Edge"==BrowserDetect.browser?"body":"html",$(_scrollTo).animate({scrollTop:_$form.offset().top-100},2e3,"swing",function(){notifyElem=_$form.prev(),0!=notifyElem.length&&notifyElem.hasClass("notification")&&notifyElem.remove(),loadTemplate(_$form,miniTemplates.notification,{type:"error",title:"Datos obligatorios incompletos",message:"Por favor ingresa todos campos obligatorios"},"before")})),hasAttr(_$form,"data-status")&&($(_$form.attr("data-status")).removeClass("complete"),$(_$form.attr("data-status")).addClass("incomplete"),$(_$form.attr("data-status")).html('<i class="bbva-icon ui-warning"></i>Incompleto'))))})})},t.validateControl(e),t.fillForm=function(a,e){$.each(e,function(e,t){$3l=a.find("#"+e),$3l.is("input")||$3l.is("textarea")?($3l.clearInput(),$3l.setValue(t)):$3l.hasClass("form-group-select")?($3l.reset(),null!=t&&$3l.selectOptionId("object"==typeof t?t.id:t)):$3l.hasClass("radio-section")?($3l.clearRadio(),$3l.selectRadioId("object"==typeof t?t.id:t)):$3l.hasClass("list-filter-result")?($3l.unselect(),$3l.selectFromList(t)):$3l.hasClass("checkbox")?($3l.unCheck(),t&&$3l.doCheck()):console.log("fillForm: Element "+e+" doesn't exists in form",a)})},t.resetForm=function(e){for(var t in formvalidations)e.find(formvalidations[t].selector).each(function(){formvalidations[t].resetValue($(this))})}}($(document),window);var __={get:function(e,t,a){var o=null==e?void 0:function(e,t){for(var a=t.split("."),o=0;o<a.length;o++){if(wasArray={flag:!1,value:0},-1!=a[o].indexOf("[")&&(wasArray.flag=!0,wasArray.value=a[o].substring(a[o].indexOf("[")+1,a[o].indexOf("]")),a[o]=a[o].split("[")[0]),!e||!e.hasOwnProperty(a[o]))return;e=wasArray.flag?e[a[o]][wasArray.value]:e[a[o]]}return"string"==typeof e?e.trim():e}(e,t);return void 0===o?a:o}};$("#btn-exit").click(function(){logout()});var toggleModule=function(e){if(!e.hasClass("animated"))if($content=$("#"+e.attr("data-target")),e.addClass("animated"),e.hasClass("is-open"))e.removeClass("is-open"),$content.slideUp(400,function(){e.removeClass("animated")});else{for(var t=0;t<$(".accordion .step-header").length;t++)element=$(".accordion .step-header")[t],$(element).hasClass("is-open")&&$(element).attr("data-target")!=e.attr("data-target")&&($idTemp=$("#"+$(element).attr("data-target")),$idTemp.slideUp());$(".accordion .step-header").not("data-target",e.attr("data-target")).removeClass("is-open"),e.addClass("is-open"),$content.slideDown(400,function(){e.removeClass("animated")})}};$(".accordion .step-header").click(function(e){hasAttr($(this),"data-catalog")&&"false"==$(this).attr("data-loaded")?(_lcatalog=$(this).attr("data-catalog"),fn_verifyCatalogs(loadModule.moduleCatalog[_lcatalog].list(),loadModule.moduleCatalog[_lcatalog].callback)):toggleModule($(this))}),$("#email, #email2, #email3").blur(function(){""!=$("#email").val()&&$("#email").val()==$("#email2").val()&&$("#email2").showError("No se permiten correos duplicados"),""!=$("#email2").val()&&$("#email2").val()==$("#email3").val()&&$("#email3").showError("No se permiten correos duplicados"),""!=$("#email").val()&&$("#email").val()==$("#email3").val()&&$("#email3").showError("No se permiten correos duplicados")}),$("#dbirthdate").comboSelect(day),$("#mbirthdate").comboSelect(month);var fnFillCatalogs=function(e,t,a){t=t||[],$("#"+e).comboSelect(t,a)};function saveglobal(){restExec({service:"UPDATE_ANNOUNCEMENT",data:{scholarshipProgram:{id:moduleInitData.announcement.scholarshipProgram.id},scholar:{Id:ivUser}},showWait:!0,success:rest_fnUpdateScholarshipAnnouncementStatus})}function changeStatusSel(e,t,a){_title=t||"Datos guardados",_message=a||"Tus datos se han almacenado correctamente, gracias",$elstatus=e.siblings(".step-header").find(".step-status"),e.siblings(".step-header").removeClass("is-open"),e.slideUp(),loadTemplate($("#modal_generic .body"),miniTemplates.success,{title:_title,message:_message})}function changeModuleSatus(e,t){$elstatus=e.siblings(".step-header").find(".step-status"),"complete"==t?($elstatus.removeClass("incomplete"),$elstatus.addClass("complete"),$elstatus.html('<i class="bbva-icon ui-checkmark-filled"></i>Completo')):($elstatus.removeClass("complete"),$elstatus.addClass("incomplete"),$elstatus.html('<i class="bbva-icon ui-warning"></i>Incompleto'))}function vali_date(e){var t=e[0]+e[1],a=new Date(e);return parseInt(t)==parseInt(a.getMonth()+1)}$("#dsclass").comboSelect(day),$("#msclass").comboSelect(month),$("#btn_savegd").data("complete",function(e){alert("llenar info")}),$(".modal .icon-close").click(function(){$(this).parents(".modal").removeAttr("open"),callbackCloseModal()}),$(".o_two").comboSelect(function(){_arr_0_2=[];for(var e=0;e<2;e++)_arr_0_2.push({id:""+e,description:""+e});return _arr_0_2.push({id:"2",description:"2 o más"}),_arr_0_2}()),$(".r-options").onChecked(),$("#dbirthdate").onSelect(function(){fbdate||(vali_date($("#mbirthdate").getOptionSelected().id+"/"+$("#dbirthdate").getOptionSelected().description+"/"+$("#ybirthdate").val())?(fbdate=!0,$("#mbirthdate").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#mbirthdate").onSelect(function(){fbdate||(vali_date($("#mbirthdate").getOptionSelected().id+"/"+$("#dbirthdate").getOptionSelected().description+"/"+$("#ybirthdate").val())?(fbdate=!0,$("#dbirthdate").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#dsclass").onSelect(function(){fcdate||(vali_date($("#msclass").getOptionSelected().id+"/"+$("#dsclass").getOptionSelected().description+"/"+$("#ysclass").val())?(fcdate=!0,$("#msclass").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#msclass").onSelect(function(){fcdate||(vali_date($("#msclass").getOptionSelected().id+"/"+$("#dsclass").getOptionSelected().description+"/"+$("#ysclass").val())?(fcdate=!0,$("#dsclass").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#btn_save_all").click(function(){alert("salvar todo")});var loadModule={getCatalog:function(t,e){null==catalogs[t]||0==catalogs[t].length?restExec({service:"LIST_CATALOGS",type:"GET",async:!0,showWait:!0,hasUrlParam:!0,urlParam:{catalog:t},data:{},finallyError:function(){e()},finallySuccess:[function(e){rest_fnGetSchoolCatalog(t,e)},e]}):e(catalogs[t])},moduleCatalog:{general:{list:function(){return["CAT_Tipo_Alta","CAT_BANK","CAT_CREDITMORTGAGE","CAT_CREDITCOMMERCIAL","CAT_COFINAVIT","CAT_GRAVAMEN"]},callback:function(){fnFillCatalogs("relationship",__.get(catalogs,"CAT_Tipo_Alta",[]),function(e){"25"==e.id?($("#o_relationship").clearInput(),$("#o_relationship").attr("required","required"),$("#other_relationship").slideDown()):($("#o_relationship").removeAttr("required"),$("#other_relationship").slideUp(),$("#o_relationship").clearInput())}),fnFillCatalogs("generatingbank",__.get(catalogs,"CAT_BANK",[]),function(e){}),fnFillCatalogs("mortgagecredittype",__.get(catalogs,"CAT_CREDITMORTGAGE",[]),function(e){}),fnFillCatalogs("commercialcredit",__.get(catalogs,"CAT_CREDITCOMMERCIAL",[]),function(e){}),fnFillCatalogs("cofinavit",__.get(catalogs,"CAT_COFINAVIT",[]),function(e){}),fnFillCatalogs("barzon",__.get(catalogs,"CAT_COFINAVIT",[]),function(e){}),fnFillCatalogs("gravamen",__.get(catalogs,"CAT_GRAVAMEN",[]),function(e){}),$('[data-target="general-data"]').attr("data-loaded","true"),void 0!==moduleInitData.general&&rest_fnGetGeneralData(moduleInitData.general),toggleModule($('[data-target="general-data"]'))}},schoolData:{list:function(){return["CAT_TYPEPROPERTY"]},callback:function(){fnFillCatalogs("typepropertie",__.get(catalogs,"CAT_TYPEPROPERTY",[])),$('[data-target="schoolar-data"]').attr("data-loaded","true"),void 0!==moduleInitData.schoolData&&rest_fnGetScholarInf(moduleInitData.schoolData),toggleModule($('[data-target="schoolar-data"]'))}},dataInmueble:{list:function(){return["CAT_TYPEPROPERTY","CAT_SUBTYPEPROPERTY","CAT_STATE"]},callback:function(){fnFillCatalogs("typepropertie",__.get(catalogs,"CAT_TYPEPROPERTY",[])),fnFillCatalogs("subtypeproperty",__.get(catalogs,"CAT_SUBTYPEPROPERTY",[])),fnFillCatalogs("propertystate",__.get(catalogs,"CAT_STATE",[])),fnFillCatalogs("municipalities_d",__.get(catalogs,"CAT_STATE",[])),$('[data-target="inmueble-data"]').attr("data-loaded","true"),void 0!==moduleInitData.home&&rest_fnGetHomeServices(moduleInitData.home),toggleModule($('[data-target="inmueble-data"]'))}}},checkStatus:function(){setTimeout(function(){0==$(".step-header .step-status.incomplete").length&&"0"==__.get(moduleInitData,"announcement.globalStatus","0")?$(".submtbtn.send").removeAttr("style"):$(".submtbtn.send").attr("style","display: none")},450)},ensureFun:function(e){return"function"==typeof e?e:rest_fnNothig},getStates:function(e){null==stateTransactions||0==stateTransactions.length?restExec({showWait:!0,service:"GET_STATES",type:"POST",data:{},asyn:!1,finallySuccess:[function(e){rest_fnGetStates(e)},e],finallyError:[function(e){rest_fnGetStates(e)},e]}):e(stateTransactions)},getMunicipalities:function(t,e){null==municipalityTransactions[t]||0==municipalityTransactions[t].length?restExec({showWait:!0,service:"GET_MUNICIPALITY",type:"POST",asyn:!1,data:{state:t},finallySuccess:[function(e){rest_fnGetMunicipalities(t,e)},e],finallyError:[function(e){rest_fnGetMunicipalities(t,e)},e]}):e(municipalityTransactions[t])}},loadMainModules=function(){alert("loadMainModules")},loadNextModules=function(e){"function"!=typeof e&&(e=loadModule.checkStatus)};Object.keys(templates).forEach(function(t){$.get(templates[t].path,function(e){templates[t].html=e})});var fn_opennotification=function(){fn_showModal()};$("#currentYear").text((new Date).getFullYear());