var municipalityTransactions={},stateTransactions=[],fbdate=!0,fcdate=!0,firstModuleComplete=!1,genders=[{id:"0",description:"Hombre"},{id:"1",description:"Mujer"}],catalogs={CAT_NOTARY:[{id:"1",description:"Notaría No. 183, ABASCAL OLASCOAGA RODRIGO"},{id:"2",description:"Notaría No. 233, ADAME LÓPEZ ÁNGEL GILBERTO"},{id:"3",description:"Notaría No. 174, AGUILAR MOLINA VÍCTOR RAFAEL"},{id:"4",description:"Notaría No. 118, AGUILERA SOTO RAMÓN"},{id:"5",description:"Notaría No. 19, ALESSIO ROBLES MIGUEL"}],CAT_BANK:[{id:"1",description:"Arrendadora"},{id:"2",description:"Centro Especializado de Recuperación "},{id:"3",description:"Comercial"},{id:"4",description:"Corporativa"},{id:"5",description:"Danf"},{id:"6",description:"Fideicomiso"},{id:"7",description:"Del Consumidor"},{id:"8",description:"Factoraje"}],CAT_CREDITMORTGAGE:[{id:"1",description:"Créd. a la vivienda"},{id:"2",description:"Créd. Hipotecario"},{id:"3",description:"Hipot. Preferencial"}],CAT_CREDITCOMMERCIAL:[{id:"1",description:"Arrendamiento"},{id:"2",description:"Administración"},{id:"3",description:"Cartera Tradicional"},{id:"4",description:"Créditos Comerciales"},{id:"5",description:"Créd. Hipotecario"},{id:"6",description:"Créd. a la vivienda"},{id:"7",description:"Desafectos"},{id:"8",description:"Hipot. Preferencial"},{id:"9",description:"Menudeo ABC Person."},{id:"10",description:"Planes de Crédito"},{id:"11",description:"Renta Hipotecaria"},{id:"12",description:"Tarjeta de Crédito"}],CAT_GRAVAMEN:[{id:"1",description:"Propio"},{id:"2",description:"Infonavit"},{id:"3",description:"SHF"},{id:"4",description:"Embargo de 3ro"}],CAT_TYPEPROPERTY:[{id:"1",description:"Condominio"},{id:"2",description:"Privado"}],NOTARY_DATA:[{id:"1",description:"Notaría No. 183"},{id:"2",description:"Notaría No. 233"},{id:"3",description:"Notaría No. 174"},{id:"4",description:"Notaría No. 118"},{id:"5",description:"Notaría No. 9"},{id:"6",description:"Notaría No. 432"},{id:"7",description:"Notaría No. 210"},{id:"8",description:"Notaría No. 10"},{id:"9",description:"Notaría No. 9"},{id:"10",description:"Notaría No. 1"}],CAT_STATE:[{id:"1",description:"Aguascalientes"},{id:"2",description:"Baja California"},{id:"3",description:"Baja California Sur"},{id:"4",description:"Campeche"},{id:"5",description:"Colima"},{id:"6",description:"Chihuahua"},{id:"7",description:"Ciudad de México"},{id:"8",description:"Durango"},{id:"9",description:"Guanajuato"},{id:"10",description:"Guerrero"},{id:"11",description:"Hidalgo"},{id:"12",description:"México"},{id:"13",description:"Michoacán de Ocampo"},{id:"14",description:"Morelos"},{id:"15",description:"Nayarit"},{id:"16",description:"Oaxaca"},{id:"17",description:"Puebla"},{id:"18",description:"Querétaro"},{id:"19",description:"Quintana Roo"},{id:"20",description:"San Luis Potosí"},{id:"21",description:"Sinaloa"},{id:"22",description:"Sonora"},{id:"23",description:"Tabasco"},{id:"24",description:"Tamaulipas"},{id:"25",description:"Tlaxcala"},{id:"26",description:"Veracruz de Ignacio de la Llave"},{id:"27",description:"Yucatán"},{id:"28",description:"Zacatecas"}],CAT_SUBTYPEPROPERTY:[{id:"1",description:"Bodega"},{id:"2",description:"Empresa"},{id:"3",description:"Hotel"},{id:"4",description:"Local comercial"},{id:"5",description:"Nave Industrial"},{id:"6",description:"Oficina"},{id:"7",description:"Negocios en marcha"},{id:"8",description:"Granja"},{id:"9",description:"Rancho"},{id:"10",description:"Terreno rustico no productivo"},{id:"11",description:"Terreno rustico productivo"},{id:"12",description:"Terreno semiurbano"},{id:"13",description:"Terreno urbano"},{id:"14",description:"Casa"},{id:"15",description:"Departamento"},{id:"16",description:"Casa con local comercial"}]},moduleInitData={};console.log("%cRealizar alguna modificación en esta sección puede provocar la pérdida de tu información\n","color:#a90c0c;font-size:22px;");var servOrigin=window.location.origin,isLocal=-1!=servOrigin.indexOf("localhost");function redirectToLogin(){var e=window.location.origin;-1==e.indexOf("localhost")&&(-1!=e.indexOf("150.250.238.172")?window.location=e+"/mgbfprv_des_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("150.250.238.173")?window.location=e+"/mgbfprv_test_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("becasfmxt.mex.igrupobbva")?window.location=e+"/mgbfprv_test_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("calplataformabecas.fundacionbbvabancomer.com.mx")?window.location=e+"/mgbfprv_qa_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("plataformabecaslo.fundacionbbvabancomer.org")?window.location=e+"/mgbfprv_lo_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("plataformabecas.fundacionbbvabancomer.org")?window.location=e+"/mgbfprv_pr_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("plataformabecas.fundacionbbva.mx")&&(window.location=e+"/mgbfprv_pr_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/"))}isLocal||(window.oldconsole={},window.oldconsole.log=console.log,console.log=function(){},window.console.log=console.log);var countSession,minutes,timer,_timer,_minutes,_seconds,showLogOut=function(e){e?loadTemplate($("#modal_generic .body"),miniTemplates.success,{title:e,message:"",onAccept:function(){location.reload()}}):loadTemplate($("#modal_generic .body"),miniTemplates.error,{title:"Error",message:"Tu sesión ha terminado por inactividad",onAccept:function(){location.reload()}})},initCountSession=function(){stopCountSession(),timer=minutes=8,countSession=setInterval(function(){console.log("## timer",timer),0==--timer&&(showTimeSession(),stopCountSession())},6e4)},stopCountSession=function(){null!=countSession&&clearInterval(countSession)},refreshSession=function(){$("#modal_timeout").removeAttr("open"),$("#modal_timeout").find(".btn_acept span").text("Continuar con sesión"),showWait(),$.ajax({type:"GET",contentType:"image/png",url:"images/favicons/16x16.png",cache:!1,async:!0,success:function(e){if(initCountSession(),void 0!==e&&-1!=e.indexOf("<title>Login</title>"))return hideWait(),void redirectToLogin();hideWait()},error:function(){hideWait(),redirectToLogin()}})},showTimeSession=function(){var e,t,i=60,a=setInterval(function(){e=parseInt(i/60,10),t=parseInt(i%60,10),e=e<10?"0"+e:e,t=t<10?"0"+t:t,$("#cdSession").text(e+":"+t),--i<0&&($("#modal_timeout").find(".btn_acept span").text("Continuar"),clearInterval(a))},1e3);console.info("## showTimeSession"),$("#modal_timeout").attr("open","")};$("#modal_timeout").find(".btn_acept").click(refreshSession);var logout=function(){showWait(),setTimeout(function(){restExec({service:"TERMINATE_SESSION",async:!1,data:{},success:function(e){console.log("se cerró sesión en back end")},error:function(e){console.log("no se cerró sesión en back end")}}),$.ajax({type:"GET",dataType:"html",url:window.location.origin+"/pkmslogout.form",async:!0,success:function(){redirectToLogin()},error:function(){redirectToLogin()}})},400)};function showWait(){$("body").addClass("loading")}function hideWait(){$("body").removeClass("loading")}var callbackCloseModal=function(){};function formatMoney(e,t){e=(e+="").replace(/,/g,"").replace(/\$/g,"");var i=isNaN(i=Math.abs(i))?2:i,a=e<0?"-":"",o=String(parseInt(e=Math.abs(Number(e)||0).toFixed(i))),n=3<(n=o.length)?n%3:0;return a+(t?"":"$ ")+(n?o.substr(0,n)+",":"")+o.substr(n).replace(/(\d{3})(?=\d)/g,"$1,")+(i?"."+Math.abs(e-o).toFixed(i).slice(2):"")}var verifyCatalogs={catToVerify:[],catIndex:-1,callback:function(){},loopCatalogs:function(){verifyCatalogs.catIndex++,verifyCatalogs.catIndex<verifyCatalogs.catToVerify.length?(showWait(),"STATES"==verifyCatalogs.catToVerify[verifyCatalogs.catIndex]?loadModule.getStates():loadModule.getCatalog(verifyCatalogs.catToVerify[verifyCatalogs.catIndex],verifyCatalogs.loopCatalogs)):(verifyCatalogs.catToVerify=[],verifyCatalogs.catIndex=-1,verifyCatalogs.callback(),verifyCatalogs.callback=function(){},hideWait())}},fn_verifyCatalogs=function(e,t){verifyCatalogs.catToVerify=e,verifyCatalogs.callback=t,verifyCatalogs.loopCatalogs()};function concatSpace(e,t){return(e=e.toUpperCase().replace(/Á/gi,"A").replace(/É/gi,"E").replace(/Í/gi,"I").replace(/Ó/gi,"O").replace(/Ú/gi,"U")).concat(" ".repeat(t-e.length))}function validateEmptyOption(e){_tmpOpts=e.data("options")||[],_hasEmptyOp=!1;for(var t=0;t<_tmpOpts.length;t++)if(0==_tmpOpts[t].id||"0"==_tmpOpts[t].id){_hasEmptyOp=!0;break}_hasEmptyOp||(_descSt=dommySchools.getDommyDescription(),_tmpOpts.push({id:0,description:_descSt}),e.comboSelect(_tmpOpts)),e.data("selected",{id:0,description:_descSt}),e.removeComboError(),e.find(".option-text").removeClass("center"),e.find(".selected-option").text(_descSt)}var navbar=document.getElementsByClassName("header");function _get_window_height(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}function _get_window_Yscroll(){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0}function _get_doc_height(){return Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}function _get_scroll_percentage(){return(_get_window_Yscroll()+_get_window_height())/_get_doc_height()*100}var LIST_SERVICES={services:[],errors:[],callback:function(){},inProgress:!(window.onscroll=function(){0<window.pageYOffset?_get_scroll_percentage()<80&&navbar[0].classList.add("sticky"):navbar[0].classList.remove("sticky")}),listRestExec:function(e,t){e.ignoreError=e.ignoreError||!1,LIST_SERVICES.services.push(e),"function"==typeof t&&(LIST_SERVICES.callback=t),LIST_SERVICES.verifyServices()},verifyServices:function(){LIST_SERVICES.inProgress||(LIST_SERVICES.inProgress=!0,showWait(),LIST_SERVICES.loopServices())},loopServices:function(){LIST_SERVICES.services.length?(_restToExe=LIST_SERVICES.services[0],_restToExe.showWait=!1,_restToExe.async=!0,_restToExe.error=_restToExe.error||rest_fnNothig,void 0===_restToExe.finallyError?_restToExe.finallyError=[]:"function"==typeof _restToExe.finallyError&&(_restToExe.finallyError=[_restToExe.finallyError]),void 0===_restToExe.finallySuccess?_restToExe.finallySuccess=[]:"function"==typeof _restToExe.finallySuccess&&(_restToExe.finallySuccess=[_restToExe.finallySuccess]),_restToExe.ignoreError||_restToExe.finallyError.push(function(e){LIST_SERVICES.errors.push(e)}),_fnLoop=function(){LIST_SERVICES.services.shift(),LIST_SERVICES.loopServices()},_restToExe.finallySuccess.push(_fnLoop),_restToExe.finallyError.push(_fnLoop),restExec(_restToExe)):(LIST_SERVICES.errors.length&&(loadTemplate($("#modal_generic .body"),miniTemplates.error,{title:"Se presentaron algunos errores al realizar operación",message:"Es posible que tu información no se muestre de forma completa"}),LIST_SERVICES.errors=[]),hideWait(),LIST_SERVICES.inProgress=!1,LIST_SERVICES.callback())}};function restExec(e){var i={type:e.type||"POST",service:e.service,headers:e.headers||{},data:e.data||{},async:e.async||!0,success:e.success||rest_fnNothig,error:e.error||rest_fnShowError,showWait:e.showWait||!1,finallySuccess:e.finallySuccess||rest_fnNothig,finallyError:e.finallyError||rest_fnNothig,hasUrlParam:e.hasUrlParam||!1,urlParam:e.urlParam||{}};console.log("datos a enviar: ",i.data),console.log("string ",JSON.stringify(i.data)),rest_execute=function(){$.ajax({type:i.type,dataType:"json",contentType:"application/json; charset=utf-8",url:SCONFIG.get(i),data:JSON.stringify(i.data),async:i.async,cache:!1,success:function(t){initCountSession(),console.log("RESPUESTA "+i.service,t),i.showWait&&hideWait(),i.success(t),i.finallySuccess.constructor===Array?i.finallySuccess.forEach(function(e){e(t)}):i.finallySuccess(t)},error:function(t){if(initCountSession(),console.log("ERROR EN SERVICIO "+i.service,t),void 0!==t.responseText&&-1!=t.responseText.indexOf("<title>Login</title>"))return showLogOut(),void hideWait();void 0!==t.responseJSON&&(t.responseJSON.code=t.responseJSON.code||t.responseJSON.errorcode,t.responseJSON.message=t.responseJSON.message||t.responseJSON.errormessage),i.showWait&&hideWait(),i.error(t),i.finallyError.constructor===Array?i.finallyError.forEach(function(e){e(t)}):i.finallyError(t)}})},i.showWait&&showWait(),rest_execute()}var rest_fnNothig=function(){console.log("nothing")},rest_fnShowError=function(e){void 0!==e.responseJSON&&void 0!==e.responseJSON.message||(e.responseJSON={message:"SIN DETALLE DEL ERROR"}),loadTemplate($("#modal_generic .body"),miniTemplates.error,{title:"Ocurrió un error al realizar la operación",message:e.responseJSON.message,redirectToLogin:"No tienes privilegios para accesar"==e.responseJSON.message})},rest_fnGetSchoolCatalog=function(e,t){console.log("rest_fnGetSchoolCatalog"),console.log("cat:",e),console.log("data:",t),console.log(" data.data || []",t.data||[]),catalogs[e]=t.data||[]},rest_fnGetStates=function(e){stateTransactions=__.get(e,"stateTransactions",[]);var t=[];for(i=0;i<stateTransactions.length;i++)t.push({id:stateTransactions[i].state.code,description:stateTransactions[i].state.name});stateTransactions=t},rest_fnGetMunicipalities=function(e,t){var a=__.get(t,"municipalityTransactions",[]),o=[];for(i=0;i<a.length;i++)o.push({id:a[i].municipality.code,description:a[i].municipality.name});municipalityTransactions[e]=o||[]},validateGeneralStatus=function(){"COMPLETO"==__.get(moduleInitData.general,"moduleStatus","")?($(".page-container .i-form.accordion").not("#wf0").show(),firstModuleComplete?loadModule.legalDisclaimer(function(){loadModule.checkStatus(),changeModuleSatus($("#general-data"),"complete")}):(firstModuleComplete=!0,loadNextModules(function(){loadModule.checkStatus(),changeModuleSatus($("#general-data"),"complete")}))):$(".page-container .i-form.accordion").not("#wf0").hide()},SCONFIG=function(){var i=-1!=window.location.origin.indexOf("localhost:3000")?"http://127.0.0.1:3004/":"/mgbf_mult_web_fundacionbancomerextranetwebfront_01/",a={GET_STATES:"list/state",GET_MUNICIPALITY:"list/municipality",TERMINATE_SESSION:"terminate/session",LIST_CATALOGS:"catalogs/{{catalog}}"};return{get:function(e){var t=i+a[e.service];return e.hasUrlParam?Mustache.render(t,e.urlParam):t}}}(),fn_nothing=function(){},fn_showModal=function(){$("#modal_generic").attr("open","")},fn_hideModal=function(){$("#modal_generic").removeAttr("open")},fn_aceptModal=function(e,t){fn_showModal(),t.redirectToLogin?$(".btn_acept").click(function(e){e.preventDefault(),redirectToLogin()}):"function"==typeof t.onAccept?$(".btn_acept").click(function(){t.onAccept(),fn_hideModal()}):$(".btn_acept").click(function(e){e.preventDefault(),fn_hideModal()})},fn_confirmModal=function(e,t){t.onDecline="function"==typeof t.onDecline?t.onDecline:fn_hideModal,fn_showModal(),e.find(".btn_acept").click(t.onAccept.bind(t)),e.find(".btn_decline").click(t.onDecline.bind(t))},fn_closeNotification=function(e){e.find(".close-button").click(function(){$(this).closest(".notification").slideUp("slow",function(){$(this).remove()})}),e.slideDown("slow")},uploadFile={index:0,onFinish:function(){}},fn_uploadfilemodal=function(){var n=0,s={},e=new Dropzone("#dragndrop",{acceptedFiles:"application/pdf,image/jpeg,image/png",dictFileTooBig:"El archivo supera el tamaño permitido de {{maxFilesize}} MB",dictMaxFilesExceeded:"Número máximo de archivos alcanzado",dictInvalidFileType:"Sólo se permiten archivos JPG, PNG y PDF",autoProcessQueue:!1,dictDefaultMessage:"",maxFiles:1,maxFilesize:10,previewTemplate:miniTemplates.filepreview.html,previewsContainer:"#file-preview-wrapper",url:"/",init:function(){this.on("addedfile",function(e){}),this.on("drop",function(){})},accept:function(e,t){document.getElementById("filecontainer").classList.remove("empty"),$("#sbtmfiles").show();var i=this;e.idFile=n;var a=e.previewTemplate.querySelector(".btn-delete-file"),o=e;a.addEventListener("click",function(){i.removeFile(o)}),s[n]={active:!0,base64:""},n++,t()},removedfile:function(e){e.previewTemplate.remove(),0==this.getAcceptedFiles().length&&(document.getElementById("filecontainer").classList.add("empty"),$("#sbtmfiles").hide())},error:function(e,t){e.accepted||(this.removeFile(e),_$form=$(".fileform"),notifyElem=_$form.prev(),0!=notifyElem.length&&notifyElem.hasClass("notification")&&notifyElem.remove(),loadTemplate(_$form,miniTemplates.notification,{type:"error",title:t},"before"))}});$("#btn_sbtmfiles").data("complete",function(a){console.log(a),fn_hideModal(),uploadFile.onFinish=function(){},uploadFile.index=0,_fileDetails=e.getAcceptedFiles(),function t(i){if(i!=_fileDetails.length){currentFile=_fileDetails[i];var e=new FileReader;e.readAsDataURL(currentFile),e.onload=function(e){i!=_fileDetails.length&&(e.target.result,fext=currentFile.name.split("."),fext=fext[fext.length-1],uploadFile.onFinish=function(e){console.log("resp",e)},i==_fileDetails.length-1&&(uploadFile.onFinish=function(e){console.log("_end_fn",e),fn_sendDocument({moduleIndicator:a.module,typeDocument:a.document,schoolGrade:a.grade,schoolPeriod:a.period,folio:e.referenceNumber})}),uploadFile.index++,t(uploadFile.index))}}}(0)}),fn_showModal()},templates={conf:{path:"./views/modal/confirm_m.html",onload:fn_confirmModal},ufile:{path:"./views/modal/uploadfile.html",onload:fn_uploadfilemodal},notify:{path:"./views/modal/notifications.html",onload:fn_opennotification}};function loadTemplate(i,a,o,n){function e(e){var t=$(Mustache.to_html(e,o));i[n](t),"html"==n&&window.validateControl(i),void 0!==a.html&&(a.html=e),a.onload(t,o)}void 0===n&&(n="html"),a?o?void 0!==a.html?e(a.html):void 0!==a.path&&$.get(a.path,e):console.warn("loadTemplate: data is null ["+a+"]"):console.error("loadTemplate: template is undefined ["+i+"]")}var miniTemplates={success:{onload:fn_aceptModal,html:'<div class="title-gray">{{title}}</div><div class="step-container"><div class="icon-m icon-s"></div><div class="grid-c"><div class="grid-item"><div class="message-modal"><div>{{message}}</div></div></div></div><div class="actionsection"><div class="submtbtn"><span title="Enviar" aria-label="Enviar" class="btn__basic btn_acept"><span aria-hidden="true">Aceptar</span></span></div></div></div>'},error:{onload:fn_aceptModal,html:'<div class="title-gray">{{title}}</div><div class="step-container"><div class="icon-m icon-e"></div><div class="grid-c"><div class="grid-item"><div class="message-modal"><div>{{message}}</div></div></div></div><div class="actionsection"><div class="submtbtn"><span title="Enviar" aria-label="Enviar" class="btn__basic btn_acept"><span aria-hidden="true">Aceptar</span></span></div></div></div>'},notification:{onload:fn_closeNotification,html:'<div class="notification {{type}}" style="display: none;"><div class="wrapper"><div class="icon"><i class="bbva-icon"></i></div><div class="message"><div class="message__heading">{{title}}</div><span class="message__body">{{message}}</span></div><div class="close-button"><i class="bbva-icon ui-x"></i></div></div></div>'},filepreview:{html:'<div class="uploadfile animated fadeInLeft"><div class="wrapper"><div class="message"><div class="message__heading dz-filename"><span data-dz-name></span></div><span class="message__body"><span class="remove btn-delete-file"><i class="ui-trash"></i> Eliminar</span></span></div></div></div>'},visorProfile:{onload:function(){},html:'<div id="profile-view"><figure><img src="{{photo}}" alt=""></figure></div><div class="submtbtn"><span title="Continuar" aria-label="Continuar" class="help_section" id="btn_change_profile"><span aria-hidden="true" class="h_h1">Cambiar foto <i class="bbva-icon ui-camera"></i></span></span></div>'}};!function(n){n.fn.inputable=function(){return n(this).each(function(){t=this;var i=document.createElement("span"),e=document.createElement("div");if(!t.hasAttribute("required")){var a=document.createElement("span");n(a).addClass("is-optional"),t.parentElement.appendChild(a)}if(n(e).addClass("placeholder-wrapper"),t.parentElement.appendChild(e),i.appendChild(document.createTextNode(t.getAttribute("data-placeholder"))),n(i).addClass("placeholder-simulator"),e.appendChild(i),e.appendChild(t),e.appendChild(i),$t=n(t),ele_parent=$t.parents(".form-group"),0===ele_parent.find("span.text-message").length&&ele_parent.append("<p class='i-message'><span class='text-message'>&nbsp;</span></p>"),i.addEventListener("click",function(){n(this).siblings("input").focus()}),t.addEventListener("keyup",function(){if(t=n(this),0===t.val().length)t.removeClass("noempty"),t.removeClass("has-error");else{var e=t.siblings("small");n(e).remove(),n(t).removeError()}}),t.addEventListener("focus",function(){for(var e in _t={top:"5px",fontSize:"12px"},_t)i.style[e]=_t[e]}),t.addEventListener("blur",function(){if(t=n(this),0===t.val().length){for(var e in _t={top:"16px",fontSize:"15px"},_t)i.style[e]=_t[e];t.removeClass("noempty")}else t.removeClass("has-error"),n(t).addClass("noempty")}),0!==t.value.length){for(var o in _t={top:"5px",fontSize:"12px"},_t)i.style[o]=_t[o];n(t).addClass("noempty")}})},n.fn.showError=function(e){return this.each(function(){element=n(this),ele_parent=element.parents(".form-group"),ele_parent.addClass("hasError"),""!=e&&ele_parent.find("span.text-message").html("<i class='bbva-icon ui-warning'></i>"+e)})},n.fn.removeError=function(){return this.each(function(){element=n(this),ele_parent=element.parents(".form-group"),ele_parent.removeClass("hasError"),ele_parent.find("span.text-message").html('<i class="bbva-icon ui-empty"></i>&nbsp;')})},n.fn.clearInput=function(){return this.each(function(){element=n(this),element.removeError(),element.val(""),element.siblings(".placeholder-simulator").css({top:"16px","font-size":"15px"})})},n.fn.setValue=function(e){return this.each(function(){""!=e&&(element=n(this),element.val(e),element.siblings(".placeholder-simulator").css({top:"5px","font-size":"12px"}))})}}(jQuery),function(s){s.fn.comboSelect=function(e,t){return this.each(function(){var o=s(this);"function"==typeof t?o.data("selectCallback",t):"function"!=typeof o.data("selectCallback")&&o.data("selectCallback",function(){}),o.data("options",e),o.data("selected",null),o.find(".list-result").html(Mustache.to_html(s.fn.comboSelect.template,{items:e}));var n=o.find(".option-select");n.data("open",!1),n.removeAttr("open"),n.find("li").click(function(){var e=s(this),t=o.data("options");if(null==o.data("selected")||e.attr("data-id")!=o.data("selected").id)for(var i=0;i<t.length;i++){var a=t[i];if(a.id==e.attr("data-id")){o.data("selected",a),o.removeComboError(),o.find(".option-text").removeClass("center"),o.find(".selected-option").text(a.description),o.addClass("noempty"),s.fn.hideOptions(n),o.data("selectCallback")(a);break}}}),!0!==o.data("inicializate")&&(n.find(".select-title").click(function(){n.data("open")?s.fn.hideOptions(n):s.fn.showOptions(n)}),o.data("inicializate",!0),null==s(document).data("comboselectatached")&&(s(document).click(function(e){s(e.target).hasClass("sl")||($formOpened=s(".form-group-select .option-select[open]"),0!=$formOpened.length&&s.fn.hideOptions($formOpened))}),s(document).data("comboselectatached",!0)),void 0!==o.data("promess-select")&&(o.selectOptionId(o.data("promess-select")),o.data("promess-select",void 0)),void 0!==o.data("promess-selectdesc")&&(o.selectOptionDescription(o.data("promess-selectdesc")),o.data("promess-select",void 0)))})},s.fn.showOptions=function(e){e.hasClass("disabled")||(s.fn.hideOptions(s(".form-group-select .option-select[open]").not(e)),e.find("ul").slideDown(),e.data("open",!0),e.attr("open",""),e.find(".select-title .bbva-icon").css({transform:"rotate(180deg)"}))},s.fn.selectOptionId=function(e){context=this;var t=context.data("options");if(void 0!==t)for(var i=0;i<t.length;i++){var a=t[i];if(a.id==e){context.data("selected",a),context.removeComboError(),context.find(".option-text").removeClass("center"),context.find(".selected-option").text(a.description),context.data("selectCallback")(a);break}}else context.data("promess-select",e)},s.fn.selectOptionDescription=function(e){context=this;var t=context.data("options");if(void 0!==t)for(var i=0;i<t.length;i++){var a=t[i];if(a.description==e){context.data("selected",a),context.removeComboError(),context.find(".option-text").removeClass("center"),context.find(".selected-option").text(a.description),context.data("selectCallback")(a);break}}else context.data("promess-selectdesc",e)},s.fn.hideOptions=function(e){e.find("ul").slideUp(),_context=e.closest(".form-group-select"),_context.hasClass("required")&&null==_context.getOptionSelected()&&_context.showComboError(),e.data("open",!1),e.removeAttr("open"),e.find(".select-title .bbva-icon").css({transform:"rotate(0deg)"})},s.fn.getOptionSelected=function(){return this.data("selected")||null},s.fn.onSelect=function(e){"function"==typeof e&&this.data("selectCallback",e)},s.fn.reset=function(){return this.find(".option-text").addClass("center"),this.find(".selected-option").text(""),this.find(".option-select").removeClass("disabled"),this.removeComboError(),this.removeClass("noempty"),this.data("selected",null),this},s.fn.showComboError=function(e){return this.each(function(){s(this).addClass("hasError"),e=e||"Selecciona una opción",s(this).find("span.text-message").html('<i class="bbva-icon ui-warning"></i>'+e)})},s.fn.removeComboError=function(){return this.each(function(){s(this).removeClass("hasError"),s(this).find("span.text-message").html("&nbsp;")})},s.fn.comboSelect.template='<ul style="display:none">{{#items}}<li data-id="{{id}}">{{description}}</li>{{/items}}</ul>'}(jQuery);var day=[{id:"01",description:"01"},{id:"02",description:"02"},{id:"03",description:"03"},{id:"04",description:"04"},{id:"05",description:"05"},{id:"06",description:"06"},{id:"07",description:"07"},{id:"08",description:"08"},{id:"09",description:"09"},{id:"10",description:"10"},{id:"11",description:"11"},{id:"12",description:"12"},{id:"13",description:"13"},{id:"14",description:"14"},{id:"15",description:"15"},{id:"16",description:"16"},{id:"17",description:"17"},{id:"18",description:"18"},{id:"19",description:"19"},{id:"20",description:"20"},{id:"21",description:"21"},{id:"22",description:"22"},{id:"23",description:"23"},{id:"24",description:"24"},{id:"25",description:"25"},{id:"26",description:"26"},{id:"27",description:"27"},{id:"28",description:"28"},{id:"29",description:"29"},{id:"30",description:"30"},{id:"31",description:"31"}],month=[{id:"01",description:"Ene",monthcomplete:"ENERO"},{id:"02",description:"Feb",monthcomplete:"FEBRERO"},{id:"03",description:"Mar",monthcomplete:"MARZO"},{id:"04",description:"Abr",monthcomplete:"ABRIL"},{id:"05",description:"May",monthcomplete:"MAYO"},{id:"06",description:"Jun",monthcomplete:"JUNIO"},{id:"07",description:"Jul",monthcomplete:"JULIO"},{id:"08",description:"Ago",monthcomplete:"AGOSTO"},{id:"09",description:"Sep",monthcomplete:"SEPTIEMBRE"},{id:"10",description:"Oct",monthcomplete:"OCTUBRE"},{id:"11",description:"Nov",monthcomplete:"NOVIEMBRE"},{id:"12",description:"Dic",monthcomplete:"DICIEMBRE"}];!function(t){t.fn.radiobutton=function(e){return this.each(function(){$rad=t(this),null==$rad.data("resetCallback")&&$rad.data("resetCallback",function(){}),null!=e&&$rad.data("checkedCallback",e),$button=$rad.find(".radio"),$rad.append("<p class='i-message'><span class='text-message'>&nbsp;</span></p>"),$button.click(function(){t(this).parents(".radio-buttons").hasClass("disabled")||t.fn.selectRadio(t(this))})})},t.fn.getButtonSelected=function(){return{id:t(this).attr("data-selectedid"),description:t(this).attr("data-selected")}},t.fn.onChecked=function(e){return"function"==typeof e&&this.data("checkedCallback",e),this},t.fn.onRadioReset=function(e){return"function"==typeof e&&this.data("resetCallback",e),this},t.fn.clearRadio=function(){return this.removeRadioError(),this.find(".radio.checked").removeClass("checked"),this.removeAttr("data-selectedid"),this.removeAttr("data-selected"),this.data("resetCallback")(),this},t.fn.showRadioError=function(e){return t(this).addClass("hasError"),t(this).find("span.text-message").html('<i class="hasError bbva-icon ui-warning"></i>'+e),this},t.fn.removeRadioError=function(){return t(this).removeClass("hasError"),t(this).find("span.text-message").html("&nbsp;"),this},t.fn.selectRadioId=function(e){return t.fn.selectRadio(t(this).find("[data-id='"+e+"']")),this},t.fn.selectRadio=function(e){if(!e.hasClass("checked")){$rad_p=e.closest(".radio-section"),$buttons=$rad_p.find(".radio"),$buttons.removeClass("checked"),e.addClass("checked");var t={id:e.attr("data-id"),description:e.closest(".radio-button").find(".radio-label").text()};$rad_p.attr("data-selectedid",t.id),$rad_p.attr("data-selected",t.description),$rad_p.removeRadioError(),null!=$rad_p.data("checkedCallback")&&$rad_p.data("checkedCallback")(t)}return this}}(jQuery),function(i){i.fn.checkeable=function(e,t){return this.each(function(){"function"!=typeof e&&(e=function(){}),"function"!=typeof t&&(t=function(){}),i(this).data("checkcallback",e),i(this).data("uncheckcallback",t),i(this).click(function(){i(this).hasClass("disabled")||(i(this).hasClass("checked")?(i(this).removeClass("checked"),i(this).data("uncheckcallback")(i(this))):(i(this).removeCheckboxError(),i(this).addClass("checked"),i(this).data("checkcallback")(i(this))))})})},i.fn.isChecked=function(){return i(this).hasClass("checked")},i.fn.doCheck=function(){return this.each(function(){i(this).addClass("checked"),i(this).data("checkcallback")(i(this))})},i.fn.unCheck=function(){return this.each(function(){i(this).removeClass("checked")})},i.fn.showCheckBoxError=function(){i(this).addClass("error")},i.fn.removeCheckboxError=function(){i(this).removeClass("error")},i.fn.ckeckCallback=function(e,t){return this.each(function(){"function"!=typeof e&&(e=function(){}),"function"!=typeof t&&(t=function(){}),i(this).data("checkcallback",e),i(this).data("uncheckcallback",t)})}}(jQuery),function(n){n.fn.applyList=function(o,e){o.find(".list-result").html(Mustache.to_html(n.fn.searchList.templates[o.attr("data-template")],e)),o.find(".list-result")[0].scrollTo(0,0),o.find(".result-item").click(function(e){o.find(".result-item").not(this).removeClass("selected");for(var t=o.data("items"),i=0;i<t.items.length;i++){var a=t.items[i];if(a[t.filterid]==n(this).attr("data-id")){o.data("selected",a),o.find(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;"),o.find("input[name='filter']").val(a[t.filtertext]).removeError(),o.find(".list-result").slideUp(),o.data("selectCallback")(a);break}}n(this).addClass("selected")})},n.fn.searchList=function(e,a){return this.each(function(){var t=n(this);"function"==typeof a?t.data("selectCallback",a):"function"!=typeof t.data("selectCallback")&&t.data("selectCallback",function(){}),t.data("items",e),t.data("selected",null),n.fn.applyList(t,e);var i=t.find("input[name='filter']");i.clearInput(),t.find(".list-result").slideDown(),null==t.data("search-atached")&&(i.focus(function(e){e.preventDefault(),t.find(".list-result").slideDown(),n.fn.filterList(t,n(this).val())}),i.blur(function(e){null!=t.data("selected")&&(t.find(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;"),t.find("input[name='filter']").val(t.data("selected")[t.data("items").filtertext]).removeError(),t.find(".list-result").slideUp())}),i.keyup(function(e){n.fn.filterList(t,i.val())})),t.data("search-atached",!0),void 0!==t.data("promess-select")&&(t.selectFromList(t.data("promess-select")),t.data("promess-select",void 0))})},n.fn.selectFromList=function(a){return this.each(function(){var e=n(this);if(_allitems=e.data("items"),"undefined"!=typeof _allitems)for(var t=0;t<_allitems.items.length;t++){var i=_allitems.items[t];if(i[_allitems.filterid]==a){e.data("selected",i),e.find(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;"),e.find("input[name='filter']").val(i[_allitems.filtertext]).removeError(),e.find(".list-result").slideUp(),e.data("selectCallback")(i);break}}else e.data("promess-select",a)})},n.fn.unselect=function(){return this.each(function(){var e=n(this);e.data("selected",null),e.find("input[name='filter']").clearInput()})},n.fn.filterList=function(e,t){var i={items:[]},a=new RegExp(n.fn.escapeRegExp(n.fn.removeAcute(t)),"i"),o=e.data("items");i.items=n.map(o.items,function(e){if(a.test(n.fn.removeAcute(e[o.filtertext])))return e}),n.fn.applyList(e,i)},n.fn.getSelected=function(){return(context=this).data("selected")||null},n.fn.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},n.fn.removeAcute=function(e){for(var t=[{i:"á",o:"a"},{i:"é",o:"e"},{i:"í",o:"i"},{i:"ó",o:"o"},{i:"ú",o:"u"}],i=e.toLowerCase(),a=0;a<t.length;a++){var o=t[a];i=i.replace(o.i,o.o)}return i},n.fn.searchList.templates={simple:'{{#items}}<div class="result-item" data-id="{{description}}"><div class="item-title"><i class="bbva-icon bbva-icon__2_027_place"></i>{{description}}</div></div>{{/items}}',fulldetail:'{{#items}}<div class="result-item" data-id="{{keyWorkplace}}"><div class="item-title"><i class="bbva-icon bbva-icon__5_002_build"></i>{{schoolOficialName}}</div><div class="item-details"><p><span class="tagname">Tipo:</span> {{schoolAcronym}}</p><p><span class="tagname">CCT:</span> {{keyWorkplace}}</p><p><span class="tagname">Dirección:</span> {{schoolAddress}}</p><p><span class="tagname">Localidad:</span></i> {{location}}</p></div></div>{{/items}}'}}(jQuery);var expRegs={CURP:{regEx:/^[A-Z]{1}[AEIOUX]{1}[A-Z]{2}[0-9]{2}(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])[HM]{1}(AS|BC|BS|CC|CS|CH|CL|CM|DF|DG|GT|GR|HG|JC|MC|MN|MS|NT|NL|OC|PL|QT|QR|SP|SL|SR|TC|TS|TL|VZ|YN|ZS|NE)[B-DF-HJ-NP-TV-Z]{3}[0-9A-Z]{1}[0-9]{1}$/,error:"Ingresa una CURP válida"},EMAIL:{regEx:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/,error:"Ingresa un email válido"},ZIPCODE:{regEx:/^\d{5}/,error:"Por favor ingresa un código postal válido"}},formvalidations=[{selector:"input.form-control,textarea.form-control",invalid:function(e){return e.prop("required")&&(""==e.val().trim()||e.parents(".form-group").hasClass("hasError"))},saveValue:function(e,t){_id=e.attr("id"),t[_id]=void 0!==e.inputmask?e.inputmask("unmaskedvalue"):e.val()},resetValue:function(e){e.clearInput()},showError:function(e){e.parents(".form-group").hasClass("hasError")||e.showError("Campo obligatorio")}},{selector:".form-group-select",invalid:function(e){return e.hasClass("required")&&null==e.getOptionSelected()},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.getOptionSelected()},resetValue:function(e){e.reset()},showError:function(e){e.showComboError("Selecciona una opción")}},{selector:".radio-section",invalid:function(e){return e.hasClass("required")&&null==e.getButtonSelected().id},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.getButtonSelected()},resetValue:function(e){e.clearRadio()},showError:function(e){e.showRadioError("Selecciona una opción")}},{selector:".checkbox",invalid:function(e){return e.hasClass("required")&&!e.isChecked()},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.isChecked()},resetValue:function(e){e.unCheck()},showError:function(e){e.showCheckBoxError("")}},{selector:".list-filter-result",invalid:function(e){return!1},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.getSelected()},resetValue:function(e){e.unselect()},showError:function(e){}}];function hasAttr(e,t){var i=e.attr(t);return void 0!==i&&!1!==i}!function(e,t){t.validateControl=function(e){e.find(".openuploadfile").click(function(){loadTemplate($("#modal_generic .body"),templates.ufile,{})}),e.find("input[type='text']").inputable(),e.find("textarea").inputable(),e.find(".radio-section").radiobutton(),e.find(".uppercase").keyup(function(e){$(this).val($(this).val().replace(/á/gi,"A").replace(/é/gi,"E").replace(/í/gi,"I").replace(/ó/gi,"O").replace(/ú/gi,"U").toUpperCase())}),e.find(".letters").keypress(function(e){return 97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90||0==e.charCode||32==e.charCode||45==e.charCode||46==e.charCode||209==e.charCode||241==e.charCode||225==e.charCode||233==e.charCode||237==e.charCode||243==e.charCode||250==e.charCode||193==e.charCode||201==e.charCode||205==e.charCode||211==e.charCode||218==e.charCode||220==e.charCode||252==e.charCode}),e.find(".alphanumeric").keypress(function(e){return 97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90||48<=e.charCode&&e.charCode<=57||0==e.charCode||32==e.charCode}),e.find(".letnum").keypress(function(e){return 97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90||0==e.charCode||32==e.charCode||45==e.charCode||46==e.charCode||209==e.charCode||241==e.charCode||225==e.charCode||233==e.charCode||237==e.charCode||243==e.charCode||250==e.charCode||193==e.charCode||201==e.charCode||205==e.charCode||211==e.charCode||218==e.charCode||220==e.charCode||252==e.charCode||48<=e.charCode&&e.charCode<=57}),e.find(".decimals").keypress(function(e){return 48<=e.charCode&&e.charCode<=57||46==e.charCode}),e.find(".numbers").keypress(function(e){return 48<=e.charCode&&e.charCode<=57}),e.find(".numg").keypress(function(e){return 48<=e.charCode&&e.charCode<=57||45==e.charCode||97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90}),e.find("input[data-regex]").not("input[data-confirm]").blur(function(){_$this=$(this),_regex=$(this).attr("data-regex"),_thisval=$(this).val(),""==_thisval||expRegs[_regex].regEx.test(_thisval)?_$this.removeError():_$this.showError(expRegs[_regex].error)}),e.find("input[required]").attr("data-required",!0),e.find("input[data-confirm]").each(function(){confirm_element=$(this),main_element=$(confirm_element.attr("data-confirm")),main_element.keyup(function(){$confirm_element=$('[data-confirm="#'+$(this).attr("id")+'"]'),""!=$(this).val()?(hasAttr($(this),"data-required")||$(this).attr("required","required"),hasAttr($confirm_element,"data-required")||($confirm_element.parents(".grid-item").slideDown(),$confirm_element.attr("required",!0))):hasAttr($confirm_element,"data-required")||($confirm_element.parents(".grid-item").slideUp(),$confirm_element.removeAttr("required"),$confirm_element.val(""),$confirm_element.removeError())}),confirm_element.add(main_element).blur(function(){var e,t;t=hasAttr($(this),"data-confirm")?(e=$(this),$(e.attr("data-confirm"))):(e=$('[data-confirm="#'+$(this).attr("id")+'"]'),$(this)),""!=e.val()&&e.val()!=t.val()?(e.showError("Los correos no coinciden"),t.showError("")):""!=t.val()||hasAttr(t,"data-required")?""!=e.val()&&e.val()==t.val()&&(e.removeError(),t.removeError(),expRegs.EMAIL.regEx.test(t.val())||(t.showError(expRegs.EMAIL.error),e.showError(expRegs.EMAIL.error))):(t.removeAttr("required"),t.removeError(),e.removeError(),e.removeAttr("required"))})}),e.find("input.phonenumber").inputmask({mask:"(999) 999-9999",showMaskOnHover:!1}).blur(function(){_phonen=$(this).inputmask("unmaskedvalue").length,0<_phonen&&_phonen<10&&$(this).showError("Ingresa el número completo")}),e.find("input.no-repeat").each(function(){$(this).keyup(function(){var e=$(".no-repeat"),i="",t="",a=$().add($(this)),o=0;$.each(e,function(e,t){i=$().add(t),a.is(i)||a.val()===i.val()&&(a.showError("No se permite número telefónico repetido"),a.addClass("repeated"))});for(var n=0;n<e.length;n++){i=$().add(e[n]);for(var s=o=0;s<e.length;s++)t=$().add(e[s]),i.is(t)||i.hasClass("repeated")&&i.val()!==t.val()&&o++;2===o&&(i.removeError(),i.removeClass("repeated"))}})}),e.find("input.mxnamount").focus(function(){$(this).inputmask("currency",{rightAlign:!1,autoUnmask:!0,allowPlus:!1,allowMinus:!1,integerDigits:"13"})}).blur(function(){$(this).inputmask&&0==$(this).inputmask("unmaskedvalue").length&&$(this).inputmask("remove")}),e.find(".lastnameb").each(function(){$(this).keyup(function(){var e=$().add($(this)),t=e.closest(".grid-container").find('[data-targetdisable="#'+e.attr("id")+'"]');t.addClass("disabled");var i=e.closest(".grid-container").find('[data-targettoggle="#'+t.attr("id")+'"]');""!==e.val()||i.hasClass("checked")||t.removeClass("disabled")})}),e.find("form").each(function(){$form=$(this),$form.find("input.form-control").each(function(){$formelement=this,$formelement.addEventListener("blur",function(){$(this).val($(this).val().trim()),this.required&&0==$(this).val().length&&$(this).showError($(this).attr("data-emptymessage")||"Campo obligatorio")})}),$form.find(".form-group-select").each(function(){$formcombo=$(this),$formcombo.find(".option-select").append("<p class='i-message'><span class='text-message'>&nbsp;</span></p>")}),$form.find(".checkbox").checkeable(),$form.find(".checkbox[data-targettoggle]").each(function(){$(this).ckeckCallback(function(){$($(this).attr("data-targetdisable")).clearInput().prop("disabled",!0).prop("required",!1),$($(this).attr("data-targettoggle")).unCheck().addClass("disabled").data("uncheck",!0),$($(this).attr("data-targetdisable")).setValue("XXXXX")}.bind(this),function(){$($(this).attr("data-targetdisable")).clearInput().prop("disabled",!1).prop("required",!0),""===$($($(this).attr("data-targettoggle")).attr("data-targetdisable")).val()&&$($(this).attr("data-targettoggle")).removeClass("disabled").data("uncheck",!1)}.bind(this))}),$form.find(".e-tooltip-f").each(function(){$etooltip=$(this),new Tooltip($etooltip,{placement:"bottom",trigger:"focus",html:!0,title:$etooltip.attr("data-tooltitle")})}),$form.find(".e-tooltip").each(function(){$etooltip=$(this),new Tooltip($etooltip,{placement:"bottom",html:!0,title:$etooltip.attr("data-tooltitle")})}),$form.find("textarea.form-control").each(function(){$formelement=this,$formelement.addEventListener("blur",function(){$(this).val($(this).val().trim()),this.required&&0==$(this).val().length&&$(this).showError($(this).attr("data-emptymessage")||"Campo obligatorio")})}),$form.find(".btn__submit").click(function(){$(this).hasClass("btn__disabled")||(_$form=$(this).closest("form"),allDataForm=function(e){var t={isValid:!0};for(var i in _$form=$(e).closest("form"),formvalidations)_$form.find(formvalidations[i].selector).each(function(){formvalidations[i].saveValue($(this),t),formvalidations[i].invalid($(this))&&(t.isValid=!1,formvalidations[i].showError($(this)))});return t}(this),formValidations="function"!=typeof _$form.data("validations")||_$form.data("validations")(allDataForm),!_$form.hasClass("notify-on-error")||allDataForm.isValid&&formValidations?(0!=_$form.prev().length&&_$form.prev().hasClass("notification")&&_$form.prev().remove(),"function"==typeof $(this).data("complete")&&$(this).data("complete")(allDataForm)):(_$form.parents(".modal").length?(notifyElem=_$form.find(".actionsection:last").prev(),0!=notifyElem.length&&notifyElem.hasClass("notification")&&notifyElem.remove(),loadTemplate(_$form.find(".actionsection:last"),miniTemplates.notification,{type:"error",title:"Datos obligatorios incompletos",message:"Por favor ingresa todos campos obligatorios"},"before")):(_scrollTo=hasAttr(_$form,"data-notify")?_$form.attr("data-notify"):"Edge"==BrowserDetect.browser?"body":"html",$(_scrollTo).animate({scrollTop:_$form.offset().top-100},2e3,"swing",function(){notifyElem=_$form.prev(),0!=notifyElem.length&&notifyElem.hasClass("notification")&&notifyElem.remove(),loadTemplate(_$form,miniTemplates.notification,{type:"error",title:"Datos obligatorios incompletos",message:"Por favor ingresa todos campos obligatorios"},"before")})),hasAttr(_$form,"data-status")&&($(_$form.attr("data-status")).removeClass("complete"),$(_$form.attr("data-status")).addClass("incomplete"),$(_$form.attr("data-status")).html('<i class="bbva-icon ui-warning"></i>Incompleto'))))})})},t.validateControl(e),t.fillForm=function(i,e){$.each(e,function(e,t){$3l=i.find("#"+e),$3l.is("input")||$3l.is("textarea")?($3l.clearInput(),$3l.setValue(t)):$3l.hasClass("form-group-select")?($3l.reset(),null!=t&&$3l.selectOptionId("object"==typeof t?t.id:t)):$3l.hasClass("radio-section")?($3l.clearRadio(),$3l.selectRadioId("object"==typeof t?t.id:t)):$3l.hasClass("list-filter-result")?($3l.unselect(),$3l.selectFromList(t)):$3l.hasClass("checkbox")?($3l.unCheck(),t&&$3l.doCheck()):console.log("fillForm: Element "+e+" doesn't exists in form",i)})},t.resetForm=function(e){for(var t in formvalidations)e.find(formvalidations[t].selector).each(function(){formvalidations[t].resetValue($(this))})}}($(document),window);var __={get:function(e,t,i){var a=null==e?void 0:function(e,t){for(var i=t.split("."),a=0;a<i.length;a++){if(wasArray={flag:!1,value:0},-1!=i[a].indexOf("[")&&(wasArray.flag=!0,wasArray.value=i[a].substring(i[a].indexOf("[")+1,i[a].indexOf("]")),i[a]=i[a].split("[")[0]),!e||!e.hasOwnProperty(i[a]))return;e=wasArray.flag?e[i[a]][wasArray.value]:e[i[a]]}return"string"==typeof e?e.trim():e}(e,t);return void 0===a?i:a}};$("#btn-exit").click(function(){logout()});var toggleModule=function(e){if(!e.hasClass("animated"))if($content=$("#"+e.attr("data-target")),e.addClass("animated"),e.hasClass("is-open"))e.removeClass("is-open"),$content.slideUp(400,function(){e.removeClass("animated")});else{for(var t=0;t<$(".accordion .step-header").length;t++)element=$(".accordion .step-header")[t],$(element).hasClass("is-open")&&$(element).attr("data-target")!=e.attr("data-target")&&($idTemp=$("#"+$(element).attr("data-target")),$idTemp.slideUp());$(".accordion .step-header").not("data-target",e.attr("data-target")).removeClass("is-open"),e.addClass("is-open"),$content.slideDown(400,function(){e.removeClass("animated")})}};$(".accordion .step-header").click(function(e){hasAttr($(this),"data-catalog")&&"false"==$(this).attr("data-loaded")?(_lcatalog=$(this).attr("data-catalog"),fn_verifyCatalogs(loadModule.moduleCatalog[_lcatalog].list(),loadModule.moduleCatalog[_lcatalog].callback)):toggleModule($(this))}),$("#email, #email2, #email3").blur(function(){""!=$("#email").val()&&$("#email").val()==$("#email2").val()&&$("#email2").showError("No se permiten correos duplicados"),""!=$("#email2").val()&&$("#email2").val()==$("#email3").val()&&$("#email3").showError("No se permiten correos duplicados"),""!=$("#email").val()&&$("#email").val()==$("#email3").val()&&$("#email3").showError("No se permiten correos duplicados")}),$("#dbirthdate").comboSelect(day),$("#mbirthdate").comboSelect(month);var fnFillCatalogs=function(e,t,i){t=t||[],$("#"+e).comboSelect(t,i)};function saveglobal(){restExec({service:"UPDATE_ANNOUNCEMENT",data:{scholarshipProgram:{id:moduleInitData.announcement.scholarshipProgram.id},scholar:{Id:ivUser}},showWait:!0,success:rest_fnUpdateScholarshipAnnouncementStatus})}function changeStatusSel(e,t,i){_title=t||"Datos guardados",_message=i||"Tus datos se han almacenado correctamente, gracias",$elstatus=e.siblings(".step-header").find(".step-status"),e.siblings(".step-header").removeClass("is-open"),e.slideUp(),loadTemplate($("#modal_generic .body"),miniTemplates.success,{title:_title,message:_message})}function changeModuleSatus(e,t){$elstatus=e.siblings(".step-header").find(".step-status"),"complete"==t?($elstatus.removeClass("incomplete"),$elstatus.addClass("complete"),$elstatus.html('<i class="bbva-icon ui-checkmark-filled"></i>Completo')):($elstatus.removeClass("complete"),$elstatus.addClass("incomplete"),$elstatus.html('<i class="bbva-icon ui-warning"></i>Incompleto'))}function vali_date(e){var t=e[0]+e[1],i=new Date(e);return parseInt(t)==parseInt(i.getMonth()+1)}$("#dsclass").comboSelect(day),$("#msclass").comboSelect(month),$("#btn_savegd").data("complete",function(e){console.log("_data",e),loadTemplate($("#modal_generic .body"),miniTemplates.success,{title:"¡Gracias!",message:"Tus datos se gurdaron correctamente ."})}),$("#btn_savesd").data("complete",function(e){console.log("_data",e),loadTemplate($("#modal_generic .body"),miniTemplates.error,{title:"¡Error!",message:"Ocurrió un error al guardar tus datos."})}),$("#btn_savefin").data("complete",function(e){console.log("_data",e),console.log("_data",e),loadTemplate($("#modal_generic .body"),miniTemplates.success,{title:"¡Gracias!",message:"Tus datos se guardaron correctamente."})}),$(".modal .icon-close").click(function(){$(this).parents(".modal").removeAttr("open"),callbackCloseModal()}),$(".o_two").comboSelect(function(){_arr_0_2=[];for(var e=0;e<2;e++)_arr_0_2.push({id:""+e,description:""+e});return _arr_0_2.push({id:"2",description:"2 o más"}),_arr_0_2}()),$(".r-options").onChecked(),$("#dbirthdate").onSelect(function(){fbdate||(vali_date($("#mbirthdate").getOptionSelected().id+"/"+$("#dbirthdate").getOptionSelected().description+"/"+$("#ybirthdate").val())?(fbdate=!0,$("#mbirthdate").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#mbirthdate").onSelect(function(){fbdate||(vali_date($("#mbirthdate").getOptionSelected().id+"/"+$("#dbirthdate").getOptionSelected().description+"/"+$("#ybirthdate").val())?(fbdate=!0,$("#dbirthdate").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#dsclass").onSelect(function(){fcdate||(vali_date($("#msclass").getOptionSelected().id+"/"+$("#dsclass").getOptionSelected().description+"/"+$("#ysclass").val())?(fcdate=!0,$("#msclass").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#msclass").onSelect(function(){fcdate||(vali_date($("#msclass").getOptionSelected().id+"/"+$("#dsclass").getOptionSelected().description+"/"+$("#ysclass").val())?(fcdate=!0,$("#dsclass").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#btn_save_all").click(function(){alert("salvar todo")});var loadModule={getCatalog:function(t,e){null==catalogs[t]||0==catalogs[t].length?restExec({service:"LIST_CATALOGS",type:"GET",async:!0,showWait:!0,hasUrlParam:!0,urlParam:{catalog:t},data:{},finallyError:function(){e()},finallySuccess:[function(e){rest_fnGetSchoolCatalog(t,e)},e]}):e(catalogs[t])},moduleCatalog:{general:{list:function(){return["CAT_BANK","CAT_CREDITMORTGAGE","CAT_CREDITCOMMERCIAL","CAT_GRAVAMEN"]},callback:function(){fnFillCatalogs("sec1generatingbank",__.get(catalogs,"CAT_BANK",[]),function(e){}),fnFillCatalogs("sec1mortgagecredittype",__.get(catalogs,"CAT_CREDITMORTGAGE",[]),function(e){}),fnFillCatalogs("sec1commercialcredit",__.get(catalogs,"CAT_CREDITCOMMERCIAL",[]),function(e){}),fnFillCatalogs("sec1gravamen",__.get(catalogs,"CAT_GRAVAMEN",[]),function(e){}),$('[data-target="general-data"]').attr("data-loaded","true"),void 0!==moduleInitData.general&&rest_fnGetGeneralData(moduleInitData.general),toggleModule($('[data-target="general-data"]'))}},notarydata:{list:function(){return["CAT_TYPEPROPERTY","CAT_NOTARY","NOTARY_DATA","CAT_STATE"]},callback:function(){fnFillCatalogs("sec2typepropertie",__.get(catalogs,"CAT_TYPEPROPERTY",[])),fnFillCatalogs("sec2notarysquare",__.get(catalogs,"CAT_NOTARY",[]),function(e){}),fnFillCatalogs("sec2notarynumber",__.get(catalogs,"NOTARY_DATA",[]),function(e){}),fnFillCatalogs("sec2state",__.get(catalogs,"CAT_STATE",[])),fnFillCatalogs("sec2municipality",__.get(catalogs,"CAT_STATE",[])),$('[data-target="schoolar-data"]').attr("data-loaded","true"),void 0!==moduleInitData.notarydata&&rest_fnGetScholarInf(moduleInitData.notarydata),toggleModule($('[data-target="schoolar-data"]'))}},dataInmueble:{list:function(){return["CAT_TYPEPROPERTY","CAT_SUBTYPEPROPERTY","CAT_STATE"]},callback:function(){fnFillCatalogs("sec2typepropertie",__.get(catalogs,"CAT_TYPEPROPERTY",[])),fnFillCatalogs("subtypeproperty",__.get(catalogs,"CAT_SUBTYPEPROPERTY",[])),fnFillCatalogs("propertystate",__.get(catalogs,"CAT_STATE",[])),fnFillCatalogs("sec3state",__.get(catalogs,"CAT_STATE",[]),function(e){var t=$("#municipalities").find(".disabled").removeClass("disabled");fnFillCatalogs("municipalities",__.get(catalogs,"CAT_STATE",[])),console.log("otraClaseElems",t)}),$('[data-target="inmueble-data"]').attr("data-loaded","true"),void 0!==moduleInitData.dataInmueble&&rest_fnGetHomeServices(moduleInitData.dataInmueble),toggleModule($('[data-target="inmueble-data"]'))}}},checkStatus:function(){setTimeout(function(){0==$(".step-header .step-status.incomplete").length&&"0"==__.get(moduleInitData,"announcement.globalStatus","0")?$(".submtbtn.send").removeAttr("style"):$(".submtbtn.send").attr("style","display: none")},450)},ensureFun:function(e){return"function"==typeof e?e:rest_fnNothig},getStates:function(e){null==stateTransactions||0==stateTransactions.length?restExec({showWait:!0,service:"GET_STATES",type:"POST",data:{},asyn:!1,finallySuccess:[function(e){rest_fnGetStates(e)},e],finallyError:[function(e){rest_fnGetStates(e)},e]}):e(stateTransactions)},getMunicipalities:function(t,e){null==municipalityTransactions[t]||0==municipalityTransactions[t].length?restExec({showWait:!0,service:"GET_MUNICIPALITY",type:"POST",asyn:!1,data:{state:t},finallySuccess:[function(e){rest_fnGetMunicipalities(t,e)},e],finallyError:[function(e){rest_fnGetMunicipalities(t,e)},e]}):e(municipalityTransactions[t])}},loadMainModules=function(){alert("loadMainModules")},loadNextModules=function(e){"function"!=typeof e&&(e=loadModule.checkStatus)};Object.keys(templates).forEach(function(t){$.get(templates[t].path,function(e){templates[t].html=e})});var fn_opennotification=function(){fn_showModal()};$("#currentYear").text((new Date).getFullYear());fn_opennotification=function(){fn_showModal()};