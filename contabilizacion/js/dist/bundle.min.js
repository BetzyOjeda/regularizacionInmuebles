!function(){var a,r={},o=[],s={cct:["11AAA1111A","11BBB1111B","11CCC1111C"],isDommy:function(e){_isD=!1;for(var t=0;t<s.cct.length;t++)if(e==s.cct[t]){_isD=!0;break}return _isD},getDommyCCT:function(){return _programID=u.announcement.scholarshipProgram.id,"1"==_programID?s.cct[0]:"2"==_programID?s.cct[1]:"7"==_programID?s.cct[2]:""},getDommyDescription:function(){switch(_descSt="",u.announcement.scholarshipProgram.id){case"1":_descSt="PENDIENTE SECUNDARIA";break;case"2":_descSt="PENDIENTE BACHILLERATO";break;case"7":_descSt="PENDIENTE UNIVERSIDAD"}return _descSt}},n={},l=!0,e=!0,c={fromhome:{total:0,members:[],index:function(){return c.fromhome.getTotal()+1},getTotal:function(){for(_t=0,_p=0;_p<c.fromhome.members.length;_p++)_fam0=c.fromhome.members[_p],"Delete"!=_fam0.statusRelated&&_t++;return _t},getMembers:function(){for(_tMem=[],_p=0;_p<c.fromhome.members.length;_p++)_fam0=c.fromhome.members[_p],"Delete"!=_fam0.statusRelated&&_tMem.push(_fam0);return _tMem}},awayfromhome:{total:0,members:[],index:function(){return c.awayfromhome.getTotal()+1},getTotal:function(){for(_t=0,_p=0;_p<c.awayfromhome.members.length;_p++)_fam0=c.awayfromhome.members[_p],"Delete"!=_fam0.statusRelated&&_t++;return _t},getMembers:function(){for(_tMem=[],_p=0;_p<c.awayfromhome.members.length;_p++)_fam0=c.awayfromhome.members[_p],"Delete"!=_fam0.statusRelated&&_tMem.push(_fam0);return _tMem}},bbva:{member:{}},unregistered:!0},m=!1,d={1:"becas_aguascalientes.mx@bbva.com",2:"becas_bc.mx@bbva.com",3:"becas_bcs.mx@bbva.com",4:"becas_campeche.mx@bbva.com",5:"becas_coahuila.mx@bbva.com",6:"becas_colima.mx@bbva.com",7:"becas_chiapas.mx@bbva.com",8:"becas_chihuahua.mx@bbva.com",9:"becas_cdmx.mx@bbva.com",10:"becas_durango.mx@bbva.com",11:"becas_guanajuato.mx@bbva.com",12:"becas_guerrero.mx@bbva.com",13:"becas_hidalgo.mx@bbva.com",14:"becas_jalisco.mx@bbva.com",15:"becas_edomex.mx@bbva.com",16:"becas_michoacan.mx@bbva.com",17:"becas_morelos.mx@bbva.com",18:"becas_nayarit.mx@bbva.com",19:"becas_nuevol.mx@bbva.com",20:"becas_oaxaca.mx@bbva.com",21:"becas_puebla.mx@bbva.com",22:"becas_queretaro.mx@bbva.com",23:"becas_quintanaroo.mx@bbva.com",24:"becas_slp.mx@bbva.com",25:"becas_sinaloa.mx@bbva.com",26:"becas_sonora.mx@bbva.com",27:"becas_tabasco.mx@bbva.com",28:"becas_tamaulipas.mx@bbva.com",29:"becas_tlaxcala.mx@bbva.com",30:"becas_veracruz.mx@bbva.com",31:"becas_yucatan.mx@bbva.com",32:"becas_zacatecas.mx@bbva.com"},p=[{id:"0",description:"Hombre"},{id:"1",description:"Mujer"}],f=[],h={},u={},b={phone:"",email:""};function _(){var e=window.location.origin;-1==e.indexOf("localhost")&&(-1!=e.indexOf("150.250.238.172")?window.location=e+"/mgbfprv_des_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("150.250.238.173")?window.location=e+"/mgbfprv_test_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("becasfmxt.mex.igrupobbva")?window.location=e+"/mgbfprv_test_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("calplataformabecas.fundacionbbvabancomer.com.mx")?window.location=e+"/mgbfprv_qa_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("plataformabecaslo.fundacionbbvabancomer.org")?window.location=e+"/mgbfprv_lo_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("plataformabecas.fundacionbbvabancomer.org")?window.location=e+"/mgbfprv_pr_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/":-1!=e.indexOf("plataformabecas.fundacionbbva.mx")&&(window.location=e+"/mgbfprv_pr_mx_web/mgbf_mult_web_fundacionbancomerextranetwebfront_01/"))}console.log("%cRealizar alguna modificación en esta sección puede provocar la pérdida de tu información\n","color:#a90c0c;font-size:22px;"),-1!=window.location.origin.indexOf("localhost")||(window.oldconsole={},window.oldconsole.log=console.log,console.log=function(){},window.console.log=console.log);var g,v,y=function(e){e?ne($("#modal_generic .body"),me.success,{title:e,message:"",onAccept:function(){location.reload()}}):ne($("#modal_generic .body"),me.error,{title:"Error",message:"Tu sesión ha terminado por inactividad",onAccept:function(){location.reload()}})},C=function(){S(),v=8,g=setInterval(function(){console.log("## timer",v),0==--v&&(T(),S())},6e4)},S=function(){null!=g&&clearInterval(g)},T=function(){var e,t,a=60,i=setInterval(function(){e=parseInt(a/60,10),t=parseInt(a%60,10),e=e<10?"0"+e:e,t=t<10?"0"+t:t,$("#cdSession").text(e+":"+t),--a<0&&($("#modal_timeout").find(".btn_acept span").text("Continuar"),clearInterval(i))},1e3);console.info("## showTimeSession"),$("#modal_timeout").attr("open","")};$("#modal_timeout").find(".btn_acept").click(function(){$("#modal_timeout").removeAttr("open"),$("#modal_timeout").find(".btn_acept span").text("Continuar con sesión"),E(),$.ajax({type:"GET",contentType:"image/png",url:"images/favicons/16x16.png",cache:!1,async:!0,success:function(e){if(C(),void 0!==e&&-1!=e.indexOf("<title>Login</title>"))return A(),void _();A()},error:function(){A(),_()}})});function E(){$("body").addClass("loading")}function A(){$("body").removeClass("loading")}var w=function(){};function N(e,t){e=(e+="").replace(/,/g,"").replace(/\$/g,"");var a=isNaN(a=Math.abs(a))?2:a,i=e<0?"-":"",o=String(parseInt(e=Math.abs(Number(e)||0).toFixed(a))),r=3<(r=o.length)?r%3:0;return i+(t?"":"$ ")+(r?o.substr(0,r)+",":"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1,")+(a?"."+Math.abs(e-o).toFixed(a).slice(2):"")}var O={catToVerify:[],catIndex:-1,callback:function(){},loopCatalogs:function(){O.catIndex++,O.catIndex<O.catToVerify.length?(E(),"STATES"==O.catToVerify[O.catIndex]?De.getStates():De.getCatalog(O.catToVerify[O.catIndex],O.loopCatalogs)):(O.catToVerify=[],O.catIndex=-1,O.callback(),O.callback=function(){},A())}},k=function(e,t){O.catToVerify=e,O.callback=t,O.loopCatalogs()};function I(){var e={placement:"left",trigger:"click",html:!0,closeOnClickOutside:!0,title:"",tooltiptitle:{contactPhone:b.phonetext,contactEmail:b.email}};isMobile.any()&&($("body").addClass("mobile"),e.placement="top",e.tooltiptitle.contactPhone='<a href="tel:+52'+b.phone+'">'+b.phonetext+"</a>",e.tooltiptitle.contactEmail='<a href="mailto:'+b.email+'">'+b.email+"</a>"),new Tooltip($("#call_h"),e).updateTitleContent('<div class="tooltip_title">Llámanos</div><div class="tooltip_message">Será un placer atenderte por télefono,<b> de lunes a viernes </b>de <b>9 </b> a <b>18 h</b> en el:</div><div class="tooltip_contact">'+e.tooltiptitle.contactPhone+'</div><div class="tooltip_message">Tiempo medio de espera:<br><b>5 minutos</b></div>'),new Tooltip($("#email_h"),e).updateTitleContent('<div class="tooltip_title">Escríbenos</div><div class="tooltip_message">Será un placer atenderte por correo</div><div class="tooltip_contact">'+e.tooltiptitle.contactEmail+'</div><div class="tooltip_message">Tiempo medio de espera:<br><b>24 horas</b></div>'),(a=new Tooltip($("#help_sh"),e)).updateTitleContent('<div class="tooltip_title">¿Te podemos ayudar?</div><div class="tooltip_message">Hemos detectado que no encuentras tu escuela</div><div class="btn_ht"><span title="Sí" aria-label="Sí" class="btn__basic btn__small" id="st_btn_reportschool"><span aria-hidden="true">Sí</span></span></div><div class="btn_ht"><span title="No" aria-label="No" class="btn__basic btn__small" id="st_btn_cancel"><span aria-hidden="true">No</span></span></div>'),$(".btn_help").click(function(e){e.preventDefault(),$(this).hasClass("active")?$(this).removeClass("active"):($(".btn_help").not("id",$(this).attr("id")).removeClass("active"),$(this).addClass("active"))}),$(".page-container").click(function(){$(".btn_help").hasClass("active")&&($(".btn_help").removeClass("active"),a.hide())})}function D(e,t){return(e=e.toUpperCase().replace(/Á/gi,"A").replace(/É/gi,"E").replace(/Í/gi,"I").replace(/Ó/gi,"O").replace(/Ú/gi,"U")).concat(" ".repeat(t-e.length))}function x(e){_tmpOpts=e.data("options")||[],_hasEmptyOp=!1;for(var t=0;t<_tmpOpts.length;t++)if(0==_tmpOpts[t].id||"0"==_tmpOpts[t].id){_hasEmptyOp=!0;break}_hasEmptyOp||(_descSt=s.getDommyDescription(),_tmpOpts.push({id:0,description:_descSt}),e.comboSelect(_tmpOpts)),e.data("selected",{id:0,description:_descSt}),e.removeComboError(),e.find(".option-text").removeClass("center"),e.find(".selected-option").text(_descSt)}var P=document.getElementsByClassName("header");function R(){return((window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0)+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0))/Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)*100}var M={services:[],errors:[],callback:function(){},inProgress:!(window.onscroll=function(){0<window.pageYOffset?R()<80&&P[0].classList.add("sticky"):P[0].classList.remove("sticky")}),listRestExec:function(e,t){e.ignoreError=e.ignoreError||!1,M.services.push(e),"function"==typeof t&&(M.callback=t),M.verifyServices()},verifyServices:function(){M.inProgress||(M.inProgress=!0,E(),M.loopServices())},loopServices:function(){M.services.length?(_restToExe=M.services[0],_restToExe.showWait=!1,_restToExe.async=!0,_restToExe.error=_restToExe.error||F,void 0===_restToExe.finallyError?_restToExe.finallyError=[]:"function"==typeof _restToExe.finallyError&&(_restToExe.finallyError=[_restToExe.finallyError]),void 0===_restToExe.finallySuccess?_restToExe.finallySuccess=[]:"function"==typeof _restToExe.finallySuccess&&(_restToExe.finallySuccess=[_restToExe.finallySuccess]),_restToExe.ignoreError||_restToExe.finallyError.push(function(e){M.errors.push(e)}),_fnLoop=function(){M.services.shift(),M.loopServices()},_restToExe.finallySuccess.push(_fnLoop),_restToExe.finallyError.push(_fnLoop),L(_restToExe)):(M.errors.length&&(ne($("#modal_generic .body"),me.error,{title:"Se presentaron algunos errores al realizar operación",message:"Es posible que tu información no se muestre de forma completa"}),M.errors=[]),A(),M.inProgress=!1,M.callback())}};function L(e){var a={type:e.type||"POST",service:e.service,headers:e.headers||{},data:e.data||{},async:e.async||!0,success:e.success||F,error:e.error||G,showWait:e.showWait||!1,finallySuccess:e.finallySuccess||F,finallyError:e.finallyError||F,hasUrlParam:e.hasUrlParam||!1,urlParam:e.urlParam||{}};console.log("datos a enviar: ",a.data),console.log("string ",JSON.stringify(a.data)),rest_execute=function(){$.ajax({type:a.type,dataType:"json",contentType:"application/json; charset=utf-8",url:ee.get(a),data:JSON.stringify(a.data),async:a.async,cache:!1,success:function(t){C(),console.log("RESPUESTA "+a.service,t),a.showWait&&A(),a.success(t),a.finallySuccess.constructor===Array?a.finallySuccess.forEach(function(e){e(t)}):a.finallySuccess(t)},error:function(t){if(C(),console.log("ERROR EN SERVICIO "+a.service,t),void 0!==t.responseText&&-1!=t.responseText.indexOf("<title>Login</title>"))return y(),void A();void 0!==t.responseJSON&&(t.responseJSON.code=t.responseJSON.code||t.responseJSON.errorcode,t.responseJSON.message=t.responseJSON.message||t.responseJSON.errormessage),a.showWait&&A(),a.error(t),a.finallyError.constructor===Array?a.finallyError.forEach(function(e){e(t)}):a.finallyError(t)}})},a.showWait&&E(),rest_execute()}var U,X,F=function(){console.log("nothing")},G=function(e){void 0!==e.responseJSON&&void 0!==e.responseJSON.message||(e.responseJSON={message:"SIN DETALLE DEL ERROR"}),ne($("#modal_generic .body"),me.error,{title:"Ocurrió un error al realizar la operación",message:e.responseJSON.message,redirectToLogin:"No tienes privilegios para accesar"==e.responseJSON.message})},q=function(e){u.schoolData=e,"1"==$e.get(e,"operation.moduleStatus","0")&&Ae($("#schoolar-data"),"complete"),"true"==$('[data-target="schoolar-data"]').attr("data-loaded")?(s.isDommy($e.get(e,"operation.keyWorkplace",""))&&(x($("#state_s")),x($("#municipalities_s"))),0!=$e.get(e,"schooling.location.state.id","")&&"0"!=$e.get(e,"schooling.location.state.id","")||(_prId=u.announcement.scholarshipProgram.id,r[0]=[{id:0,description:s.getDommyDescription()}]),De.getMunicipalities($e.get(e,"schooling.location.state.id",0),function(){e=u.schoolData,$("#municipalities_s").comboSelect(r[$e.get(e,"schooling.location.state.id","")]),fillForm($("#formschdata"),{promgen:$e.get(e,"average",""),state_s:$e.get(e,"schooling.location.state.id",""),municipalities_s:$e.get(e,"schooling.location.municipality.id",""),search_by:"CCT",cct:$e.get(e,"operation.keyWorkplace",""),turn:$e.get(e,"schooling.profession.scholarShift.id",""),career_area:$e.get(e,"schooling.profession.area.id",""),career_subarea:$e.get(e,"schooling.profession.subArea.id",""),program_career:$e.get(e,"schooling.profession.careerName",""),type_s:$e.get(e,"schooling.profession.type.id",""),duration:$e.get(e,"schooling.profession.duration.id",""),trans:""!=$e.get(e,"expenses.transportationAmount","")?N($e.get(e,"expenses.transportationAmount","")):"",dsclass:$e.get(e,"schooling.profession.classesStartDate","--").split("/")[0],msclass:$e.get(e,"schooling.profession.classesStartDate","--").split("/")[1],ysclass:$e.get(e,"schooling.profession.classesStartDate","--").split("/")[2],change_h:"true"==$e.get(e,"changeAddress","").toString()?"SI":"false"==$e.get(e,"changeAddress","").toString()?"NO":""}),$("#modality").selectOptionDescription($e.get(e,"schooling.profession.modality.description","")),"true"==$e.get(e,"changeAddress","").toString()&&fillForm($("#formschdata"),{state_m:$e.get(e,"schooling.newLocation.state.id",""),municipalities_m:$e.get(e,"schooling.newLocation.municipality.id",""),rent:"true"==$e.get(e,"expenses.isPayRent","").toString()?"SI":"false"==$e.get(e,"expenses.isPayRent","").toString()?"NO":""}),"true"==$e.get(e,"expenses.isPayRent","").toString()&&fillForm($("#formschdata"),{payment_rent:""!=$e.get(e,"expenses.mounthlyRent","")?N($e.get(e,"expenses.mounthlyRent","")):""}),""!=$e.get(e,"operation.keyWorkplace","")&&($("#schoolslist").searchList({filterid:"keyWorkplace",filtertext:"schoolOficialName",items:[{keyWorkplace:$e.get(e,"operation.keyWorkplace",""),schoolOficialName:$e.get(e,"schooling.schoolName","")}]}),$("#schoolslist").selectFromList($e.get(e,"operation.keyWorkplace",""))),s.isDommy($e.get(e,"operation.keyWorkplace",""))&&($("#search_by .radio-buttons").addClass("disabled"),$("input#cct").prop("disabled",!0)),Se&&(clearTimeout(Se),Se=void 0)})):M.listRestExec({showWait:!0,service:"GET_MUNICIPALITY",type:"POST",asyn:!1,data:{state:$e.get(u.schoolData,"schooling.location.state.id",0)},finallySuccess:[function(e){K($e.get(u.schoolData,"schooling.location.state.id",0),e)}],finallyError:[function(e){K($e.get(u.schoolData,"schooling.location.state.id",0),e)}]})},V=function(e){for(e.relatedPersons=$e.get(e,"relatedPersons",[]),i=0;i<e.relatedPersons.length;i++)"1"==e.relatedPersons[i].relationship.id&&(_famAlumno=e.relatedPersons[i],e.relatedPersons.splice(i,1),e.relatedPersons.splice(0,0,_famAlumno));for(u.sociodemographic=e,_famMembers=$e.get(e,"relatedPersons",[]),c.fromhome.members=[],c.awayfromhome.members=[],c.bbva.member={},i=0;i<_famMembers.length;i++){var t=_famMembers[i];switch($e.get(t,"personDetail.personType","")){case"PERSONS_LIVE_HOME":c.fromhome.members.push({alreadyExists:"true",familyBoss:!0===$e.get(t,"personDetail.isHeadOfHousehold","")?"Sí":"No",statusRelated:$e.get(t,"statusRelatedPersonsInformation","OK"),relatedid:$e.get(t,"id",""),fam_name:$e.get(t,"name",""),fam_appat:$e.get(t,"lastName",""),fam_apmat:$e.get(t,"secondLastName",""),fam_o_relationship:$e.get(t,"relationship.otherRelationshipDescription",""),fam_age:$e.get(t,"personDetail.age","0"),fam_omedic:$e.get(t,"personDetail.healthCareEntity.otherHealthCareEntity",""),total_f:N($e.get(t,"personDetail.incomes[0].amount",0),!0),sprogramname:$e.get(t,"personDetail.otherGovernmentScholarship.otherScholarshipProgramDescription",""),total_sf:N($e.get(t,"personDetail.otherGovernmentScholarship.incomes[0].amount",0),!0),fam_relationship:{id:$e.get(t,"relationship.id",""),description:$e.get(t,"relationship.description","")},fam_relationship_des:"10"!=$e.get(t,"relationship.id","")?$e.get(t,"relationship.description",""):$e.get(t,"relationship.otherRelationshipDescription",""),fam_civil:{id:$e.get(t,"personDetail.maritalStatus.id",""),description:$e.get(t,"personDetail.maritalStatus.description","")},fam_schoollevel:{id:$e.get(t,"personDetail.education.id",""),description:$e.get(t,"personDetail.education.description","")},fam_medic:{id:$e.get(t,"personDetail.healthCareEntity.id",""),description:$e.get(t,"personDetail.healthCareEntity.description","")},fam_ocupation:{id:$e.get(t,"personDetail.economicActivity.id",""),description:$e.get(t,"personDetail.economicActivity.description","")},fam_kindschoolarship:{id:$e.get(t,"personDetail.otherGovernmentScholarship.otherGovernmentScholarshipType.id",""),description:$e.get(t,"personDetail.otherGovernmentScholarship.otherGovernmentScholarshipType.description","")},fam_programschoolarship:{id:$e.get(t,"personDetail.otherGovernmentScholarship.id",""),description:$e.get(t,"personDetail.otherGovernmentScholarship.description","")},fam_gender:{id:$e.get(t,"personDetail.gender.id",""),description:$e.get(t,"personDetail.gender.id","")},fam_studing:{id:$e.get(t,"personDetail.isStudent",""),description:1==$e.get(t,"personDetail.isStudent","")?"Sí":"No"},fam_worked:{id:$e.get(t,"personDetail.hasWorkedLastMonth","").toString(),description:!0===$e.get(t,"personDetail.hasWorkedLastMonth","")?"Sí":"No"},fam_otherschoolarship:{id:""==$e.get(t,"personDetail.otherGovernmentScholarship.id","")?"1":"0",description:""==$e.get(t,"personDetail.otherGovernmentScholarship.id","")?"No":"Sí"},m_checkfirstname:"XXXXX"==$e.get(t,"lastName",""),m_checklastname:"XXXXX"==$e.get(t,"secondLastName","")}),c_fam=c.fromhome.members[c.fromhome.members.length-1],"0"==c_fam.fam_otherschoolarship.id&&(c_fam.infoscolarship='{"tipo":"'+$e.get(t,"personDetail.otherGovernmentScholarship.otherGovernmentScholarshipType.description","")+'","programa": "'+$e.get(t,"personDetail.otherGovernmentScholarship.description","")+'","monto": "'+N($e.get(t,"personDetail.otherGovernmentScholarship.incomes[0].amount",0),!0)+'"}');break;case"NOT_LIVE_HOME_ECONOMIC_SUPPORT":c.awayfromhome.members.push({alreadyExists:"true",statusRelated:$e.get(t,"statusRelatedPersonsInformation","OK"),relatedid:$e.get(t,"id",""),fam_name:$e.get(t,"name",""),fam_appat:$e.get(t,"lastName",""),fam_apmat:$e.get(t,"secondLastName",""),fam_o_relationship:$e.get(t,"relationship.otherRelationshipDescription",""),total_f:N($e.get(t,"personDetail.incomes[0].amount",0),!0),fam_relationship:{id:$e.get(t,"relationship.id",""),description:$e.get(t,"relationship.description","")},fam_relationship_des:"10"!=$e.get(t,"relationship.id","")?$e.get(t,"relationship.description",""):$e.get(t,"relationship.otherRelationshipDescription",""),fam_lives:{id:$e.get(t,"personDetail.residencePlace.id",""),description:$e.get(t,"personDetail.residencePlace.description","")},fam_ocupation:{id:$e.get(t,"personDetail.economicActivity.id",""),description:$e.get(t,"personDetail.economicActivity.description","")},m_checkfirstname:"XXXXX"==$e.get(t,"lastName",""),m_checklastname:"XXXXX"==$e.get(t,"secondLastName","")});break;case"RELATIVE_WORKS_BBVA":c.bbva.member={alreadyExists:"true",statusRelated:$e.get(t,"statusRelatedPersonsInformation","OK"),relatedid:$e.get(t,"id",""),name_fbbva:$e.get(t,"name",""),lastname_fbbva:$e.get(t,"lastName",""),slastname_fbbva:$e.get(t,"secondLastName",""),relationship_b_o:$e.get(t,"relationship.otherRelationshipDescription",""),workposition_fbbva:$e.get(t,"personDetail.professionPosition",""),workstation_fbbva:$e.get(t,"personDetail.managementUnit",""),relationship:{id:$e.get(t,"relationship.id",""),description:""==$e.get(t,"relationship.otherRelationshipDescription","")?$e.get(t,"relationship.description",""):$e.get(t,"relationship.otherRelationshipDescription","")},relationship_b:{id:$e.get(t,"relationship.id",""),description:$e.get(t,"relationship.description","")},checkfirstname_fbbva:"XXXXX"==$e.get(t,"lastName",""),checklastname_fbbva:"XXXXX"==$e.get(t,"secondLastName","")}}}for(var a in c.unregistered=!1,c.fromhome.total=c.fromhome.members.length,$("#n_family").selectOptionId(c.fromhome.members.length),$("#nfamilylist").empty(),c.fromhome.members)c.fromhome.members[a].memberid=a,"Delete"!=c.fromhome.members[a].statusRelated&&ne($("#nfamilylist"),me.familymembercard,c.fromhome.members[a],"append");for(var o in c.awayfromhome.total=c.awayfromhome.members.length,$("#nextrafamilylist").empty(),c.awayfromhome.members)c.awayfromhome.members[o].memberid=o,"Delete"!=c.awayfromhome.members[o].statusRelated&&ne($("#nextrafamilylist"),me.efamilymembercard,c.awayfromhome.members[o],"append");$("#extrafamily").selectOptionId(c.awayfromhome.members.length),$("#fam_bbvacard").empty(),0!=Object.keys(c.bbva.member).length?($("#bbvafamily").selectRadioId("0"),ne($("#fam_bbvacard"),me.familybbvacard,c.bbva.member),c.bbva.member&&$("#bbva_employee").prev(".notification.error").length&&$("#bbva_employee").prev(".notification.error").slideUp("slow")):$("#bbvafamily").selectRadioId("1"),"COMPLETE"==$e.get(e,"auditInformation.moduleStatus","")&&Ae($("#social-data"),"complete")},H=function(e){u.home=e,"1"==$e.get(e,"operation.moduleStatus","0")&&Ae($("#home-data"),"complete"),"true"==$('[data-target="home-data"]').attr("data-loaded")&&(_hasInt=$e.get(e,"homeInformation.belongings.hasInternet",""),_hasCom=$e.get(e,"homeInformation.belongings.hasComputer",""),_hasWas=$e.get(e,"homeInformation.belongings.hasWashingMachine",""),_hasMic=$e.get(e,"homeInformation.belongings.hasMicrowave",""),_hasPay=$e.get(e,"homeInformation.belongings.hasPayTV",""),_hasMot=$e.get(e,"homeInformation.belongings.hasMotorcycle",""),fillForm($("#formhdata"),{roomsNumber:$e.get(e,"homeInformation.roomsNumber",""),bedroomsNumber:$e.get(e,"homeInformation.bedroomsNumber",""),bathroomsNumber:$e.get(e,"homeInformation.bathroomsNumber",""),waterServicesType:$e.get(e,"homeInformation.homeService.waterServicesType.id",""),drainageType:$e.get(e,"homeInformation.drainageType.id",""),lightServicesType:$e.get(e,"homeInformation.homeService.lightServicesType.id",""),cookingFuelType:$e.get(e,"homeInformation.cookingFuelType.id",""),wallMaterialsType:$e.get(e,"homeInformation.wallMaterialsType.id",""),ceilingMaterialsType:$e.get(e,"homeInformation.ceilingMaterialsType.id",""),floorMaterialsType:$e.get(e,"homeInformation.floorMaterialsType.id",""),carsNumber:$e.get(e,"homeInformation.belongings.carsNumber",""),hasInternet:1==_hasInt?"SI":0==_hasInt?"NO":"",hasComputer:1==_hasCom?"SI":0==_hasCom?"NO":"",hasWashingMachine:1==_hasWas?"SI":0==_hasWas?"NO":"",hasMicrowave:1==_hasMic?"SI":0==_hasMic?"NO":"",hasPayTV:1==_hasPay?"SI":0==_hasPay?"NO":"",hasMotorcycle:1==_hasMot?"SI":0==_hasMot?"NO":""}))},B=function(e){u.legalDisclaimer=e;var t=$e.get(e,"legalDisclaimers",[]),a="";for(i=0;i<t.length;i++)$("#legal"+(i+1)).attr("data-legal-id",t[i].id),$("#legal"+(i+1)).attr("data-legal-consecutive",t[i].consecutive),a=t[i].description.split("|"),$("#legaltext"+(i+1)).text(a[0]),$("#legallink"+(i+1)).text(a[1]),$("#legallink"+(i+1)).attr("href",t[i].link),"Y"==$e.get(e,"legalDisclaimers["+i+"].isAccepted","N")?$("#legal"+(i+1)).doCheck():$("#legal"+(i+1)).unCheck();"COMPLETO"==$e.get(e,"validation.status","")?(Ae($("#legal-data"),"complete"),$("#legal1, #legal2, #legal3").addClass("disabled"),$("#btn_saveld").addClass("btn__disabled")):(Ae($("#legal-data"),"incomplete"),$("#legal1, #legal2, #legal3").removeClass("disabled"),$("#btn_saveld").removeClass("btn__disabled")),0<t.length&&$("#formldata").show()},W=function(e){scholarshipAnnouncement=e,u.announcement=scholarshipAnnouncement,$("#scholarshipProgram").text(),b.phone=$e.get(scholarshipAnnouncement,"phoneNumber",""),b.phonetext=b.phone,12==b.phone.length&&(b.phonetext="("+b.phone.substr(0,2)+" "+b.phone.substr(2,3)+") "+b.phone.substr(5,3)+" "+b.phone.substr(8)),b.email=$e.get(scholarshipAnnouncement,"email",""),I(),_progId=$e.get(scholarshipAnnouncement,"scholarshipProgram.id",""),$("#scholarshipProgram").text("1"==_progId?"Secundaria":"2"==_progId?"Preparatoria":"7"==_progId?"Universidad":""),"1"==scholarshipAnnouncement.globalStatus&&($(".step-container").find(".btn__submit").addClass("btn__disabled"),$(".submtbtn.send").attr("style","display: none"));var t="";switch(u.announcement.scholarshipProgram.id){case"1":$(".typeuni").remove(),$(".typeprep").remove(),$("#promgen").siblings(".placeholder-simulator").text("Promedio general de primaria"),$("#lastLevel").text("primaria"),$("#nextLevel").text("secundaria"),t="<div>¿Cómo calcular el promedio? <br> 6to año de primaria (1er trimestre + 2do trimestre) <hr> El resultado divídelo entre 2</div>";break;case"2":$(".typeuni").remove(),$("#promgen").siblings(".placeholder-simulator").text("Promedio general de secundaria"),$("#lastLevel").text("secundaria"),$("#nextLevel").text("preparatoria"),t="<div>¿Cómo calcular el promedio? <ul style='text-align:left'><li> &nbsp; &nbsp; 1er año de secundaria</li><li>+ 2do año de secundaria</li><li>+ 3er año de secundaria (1er trimestre + 2do trimestre)</li></ul><hr> El resultado divídelo entre 3</div>";break;case"7":$("#promgen").siblings(".placeholder-simulator").text("Promedio general de preparatoria"),$("#lastLevel").text("preparatoria"),$("#nextLevel").text("universidad"),t="<div>¿Cómo calcular el promedio? <ul style='text-align:center'> <li> &nbsp; &nbsp; 1er semestre</li><li>+ 2do semestre</li><li>+ 3er semestre</li><li>+ 4to semestre</li><li>+ 5to semestre</li> </ul><hr> El resultado divídelo entre 5</div>"}new Tooltip($("#levelAverage"),{placement:"bottom",html:!0,title:t}),xe()},j=function(){_dateArray=u.general.currentDate.split("-");var t="";ue.find(function(e){e.id!=_dateArray[1]||(t=_dateArray[0]+" DE "+e.monthcomplete+" DE "+_dateArray[2])}),L({service:"SEND_NOTIFICATION",data:{eventCode:"0000001844",senderId:"0000000001",devices:[{id:"102",serviceProvider:{id:"@@@"},receivers:[u.general.student[0].contactInf[0].email]}],message:{messageBody:D(t,25)+D(u.general.student[0].name,50)+D(u.general.student[0].firstName,50)+D(u.general.student[0].lastName,50)}},success:function(){ne($("#modal_generic .body"),me.success,{title:"¡Gracias!",message:"Has finalizado la primera parte del registro. Te enviaremos por correo electrónico los pasos que deberás seguir.",onAccept:De.scholarshipAnnouncement})},showWait:!0})},z=function(e,t){if(-1!=e.indexOf("CAT_PARENTESCO"))for(i=0;i<t.data.length;i++)if("0"==t.data[i].id){t.data.splice(i,1);break}if("CAT_PARENTESCO-Tutor"==e){for(i=0;i<t.data.length;i++)if("25"==t.data[i].id){_parOther=t.data[i],t.data.splice(i,1),t.data.push(_parOther);break}}else if("CAT_PARENTESCO-Miembro"==e){for(i=0;i<t.data.length;i++)if("10"==t.data[i].id){_parOther=t.data[i],t.data.splice(i,1),t.data.push(_parOther);break}}else if("CAT_PARENTESCO-Soporte"==e){for(i=0;i<t.data.length;i++)if("19"==t.data[i].id){_parOther=t.data[i],t.data.splice(i,1),t.data.push(_parOther);break}}else if(0==e.indexOf("CAT_TPO_ESCUELA-")){for(i=0;i<t.data.length;i++)t.data[i].id=i;t.data.sort(function(e,t){return _descA=e.description.toUpperCase(),_descB=t.description.toUpperCase(),_comparison=0,_descA>_descB?comparison=1:_descA<_descB&&(comparison=-1),comparison})}else if(0==e.indexOf("CAT_OCUPACION"))for(i=0;i<t.data.length;i++)if("10"==t.data[i].id){t.data.splice(i,1);break}h[e]=t.data||[]},J=function(e){e=e.school||[],f=f.concat(e)},Y=function(e){o=$e.get(e,"stateTransactions",[]);var t=[];for(i=0;i<o.length;i++)t.push({id:o[i].state.code,description:o[i].state.name});o=t},K=function(e,t){var a=$e.get(t,"municipalityTransactions",[]),o=[];for(i=0;i<a.length;i++)o.push({id:a[i].municipality.code,description:a[i].municipality.name});r[e]=o||[]},Q=function(){"COMPLETO"==$e.get(u.general,"moduleStatus","")?($(".page-container .i-form.accordion").not("#wf0").show(),m?De.legalDisclaimer(function(){De.checkStatus(),Ae($("#general-data"),"complete")}):(m=!0,Pe(function(){De.checkStatus(),Ae($("#general-data"),"complete")}))):$(".page-container .i-form.accordion").not("#wf0").hide()},Z=function(e){if("01-01-1900"==$e.get(e,"student[0].scholarBirthdate","--")&&(e.student[0].scholarBirthdate="--"),"00000"==$e.get(e,"student[0].domicile[0].codePostal","")&&(e.student[0].domicile[0].codePostal=""),u.general=e,"true"!=$('[data-target="general-data"]').attr("data-loaded"))return M.listRestExec({showWait:!0,service:"GET_MUNICIPALITY",type:"POST",asyn:!1,data:{state:$e.get(u.general,"student[0].domicile[0].cdState",0)},finallySuccess:[function(e){K($e.get(u.general,"student[0].domicile[0].cdState",0),e)}],finallyError:[function(e){K($e.get(u.general,"student[0].domicile[0].cdState",0),e)}]}),void Q();De.getMunicipalities($e.get(e,"student[0].domicile[0].cdState",0),function(e){$("#municipalities").comboSelect(e);var t=$e.get(u.general,"student[0]",{}),a=$e.get(u.general,"student[0].tutorData[0]",{}),i=$e.get(u.general,"student[0].domicile[0]",{}),o=$e.get(u.general,"student[0].contactInf[0]",{});fillForm($("#formgendata"),{tutorname:$e.get(a,"tutorName",""),tutorlastname:$e.get(a,"firstNameTutor",""),tutorslastname:$e.get(a,"lastaNameTutor",""),username:$e.get(t,"name",""),firstname:$e.get(t,"firstName",""),lastname:$e.get(t,"lastName",""),dbirthdate:$e.get(t,"scholarBirthdate","--").split("-")[0],mbirthdate:$e.get(t,"scholarBirthdate","--").split("-")[1],ybirthdate:$e.get(t,"scholarBirthdate","--").split("-")[2],gender:$e.get(t,"gender",""),curp:$e.get(t,"CURP",""),street:"X"==$e.get(i,"street","")?"":$e.get(i,"street",""),outdoornum:"X"==$e.get(i,"numExterior","")?"":$e.get(i,"numExterior",""),interiornum:$e.get(i,"numInterior",""),zipcode:$e.get(i,"codePostal",""),neighborhood:"X"==$e.get(i,"colony","")?"":$e.get(i,"colony",""),state:$e.get(i,"cdState",""),municipalities:$e.get(i,"cdMunicipality",""),references:"X"==$e.get(i,"particularReferences","")?"":$e.get(i,"particularReferences",""),phone:$e.get(o,"homePhone",""),cellphone:$e.get(o,"cellPhone",""),errandsphone:$e.get(o,"messagePhone",""),email:$e.get(o,"email",""),emailconf:$e.get(o,"email",""),email2:$e.get(o,"email1",""),email2conf:$e.get(o,"email1",""),email3:$e.get(o,"email2",""),email3conf:$e.get(o,"email2","")}),$("#relationship").selectOptionDescription($e.get(a,"kinship","")),$("#o_relationship").setValue($e.get(a,"kinshipType","")),""==$e.get(a,"firstNameTutor","")||"XXXXX"==$e.get(a,"firstNameTutor","")&&"XXXXX"!=$e.get(a,"lastaNameTutor","")?($("#checktutofirstname").doCheck(),$("#checktutofirstname").removeClass("disabled")):($("#checktutofirstname").unCheck(),$("#checktutofirstname").addClass("disabled")),""==$e.get(a,"lastaNameTutor","")||"XXXXX"==$e.get(a,"lastaNameTutor","")&&"XXXXX"!=$e.get(a,"firstNameTutor","")?($("#checktutolastname").doCheck(),$("#checktutolastname").removeClass("disabled")):($("#checktutolastname").unCheck(),$("#checktutolastname").addClass("disabled")),""==$e.get(t,"firstName","")||"XXXXX"==$e.get(t,"firstName","")&&"XXXXX"!=$e.get(t,"lastName","")?($("#checkfirstname").doCheck(),$("#checkfirstname").removeClass("disabled")):($("#checkfirstname").unCheck(),$("#checkfirstname").addClass("disabled")),""==$e.get(t,"lastName","")||"XXXXX"==$e.get(t,"lastName","")&&"XXXXX"!=$e.get(t,"firstName","")?($("#checklastname").doCheck(),$("#checklastname").removeClass("disabled")):($("#checklastname").unCheck(),$("#checklastname").addClass("disabled")),Q()})},ee=(U=-1!=window.location.origin.indexOf("localhost:3000")?"http://127.0.0.1:3004/":"/mgbf_mult_web_fundacionbancomerextranetwebfront_01/",X={CONSULT_PARAMETERS:"consult/parameters",SCHOLAR_DETAIL:"details/scholar",MODIF_UPLOADSCHOLAR:"modif/uploadSchoolar",GET_STATES:"list/state",GET_MUNICIPALITY:"list/municipality",TERMINATE_SESSION:"terminate/session",LIST_CATALOGS:"catalogs/{{catalog}}",UPDATE_HOMEINF:"updateHomeInformation/{{scholarId}}",GET_HOMEINF:"getHomeInformation/{{scholarId}}/?programScholarshipId={{programScholarshipId}}",GET_SCHOLARINF:"getScholarInformation/{{scholarId}}/?programScholarshipId={{programScholarshipId}}",UPDATE_SCHOLARINF:"updateScholarInformation",UPDATE_LEGAL:"updateStatusLegalDisclaimer",GET_LEGAL:"listLegalDisclaimers/?scholarshipProgramId={{scholarshipProgramId}}&scholarId={{scholarId}}&moduleId={{moduleId}}",GET_ANNOUNCEMENT:"getScholarshipAnnouncement/?registerType={{registerType}}&scholarId={{scholarId}}",UPDATE_ANNOUNCEMENT:"updateScholarshipAnnouncement",GET_SOCINF:"getSocioeconomicSummary/{{scholarId}}/?programScholarshipId={{scholarshipProgramId}}",CREATE_SOCINF:"createRelatedPersons/{{scholarId}}",UPDATE_SOCINF:"updateRelatedPersons/{{scholarId}}",GET_SCHOOLS:"listSchools",SEND_NOTIFICATION:"sendNotification"},{get:function(e){var t=U+X[e.service];return e.hasUrlParam?Mustache.render(t,e.urlParam):t}}),te=function(){},ae=function(){$("#modal_generic").attr("open","")},ie=function(){$("#modal_generic").removeAttr("open")},oe=function(e,t){ae(),t.redirectToLogin?$(".btn_acept").click(function(e){e.preventDefault(),_()}):"function"==typeof t.onAccept?$(".btn_acept").click(function(){t.onAccept(),ie()}):$(".btn_acept").click(function(e){e.preventDefault(),ie()})},re=function(e){ie(),"PENDING"==e.data.devices[0].status.id?ne($("#modal_generic .body"),me.success,{title:"Información enviada",message:"Hemos recibido tu duda, Te contactaremos en un máximo de 24 horas"}):ne($("#modal_generic .body"),me.error,{title:"Ocurrió un error al realizar operación",message:"Ocurrió un problema, por favor intentalo más tarde"}),x($("#state_s")),x($("#municipalities_s")),$("#search_by").selectRadioId("CCT"),$("#schoolname").setValue(s.getDommyDescription()),$("#schoolslist").searchList({filterid:"keyWorkplace",filtertext:"schoolOficialName",items:[{keyWorkplace:s.getDommyCCT(),schoolOficialName:s.getDommyDescription()}]}),$("#schoolslist").selectFromList(s.getDommyCCT()),$("#cct").setValue(s.getDommyCCT()),$("#search_by .radio-buttons").addClass("disabled"),$("input#cct").prop("disabled",!0)},se={conf:{path:"./views/modal/confirm_m.html",onload:function(e,t){t.onDecline="function"==typeof t.onDecline?t.onDecline:ie,ae(),e.find(".btn_acept").click(t.onAccept.bind(t)),e.find(".btn_decline").click(t.onDecline.bind(t))}},school:{path:"./views/modal/no_school.html",onload:function(e,t){$(".modal .closemodal").click(function(){$(this).parents(".modal").removeAttr("open")}),$("input.reflectable").each(function(){inpval=$(this).val().trim(),$newinp=$($(this).attr("data-reflecto")),$newinp.val(inpval),""!=$newinp.val()&&$($(this).attr("data-reflecto")).siblings(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;")}),$(".form-group-select.reflectable").each(function(){dataOptions=$(this).data("options"),$reflectTo=$($(this).attr("data-reflecto")),null!=dataOptions&&($reflectTo.reset(),$reflectTo.comboSelect(dataOptions),opSelected=$(this).getOptionSelected(),null!=opSelected&&$reflectTo.selectOptionId(opSelected.id))}),null!=$("#m_state_s").getOptionSelected()&&"0"==$("#m_state_s").getOptionSelected().id&&$("#m_state_s").reset(),null!=$("#m_municipalities_s").getOptionSelected()&&"0"==$("#m_municipalities_s").getOptionSelected().id&&$("#m_municipalities_s").reset(),ae(),state_id=$("#state_s").getOptionSelected().id,mun_id=$("#municipalities_s").getOptionSelected().id,state_id=$("#state_s").getOptionSelected().id,mun_id=$("#municipalities_s").getOptionSelected().id,De.getCatalog("CAT_TPO_ESCUELA-"+state_id+"-"+mun_id+"-"+u.announcement.scholarshipProgram.id,function(){_cat=h["CAT_TPO_ESCUELA-"+state_id+"-"+mun_id+"-"+u.announcement.scholarshipProgram.id].slice(0),_cat.push({id:"x",description:"Ninguno de los anteriores"}),Te("schoolType",_cat,function(){})}),$("#m_state_s").onSelect(function(e){De.getMunicipalities(e.id,function(){$("#m_municipalities_s").reset(),Te("m_municipalities_s",r[e.id])})}),$("#schoolform").data("complete",function(e){dateArray=u.general.currentDate.split("-");var t="",a="";ue.find(function(e){e.id==dateArray[1]&&(t=dateArray[0]+" DE "+e.monthcomplete+" DE "+dateArray[2])}),"1"==u.announcement.scholarshipProgram.id?a="SECUNDARIA":"2"==u.announcement.scholarshipProgram.id?a="PREPARATORIA":"7"==u.announcement.scholarshipProgram.id&&(a="UNIVERSIDAD");var i=[{str:t,size:25},{str:u.general.student[0].name,size:50},{str:u.general.student[0].firstName,size:50},{str:u.general.student[0].lastName,size:50},{str:u.general.student[0].domicile[0].state,size:50},{str:u.general.student[0].domicile[0].municipality,size:50},{str:u.general.student[0].contactInf[0].email,size:100},{str:u.general.student[0].contactInf[0].homePhone,size:10},{str:e.m_state_s.description,size:50},{str:e.m_municipalities_s.description,size:50},{str:a,size:50},{str:e.schoolType.description,size:150},{str:e.m_school,size:100}];L({service:"SEND_NOTIFICATION",data:{eventCode:"0000001843",senderId:"0000000001",devices:[{id:"102",serviceProvider:{id:"@@@"},receivers:[d[e.m_state_s.id]]}],message:{messageBody:function(e){_Tstr="";for(var t=0;t<e.length;t++){var a=e[t];_Tstr+=D(a.str,a.size)}return _Tstr}(i)}},success:re,showWait:!0})})}},family:{path:"./views/modal/familymember.html",onload:function(e,t){var a=function(e){"10"==e.id?($("#fam_o_relationship").clearInput(),$("#fam_o_relationship").attr("required","required"),$("#fam_other_relationship").slideDown()):($("#fam_o_relationship").removeAttr("required"),$("#fam_other_relationship").slideUp())};if(e.find("#total_sf").each(function(){$(this).keyup(function(){var e=$().add($(this));"0.00"===e.val()&&e.showError("La cantidad no puede ser cero")})}),$("#fam_gender").comboSelect(p),$("#fam_civil").comboSelect(h.CAT_EDO_CIVIL),$("#fam_schoollevel").comboSelect(h.CAT_MAX_NVL_ESTUDIO),Te("fam_medic",h.CAT_INST_MEDICA,function(e){"7"==e.id?($("#other_medic").slideDown(),$("#fam_omedic").prop("required",!0)):($("#other_medic").slideUp(),$("#fam_omedic").clearInput(),$("#fam_omedic").prop("required",!1))}),$("#fam_ocupation").comboSelect(h.CAT_OCUPACION),$("#fam_age").on("keyup",function(){14<=Number($(this).val())?($("#age14").slideDown("slow"),$("#fam_worked").addClass("required"),$("#fam_worked").clearRadio()):($("#age14").slideUp("slow"),$("#fam_worked").removeClass("required"),$("#fam_worked").selectRadioId("false"))}),$("#fam_otherschoolarship").onChecked(function(e){"0"==e.id?($(".schoolarshiparea").slideDown(),$("#fam_kindschoolarship").addClass("required"),$("#fam_programschoolarship").addClass("required"),$("#total_sf").prop("required",!0)):($(".schoolarshiparea").slideUp(),$("#fam_kindschoolarship").removeClass("required"),$("#fam_programschoolarship").removeClass("required"),$("#fam_programschoolarship").reset(),$("#total_sf").prop("required",!1))}),$("#fam_kindschoolarship").comboSelect(h.CAT_TPO_APOYO),$("#fam_programschoolarship").comboSelect(h.CAT_INST_APOYO,function(e){"6"==e.id?($("#oschoolarship").slideDown(),$("#sprogramname").prop("required",!0)):($("#oschoolarship").slideUp(),$("#sprogramname").prop("required",!1),$("#sprogramname").clearInput())}),_isStudent="edit"==t.flags.type&&0==t.flags.memberid||"1"==c.fromhome.index(),_isStudent)$("#fam_relationship").comboSelect(h["CAT_PARENTESCO-Miembro"],a);else{var o=jQuery.extend(!0,{},{rel:h["CAT_PARENTESCO-Miembro"]});for(i=0;i<o.rel.length;i++)if(element=o.rel[i],"1"==element.id){o.rel.splice(i,1);break}$("#fam_relationship").comboSelect(o.rel,a)}if($("#familyformbtn").data("complete",function(e){e.infoscolarship="",e.total_f=N(e.total_f,!0),e.total_sf=""==e.total_sf?"":N(e.total_sf,!0),null!=e.fam_otherschoolarship&&"0"==e.fam_otherschoolarship.id&&(e.infoscolarship='{"tipo":"'+e.fam_kindschoolarship.description+'","programa": "'+e.fam_programschoolarship.description+'","monto": "'+e.total_sf+'"}'),"10"!=e.fam_relationship.id?e.fam_relationship_des=e.fam_relationship.description:e.fam_relationship_des=e.fam_o_relationship,"edit"==e.flag?("true"==e.alreadyExists&&(e.statusRelated="Edit"),c.fromhome.members[e.memberid]=e):(e.statusRelated="Add",c.fromhome.members.push(e)),$("#formfamily").slideUp("slow",function(){if(c.fromhome.index()<=c.fromhome.total)k(["CAT_INST_MEDICA","CAT_EDO_CIVIL","CAT_OCUPACION","CAT_TPO_APOYO","CAT_INST_APOYO","CAT_PARENTESCO-Miembro","CAT_MAX_NVL_ESTUDIO"],function(){ne($("#modal_generic .body"),se.family,c.fromhome)});else{$("#fam_members").prev().hasClass("error")&&$("#fam_members").prev().remove();var e=!1;for(var t in c.fromhome.members)c.fromhome.members[t].memberid=t,"Sí"==c.fromhome.members[t].familyBoss&&(e=!0);"edit"==this.flag||e?($("html").animate({scrollTop:$("#nfamilylist").offset().top-200},1e3,"swing",function(){for(var e in $("#nfamilylist").empty(),c.fromhome.members)"Delete"!=c.fromhome.members[e].statusRelated&&ne($("#nfamilylist"),me.familymembercard,c.fromhome.members[e],"append")}),ie()):ne($("#modal_generic .body"),se.selectboss,{members:c.fromhome.getMembers()})}}.bind(e))}),"edit"==t.flags.type&&(membertoedit=c[t.flags.group].members[t.flags.memberid],membertoedit.flag="edit",membertoedit.total_f=N(membertoedit.total_f),membertoedit.total_sf=N(membertoedit.total_sf),fillForm($("#formfamily"),membertoedit),$("#fam_o_relationship").setValue(membertoedit.fam_o_relationship),"XXXXX"==u.general.student[0].firstName&&"XXXXX"!=u.general.student[0].lastName&&e.find("#m_checkfirstname").doCheck(),"XXXXX"==u.general.student[0].lastName&&"XXXXX"!=u.general.student[0].firstName&&e.find("#m_checklastname").doCheck()),_isStudent)switch($("#fam_relationship").selectOptionId("1"),$("#fam_relationship,#fam_schoollevel").find(".option-select").addClass("disabled"),e.find("#fam_name").setValue(u.general.student[0].name),e.find("#fam_appat").setValue(u.general.student[0].firstName),e.find("#fam_apmat").setValue(u.general.student[0].lastName),e.find("#fam_age").setValue(u.general.student[0].age),e.find("#fam_gender").selectRadioId(u.general.student[0].gender),"XXXXX"==u.general.student[0].firstName&&"XXXXX"!=u.general.student[0].lastName&&e.find("#m_checkfirstname").doCheck(),"XXXXX"==u.general.student[0].lastName&&"XXXXX"!=u.general.student[0].firstName&&e.find("#m_checklastname").doCheck(),e.find("#fam_name").prop("disabled",!0),e.find("#fam_appat").prop("disabled",!0),e.find("#fam_apmat").prop("disabled",!0),e.find("#fam_age").prop("disabled",!0),e.find("#fam_gender .radio-buttons").addClass("disabled"),e.find("#m_checkfirstname").addClass("disabled"),e.find("#m_checklastname").addClass("disabled"),u.announcement.scholarshipProgram.id){case"1":$("#fam_schoollevel").selectOptionId("10");break;case"2":$("#fam_schoollevel").selectOptionId("12");break;case"7":$("#fam_schoollevel").selectOptionId("15")}14<=Number(e.find("#fam_age").val())?($("#age14").slideDown("slow"),$("#fam_worked").addClass("required")):($("#age14").slideUp("slow"),$("#fam_worked").removeClass("required"),$("#fam_worked").selectRadioId("false")),e.find(".help_section .h_h1").click(function(){$h1sec=$(this).siblings(".h_h1_section"),"true"==$h1sec.attr("data-collapsed")?($(this).find(".bbva-icon").removeClass("ui-simple-up").addClass("ui-simple-down"),$h1sec.slideUp("slow",function(){$(this).attr("data-collapsed","false")})):($(this).find(".bbva-icon").removeClass("ui-simple-down").addClass("ui-simple-up"),$h1sec.slideDown("slow",function(){$(this).attr("data-collapsed","true")}))}),w=function(){if(c.fromhome.total!=c.fromhome.getTotal()&&(fn_showAddFam($("#fam_members"),"fromhome"),c.fromhome.members.length))for(var e in $("#nfamilylist").empty(),c.fromhome.members)c.fromhome.members[e].memberid=e,"Delete"!=c.fromhome.members[e].statusRelated&&ne($("#nfamilylist"),me.familymembercard,c.fromhome.members[e],"append");w=function(){}},ae(),setTimeout(function(){$("#formfamily").slideDown("slow")},400)}},efamily:{path:"./views/modal/efamilymember.html",onload:function(e,t){var a=jQuery.extend(!0,{},{rel:h["CAT_PARENTESCO-Miembro"]});for(i=0;i<a.rel.length;i++)if(element=a.rel[i],"1"==element.id){a.rel.splice(i,1);break}$("#fam_relationship").comboSelect(a.rel,function(e){"10"==e.id?($("#fam_o_relationship").clearInput(),$("#fam_o_relationship").attr("required","required"),$("#fam_other_relationship").slideDown()):($("#fam_o_relationship").removeAttr("required"),$("#fam_other_relationship").slideUp())}),$("#fam_ocupation").comboSelect(h.CAT_OCUPACION),$("#fam_lives").comboSelect(h.CAT_RESIDENCIA),$("#efamilyformbtn").data("complete",function(e){"edit"==e.flag?("true"==e.alreadyExists&&(e.statusRelated="Edit"),c.awayfromhome.members[e.memberid]=e):(e.statusRelated="Add",c.awayfromhome.members.push(e)),"10"!=e.fam_relationship.id?e.fam_relationship_des=e.fam_relationship.description:e.fam_relationship_des=e.fam_o_relationship,$("#formefamily").slideUp("slow",function(){c.awayfromhome.index()<=c.awayfromhome.total?k(["CAT_OCUPACION","CAT_RESIDENCIA","CAT_PARENTESCO-Miembro"],function(){ne($("#modal_generic .body"),se.efamily,c.awayfromhome)}):($("#ext_family").prev().hasClass("error")&&$("#ext_family").prev().remove(),$("html").animate({scrollTop:$("#nextrafamilylist").offset().top-200},1e3,"swing",function(){for(var e in $("#nextrafamilylist").empty(),c.awayfromhome.members)c.awayfromhome.members[e].memberid=e,"Delete"!=c.awayfromhome.members[e].statusRelated&&ne($("#nextrafamilylist"),me.efamilymembercard,c.awayfromhome.members[e],"append")}),ie())})}),"edit"==t.flags.type&&(membertoedit=c.awayfromhome.members[t.flags.memberid],membertoedit.flag="edit",fillForm($("#formefamily"),membertoedit),$("#fam_o_relationship").setValue($e.get(membertoedit,"fam_o_relationship",""))),w=function(){if(c.awayfromhome.total!=c.awayfromhome.getTotal()&&(fn_showAddFam($("#ext_family"),"awayfromhome"),c.awayfromhome.members.length))for(var e in $("#nextrafamilylist").empty(),c.awayfromhome.members)c.awayfromhome.members[e].memberid=e,"Delete"!=c.awayfromhome.members[e].statusRelated&&ne($("#nextrafamilylist"),me.efamilymembercard,c.awayfromhome.members[e],"append");w=function(){}},ae(),setTimeout(function(){$("#formefamily").slideDown("slow")},400)}},fambbva:{path:"./views/modal/fam_bbva.html",onload:function(){$("#relationship_b").comboSelect(h["CAT_PARENTESCO-Soporte"],function(e){"19"==e.id?($("#other_relationship_b").slideDown("slow"),$("#relationship_b_o").attr("required","required")):($("#other_relationship_b").slideUp("slow"),$("#relationship_b_o").removeAttr("required")),$("#relationship_b_o").clearInput()}),ae(),w=function(){0==Object.keys(c.bbva.member).length&&fn_showAddFam($("#bbva_employee"),"bbva"),w=function(){}},"edit"==c.bbva.flag&&(fillForm($("form#fam_bbva"),c.bbva.member),$("#relationship_b_o").setValue($e.get(membertoedit,"relationship_b_o",""))),$("#familybbvabtn").data("complete",function(e){""!=e.relationship_b_o?e.relationship={id:e.relationship_b.id,description:e.relationship_b_o}:e.relationship=e.relationship_b,"edit"==c.bbva.flag&&"true"==$e.get(c,"bbva.member.alreadyExists","false")?e.statusRelated="Edit":e.statusRelated="Add",ie(),c.bbva.member=e,$("#fam_bbvacard").empty(),ne($("#fam_bbvacard"),me.familybbvacard,c.bbva.member),c.bbva.member&&$("#bbva_employee").prev(".notification.error").length&&$("#bbva_employee").prev(".notification.error").slideUp("slow")})}},deletefam:{path:"./views/modal/delete_fam.html",onload:function(e,t){ae(),e.find("#btn_delete").click(t.onAccept.bind(t)),e.find("#btn_decline").click(t.onDecline.bind(t)),w="family"==t.origin?function(){$("#n_family").getOptionSelected().id!=c.fromhome.members.length&&$("#n_family").selectOptionId(c.fromhome.members.length),w=function(){}}:function(){$("#extrafamily").getOptionSelected().id!=c.awayfromhome.members.length&&$("#extrafamily").selectOptionId(c.awayfromhome.members.length),w=function(){}}}},selectboss:{path:"./views/modal/select_boss.html",onload:function(e){w=function(){ne($("#modal_generic .body"),se.selectboss,{members:c.fromhome.getMembers()}),ae()},e.find(".checkbox").ckeckCallback(function(e){$("#formselectboss").find(".checkbox").addClass("disabled"),e.removeClass("disabled")},function(){$("#formselectboss").find(".checkbox").removeClass("disabled")}),e.find("#btn_accept").click(function(){var e=$("#formselectboss").find(".checkbox.checked");function t(e){$("#formselectboss").prev(".notification.error").length&&$("#formselectboss").prev(".notification.error").remove(),ne($("#formselectboss"),me.notification,{type:"error",title:"Lo sentimos",message:e},"before")}if(0==e.length)t("Debes seleccionar a un jefe de familia");else if(1==e.length){var a=Number(e.attr("data-index"));for(var i in c.fromhome.members)c.fromhome.members[i].familyBoss=i==a?"Sí":"No";ie(),w=function(){},$("html").animate({scrollTop:$("#nfamilylist").offset().top-200},1e3,"swing",function(){for(var e in $("#nfamilylist").empty(),c.fromhome.members)void 0===c.fromhome.members[e].fam_worked.id&&(c.fromhome.members[e].fam_worked.id="false",c.fromhome.members[e].fam_worked.description="No"),"Delete"!=c.fromhome.members[e].statusRelated&&ne($("#nfamilylist"),me.familymembercard,c.fromhome.members[e],"append")})}else t("Sólo puedes seleccionar a un jefe del hogar")}),ae()}},confirmAllData:{path:"./views/modal/confirm_data.html",onload:function(e,t){for(t.onDecline="function"==typeof t.onDecline?t.onDecline:ie,"7"!=u.announcement.scholarshipProgram.id&&e.find(".inidatam").hide(),_familyMembers=jQuery.extend(!0,{},u.sociodemographic),_famFromHome=[],_famAwayFromHome=[],_bbvamember={},_i=0;_i<_familyMembers.relatedPersons.length;_i++)_member=_familyMembers.relatedPersons[_i],"PERSONS_LIVE_HOME"==_member.personDetail.personType?_famFromHome.push(_member):"NOT_LIVE_HOME_ECONOMIC_SUPPORT"==_member.personDetail.personType?_famAwayFromHome.push(_member):"RELATIVE_WORKS_BBVA"==_member.personDetail.personType&&(_bbvamember=_member);if(e.find("#n_fromhome").text(_famFromHome.length),_famFromHome.length)for(_i=0;_i<_famFromHome.length;_i++)_famh=_famFromHome[_i],_famh.student=_famh.personDetail.isStudent?"Sí":"No",_famh.hasWorked=_famh.personDetail.hasWorkedLastMonth?"Sí":"No",_famh.otherScholarshipProgramDescription="",(_famh.otherGovernmentScholarshipamount="")!=$e.get(_famh,"personDetail.otherGovernmentScholarship.id","")?(_famh.isotherG="Sí",_famh.fam_otherschoolarship="block",_famh.otherScholarshipProgramDescription=_famh.personDetail.otherGovernmentScholarship.description,_famh.otherGovernmentScholarshipamount=N(_famh.personDetail.otherGovernmentScholarship.incomes[0].amount)):(_famh.isotherG="No",_famh.fam_otherschoolarship="none"),_famh.incomesamount=N(_famh.personDetail.incomes[0].amount),ne(e.find("#membersfromhome"),me.m_familycard,_famh,"append");else e.find("#membersfromhome").remove();if(e.find("#n_awayhome").text(_famAwayFromHome.length),_famAwayFromHome.length)for(_i=0;_i<_famAwayFromHome.length;_i++)_fam=_famAwayFromHome[_i],_fam.incomesamount=N(_fam.personDetail.incomes[0].amount),ne(e.find("#membersawayhome"),me.m_efamilycard,_fam,"append");else e.find("#membersawayhome").remove();e.find("#n_bbva").text(Object.keys(_bbvamember).length?"1":"0"),Object.keys(_bbvamember).length?ne(e.find("#bbvamember"),me.m_bbvafamilycard,_bbvamember):e.find("#bbvamember").remove(),ae(),e.find(".btn_acept").click(t.onAccept.bind(t)),e.find(".btn_decline").click(t.onDecline.bind(t))}},confirmemail:{path:"./views/modal/confirm_email.html",onload:function(e){w=function(){ne($("#modal_generic .body"),se.confirmemail,{c_email:n.contactInf[0].email})},e.find("#econt").data("complete",function(e){e.c_email==e.c_email2?(w=function(){},ie(),L({service:"MODIF_UPLOADSCHOLAR",data:{userCurrent:"ALUMNO",registerType:"2",student:[{studentId:"",scholarUser:ivUser.trim(),programType:n.programKey,statusDispersion:n.statusDispersion,originRegion:n.originRegion,schoolCycle:n.schoolCycle,cdAssignedCR:n.cdAssignedCR,assignedCR:n.assignedCR,scholarNumber:n.scholarNumber,accountNumber:n.accountNumber,folioPhoto:"",name:n.name.trim(),firstName:n.firstName.trim(),lastName:n.lastName.trim(),CURP:n.CURP,scholarBirthdate:n.scholarBirthdate.trim(),gender:n.gender,schoolData:[{duration:"",turn:"",typeCareer:"",nameCareer:"",area:"",school:[{cdState:"",state:"",cdMunicipality:"",municipality:"",CCT:"",control:"",initials:"",type:"",name:"",domicile:""}]}],domicile:[{street:n.domicile[0].street.trim(),locality:n.domicile[0].locality.trim(),numExterior:n.domicile[0].numExterior.trim(),numInterior:n.domicile[0].numInterior.trim(),codePostal:n.domicile[0].codePostal.trim(),cdMunicipality:n.domicile[0].cdMunicipality.trim(),municipality:n.domicile[0].municipality.trim(),colony:n.domicile[0].colony.trim(),cdState:n.domicile[0].cdState.trim(),state:n.domicile[0].state.trim(),betweenStreet:n.domicile[0].betweenStreet.trim(),typeOfRoad1:n.domicile[0].typeOfRoad1.trim(),andTheStreet:n.domicile[0].andTheStreet.trim(),typeOfRoad2:n.domicile[0].typeOfRoad2.trim(),behindStreet:n.domicile[0].behindStreet.trim(),typeOfRoad3:n.domicile[0].typeOfRoad3.trim(),particularReferences:n.domicile[0].particularReferences.trim()}],contactInf:[{homePhone:n.contactInf[0].homePhone.trim(),cellPhone:n.contactInf[0].cellPhone.trim(),messagePhone:n.contactInf[0].messagePhone.trim(),email:e.c_email.trim(),email1:n.contactInf[0].email1.trim(),email2:n.contactInf[0].email2.trim(),facebook:""}],tutorData:[{tutorName:n.tutorData[0].tutorName.trim(),firstNameTutor:n.tutorData[0].firstNameTutor.trim(),lastNameTutor:n.tutorData[0].lastaNameTutor.trim(),kinship:n.tutorData[0].kinship.trim(),kinshipType:n.tutorData[0].kinshipType.trim()}],program:[{status:"",modalityParticipation:"",generation:"",originResources:"",projectSEPNumber:"",numberNMDP:"",schoolGrade:"",resultImpactEvaluation:""}]}]},showWait:!0,success:function(){De.scholarshipAnnouncement()}})):$("#c_email2").showError("Los correos no coinciden")}),ae()}}};function ne(a,i,o,r){function e(e){var t=$(Mustache.to_html(e,o));a[r](t),"html"==r&&window.validateControl(a),void 0!==i.html&&(i.html=e),i.onload(t,o)}void 0===r&&(r="html"),i?o?void 0!==i.html?e(i.html):void 0!==i.path&&$.get(i.path,e):console.warn("loadTemplate: data is null ["+i+"]"):console.error("loadTemplate: template is undefined ["+a+"]")}var le,ce,me={success:{onload:oe,html:'<div class="title-gray">{{title}}</div><div class="step-container"><div class="icon-m icon-s"></div><div class="grid-c"><div class="grid-item"><div class="message-modal"><div>{{message}}</div></div></div></div><div class="actionsection"><div class="submtbtn"><span title="Enviar" aria-label="Enviar" class="btn__basic btn_acept"><span aria-hidden="true">Aceptar</span></span></div></div></div>'},error:{onload:oe,html:'<div class="title-gray">{{title}}</div><div class="step-container"><div class="icon-m icon-e"></div><div class="grid-c"><div class="grid-item"><div class="message-modal"><div>{{message}}</div></div></div></div><div class="actionsection"><div class="submtbtn"><span title="Enviar" aria-label="Enviar" class="btn__basic btn_acept"><span aria-hidden="true">Aceptar</span></span></div></div></div>'},notification:{onload:function(e){e.find(".close-button").click(function(){$(this).closest(".notification").slideUp("slow",function(){$(this).remove()})}),e.slideDown("slow")},html:'<div class="notification {{type}}" style="display: none;"><div class="wrapper"><div class="icon"><i class="bbva-icon"></i></div><div class="message"><div class="message__heading">{{title}}</div><span class="message__body">{{message}}</span></div><div class="close-button"><i class="bbva-icon ui-x"></i></div></div></div>'},btnnotification:{onload:function(e){e.find(".btn__addfam").click(function(){var e=$(this).attr("data-group");"bbva"==e?k(["CAT_PARENTESCO-Soporte"],function(){ne($("#modal_generic .body"),se.fambbva,{title:"Agrega la información de tu familiar"})}):"fromhome"==e?k(["CAT_INST_MEDICA","CAT_EDO_CIVIL","CAT_OCUPACION","CAT_TPO_APOYO","CAT_INST_APOYO","CAT_PARENTESCO-Miembro","CAT_MAX_NVL_ESTUDIO"],function(){ne($("#modal_generic .body"),se.family,c.fromhome)}):"awayfromhome"==e&&k(["CAT_OCUPACION","CAT_RESIDENCIA","CAT_PARENTESCO-Miembro"],function(){ne($("#modal_generic .body"),se.efamily,c.awayfromhome)})}),e.slideDown("slow")},html:'<div class="notification {{type}}" style="display: none;"><div class="wrapper"><div class="icon"><i class="bbva-icon"></i></div><div class="message"><div class="message__heading">{{title}}</div><span class="message__body">{{message}}</span></div><div><span title="{{button}}" aria-label="{{button}}" class="btn__basic btn__addfam" data-group="{{section}}"><span aria-hidden="true">{{button}}</span></span></div></div></div>'},shcolarshipdetail:{onload:function(){},html:'<p><i class="bbva-icon ui-gradution-cap"></i>Tipo de apoyo: {{tipo}}</p><p><i class="bbva-icon ui-receipt"></i>Programa o institución: {{programa}}</p><p><i class="bbva-icon ui-ticket"></i>Monto mensual: ${{monto}}</p>'},familymembercard:{onload:function(e,t){var a=e.find(".checkbox.familycardboss");a.checkeable(function(e){$(".checkbox.familycardboss").addClass("disabled"),e.removeClass("disabled"),c.fromhome.members[Number(e.attr("data-member"))].familyBoss="Sí","OK"==c.fromhome.members[Number(e.attr("data-member"))].statusRelated&&(c.fromhome.members[Number(e.attr("data-member"))].statusRelated="Edit")},function(e){$(".checkbox.familycardboss").removeClass("disabled"),c.fromhome.members[Number(e.attr("data-member"))].familyBoss="No","OK"==c.fromhome.members[Number(e.attr("data-member"))].statusRelated&&(c.fromhome.members[Number(e.attr("data-member"))].statusRelated="Edit")}),"Sí"==t.familyBoss&&a.removeClass("disabled").doCheck(),$scTooltip=e.find(".scholarship-tooltip"),_objdata=$scTooltip.attr("data-tooltip"),""!=_objdata?new Tooltip($scTooltip,{placement:"top",html:!0,title:Mustache.to_html(me.shcolarshipdetail.html,JSON.parse(_objdata))}):$scTooltip.remove(),e.find(".btn_editmember").click(function(){var e=jQuery.extend(!0,{},c.fromhome);e.flags={type:"edit",text:"Guardar",memberid:Number($(this).attr("data-member")),group:"fromhome"},e.index=Number($(this).attr("data-member"))+1,k(["CAT_INST_MEDICA","CAT_EDO_CIVIL","CAT_OCUPACION","CAT_TPO_APOYO","CAT_INST_APOYO","CAT_PARENTESCO-Miembro","CAT_MAX_NVL_ESTUDIO"],function(){ne($("#modal_generic .body"),se.family,e)})}),e.find(".btn_deletemember").click(function(){if(_minFam="7"!=u.announcement.scholarshipProgram.id?2:1,c.fromhome.getTotal()>_minFam){if("0"==$(this).attr("data-member"))return void ne($("#modal_generic .body"),me.error,{title:"Lo sentimos, no te puedes eliminar",message:"Es obligatorio que te incluyas"});ne($("#modal_generic .body"),se.conf,{memberid:$(this).attr("data-member"),title:"¿Deseas eliminar a un familiar?",message:"Al eliminarlo ya no se podrá recuperar",onAccept:function(){var e=!1;if("Sí"==c.fromhome.members[this.memberid].familyBoss&&(e=!0),"true"==$e.get(c.fromhome.members[this.memberid],"alreadyExists","")?c.fromhome.members[this.memberid].statusRelated="Delete":c.fromhome.members.splice(this.memberid,1),c.fromhome.total=c.fromhome.getTotal(),$("#n_family").selectOptionId(c.fromhome.getTotal()),$("#nfamilylist").empty(),e)ne($("#modal_generic .body"),se.selectboss,{members:c.fromhome.getMembers()});else{for(var t in c.fromhome.members)c.fromhome.members[t].memberid=t,"Delete"!=c.fromhome.members[t].statusRelated&&ne($("#nfamilylist"),me.familymembercard,c.fromhome.members[t],"append");ie()}}})}else ne($("#modal_generic .body"),me.error,{title:"Lo sentimos, no puedes eliminar",message:"El número mínimo de integrantes es "+_minFam})})},html:'<div class="grid-item card gray familycard animated fadeIn"><p class="title">{{fam_name}} {{fam_appat}} {{fam_apmat}}<i class="bbva-icon ui-profile"></i></p><p class="relationship">{{fam_relationship_des}}</p><div class="separator"></div><p class="checkbox-area"><span class="text inf">Jefe del hogar&nbsp;</span><span class="checkbox familycardboss disabled{{familybossclass}}" data-member="{{memberid}}"><i class="bbva-icon ui-checkmark"></i></span></p><div class="moreinfo"><p class="inf">Edad: <span>{{fam_age}}</span></p><p class="inf">Sexo: <span>{{fam_gender.description}}</span></p><p class="inf">Estado civil: <span>{{fam_civil.description}}</span></p><p class="inf">Grado de estudio: <span>{{fam_schoollevel.description}}</span></p><p class="inf">Asiste a la escuela: <span>{{fam_studing.description}}</span></p><p class="inf">Ocupación: <span>{{fam_ocupation.description}}</span></p><p class="inf">Atención médica: <span>{{fam_medic.description}}</span></p><p class="inf">Ingresos mensuales: <span>${{total_f}} MXN</span></p><p class="inf">Trabajó el último mes: <span>{{fam_worked.description}}</span></p><p class="inf">Recibe otra beca: <span>{{fam_otherschoolarship.description}} <i class="bbva-icon ui-show scholarship-tooltip" data-tooltip="{{infoscolarship}}"></i></span></p></div><div class="centertext"><span title="Modificar" aria-label="Modificar" class="btn__basic btn__clearbg btn_editmember" data-member="{{memberid}}"><i class="bbva-icon ui-edit icon-fix"></i><span aria-hidden="true">Modificar</span></span><span title="Eliminar" aria-label="Eliminar" class="btn__basic btn__clearbg btn_deletemember" data-member="{{memberid}}"><i class="bbva-icon ui-trash icon-fix"></i><span aria-hidden="true">Eliminar</span></span></div></div>'},efamilymembercard:{onload:function(e){e.find(".btn_editemember").click(function(){var e=jQuery.extend(!0,{},c.awayfromhome);e.flags={type:"edit",text:"Guardar",memberid:Number($(this).attr("data-member")),group:"awayfromhome"},e.index=Number($(this).attr("data-member"))+1,k(["CAT_OCUPACION","CAT_RESIDENCIA","CAT_PARENTESCO-Miembro"],function(){ne($("#modal_generic .body"),se.efamily,e)})}),e.find(".btn_deletememberaway").click(function(){ne($("#modal_generic .body"),se.conf,{memberid:$(this).attr("data-member"),title:"¿Deseas eliminar a un familiar?",message:"Al eliminarlo ya no se podrá recuperar",onAccept:function(){for(var e in"true"==c.awayfromhome.members[this.memberid].alreadyExists?c.awayfromhome.members[this.memberid].statusRelated="Delete":c.awayfromhome.members.splice(this.memberid,1),c.awayfromhome.total=c.awayfromhome.getTotal(),$("#extrafamily").selectOptionId(c.awayfromhome.getTotal()),$("#nextrafamilylist").empty(),c.awayfromhome.members)c.awayfromhome.members[e].memberid=e,"Delete"!=c.awayfromhome.members[e].statusRelated&&ne($("#nextrafamilylist"),me.efamilymembercard,c.awayfromhome.members[e],"append");ie()}})})},html:'<div class="grid-item card gray familycard animated fadeIn"><p class="title">{{fam_name}} {{fam_appat}} {{fam_apmat}}<i class="bbva-icon ui-profile"></i></p><p class="relationship">{{fam_relationship_des}}</p><div class="separator"></div><div class="moreinfo"><p class="inf">Ocupación: <span>{{fam_ocupation.description}}</span></p><p class="inf">Vive: <span>{{fam_lives.description}}</span></p><p class="inf">Aporta: <span>${{total_f}} MXN</span></p></div><div class="centertext"><span title="Modificar" aria-label="Modificar" class="btn__basic btn__clearbg btn_editemember" data-member="{{memberid}}"><i class="bbva-icon ui-edit icon-fix"></i><span aria-hidden="true">Modificar</span></span><span title="Eliminar" aria-label="Eliminar" class="btn__basic btn__clearbg btn_deletememberaway" data-member="{{memberid}}"><i class="bbva-icon ui-trash icon-fix"></i><span aria-hidden="true">Eliminar</span></span></div></div>'},familybbvacard:{onload:function(){$("#btn_modify_bbva").click(function(e){e.preventDefault(),membertoedit=c.bbva.member,c.bbva.flag="edit",k(["CAT_PARENTESCO-Soporte"],function(){ne($("#modal_generic .body"),se.fambbva,{title:"Agrega la información de tu familiar"})})})},html:'<div class="grid-item card gray familycard bounce"><p class="title">{{name_fbbva}} {{lastname_fbbva}} {{slastname_fbbva}}<i class="bbva-icon ui-profile"></i></p><p class="relationship">{{relationship.description}}</p><div class="separator"></div><div class="moreinfo"><p class="inf">Puesto: <span>{{workposition_fbbva}}</span></p><p class="inf">Área de trabajo: <span>{{workstation_fbbva}}</span></p></div><br><div class="centertext"><span title="Modificar" aria-label="Modificar" class="btn__basic btn__clearbg" id="btn_modify_bbva"><i class="bbva-icon ui-edit icon-fix"></i><span aria-hidden="true">Modificar</span></span></div></div>'},m_familycard:{onload:te,html:'<div class="grid-item card gray  familycard mod"><p class="title">{{name}} {{lastName}} {{secondLastName}}<i class="bbva-icon ui-profile"></i></p><p class="relationship">{{relationship.description}}</p><div class="separator"></div><div class="read-only"><p>Edad: <span>{{personDetail.age}}</span></p><p>Sexo: <span>{{personDetail.gender.id}}</span></p><p>Estado civil: <span>{{personDetail.maritalStatus.description}}</span></p><p>Grado de estudio: <span>{{personDetail.education.description}}</span></p><p>Asiste a la escuela: <span>{{student}}</span></p><p>Ocupaci&oacute;n: <span>{{personDetail.economicActivity.description}}</span></p><p>Atenci&oacute;n m&eacute;dica: <span>{{personDetail.healthCareEntity.description}}</span></p><p>Ingresos mensuales: <span>{{incomesamount}} MXN</span></p><p>Trabaj&oacute; el &uacute;ltimo mes: <span>{{hasWorked}}</span></p><p>Recibe otra beca: <span>{{isotherG}}</span></p><div style="display: {{fam_otherschoolarship}}"><p>Tipo de beca: <span>{{personDetail.otherGovernmentScholarship.otherGovernmentScholarshipType.description}}</p><p>Programa de beca: <span>{{otherScholarshipProgramDescription}}</p><p>Monto de la beca: <span>{{otherGovernmentScholarshipamount}} MXN</p></div></div></div>'},m_efamilycard:{onload:te,html:'<div class="grid-item card gray  familycard mod"><p class="title">{{name}} {{lastName}} {{secondLastName}}<i class="bbva-icon ui-profile"></i></p><p class="relationship">{{relationship.description}}</p><div class="separator"></div><div class="read-only"><p>Ocupaci&oacute;n: <span>{{personDetail.economicActivity.description}}</span></p><p>Vive: <span>{{personDetail.residencePlace.description}}</span></p><p>Aporta: <span>{{incomesamount}} MXN</span></p></div></div>'},m_bbvafamilycard:{onload:te,html:'<div class="grid-item card gray  familycard mod bounce"><p class="title">{{name}} {{lastName}} {{secondLastName}}<i class="bbva-icon ui-profile"></i></p><p class="relationship">{{relationship.description}}</p><div class="separator"></div><div class="read-only"><p>Puesto: <span>{{personDetail.professionPosition}}</span></p><p>&Aacute;rea de trabajo: <span>{{personDetail.managementUnit}}</span></p></div></div>'}};(le=jQuery).fn.inputable=function(){return le(this).each(function(){t=this;var a=document.createElement("span"),e=document.createElement("div");if(!t.hasAttribute("required")){var i=document.createElement("span");le(i).addClass("is-optional"),t.parentElement.appendChild(i)}if(le(e).addClass("placeholder-wrapper"),t.parentElement.appendChild(e),a.appendChild(document.createTextNode(t.getAttribute("data-placeholder"))),le(a).addClass("placeholder-simulator"),e.appendChild(a),e.appendChild(t),e.appendChild(a),$t=le(t),ele_parent=$t.parents(".form-group"),0===ele_parent.find("span.text-message").length&&ele_parent.append("<p class='i-message'><span class='text-message'>&nbsp;</span></p>"),a.addEventListener("click",function(){le(this).siblings("input").focus()}),t.addEventListener("keyup",function(){if(t=le(this),0===t.val().length)t.removeClass("noempty"),t.removeClass("has-error");else{var e=t.siblings("small");le(e).remove(),le(t).removeError()}}),t.addEventListener("focus",function(){for(var e in _t={top:"5px",fontSize:"12px"},_t)a.style[e]=_t[e]}),t.addEventListener("blur",function(){if(t=le(this),0===t.val().length){for(var e in _t={top:"16px",fontSize:"15px"},_t)a.style[e]=_t[e];t.removeClass("noempty")}else t.removeClass("has-error"),le(t).addClass("noempty")}),0!==t.value.length){for(var o in _t={top:"5px",fontSize:"12px"},_t)a.style[o]=_t[o];le(t).addClass("noempty")}})},le.fn.showError=function(e){return this.each(function(){element=le(this),ele_parent=element.parents(".form-group"),ele_parent.addClass("hasError"),""!=e&&ele_parent.find("span.text-message").html("<i class='bbva-icon ui-warning'></i>"+e)})},le.fn.removeError=function(){return this.each(function(){element=le(this),ele_parent=element.parents(".form-group"),ele_parent.removeClass("hasError"),ele_parent.find("span.text-message").html('<i class="bbva-icon ui-empty"></i>&nbsp;')})},le.fn.clearInput=function(){return this.each(function(){element=le(this),element.removeError(),element.val(""),element.siblings(".placeholder-simulator").css({top:"16px","font-size":"15px"})})},le.fn.setValue=function(e){return this.each(function(){""!=e&&(element=le(this),element.val(e),element.siblings(".placeholder-simulator").css({top:"5px","font-size":"12px"}))})},(ce=jQuery).fn.comboSelect=function(e,t){return this.each(function(){var o=ce(this);"function"==typeof t?o.data("selectCallback",t):"function"!=typeof o.data("selectCallback")&&o.data("selectCallback",function(){}),o.data("options",e),o.data("selected",null),o.find(".list-result").html(Mustache.to_html(ce.fn.comboSelect.template,{items:e}));var r=o.find(".option-select");r.data("open",!1),r.removeAttr("open"),r.find("li").click(function(){var e=ce(this),t=o.data("options");if(null==o.data("selected")||e.attr("data-id")!=o.data("selected").id)for(var a=0;a<t.length;a++){var i=t[a];if(i.id==e.attr("data-id")){o.data("selected",i),o.removeComboError(),o.find(".option-text").removeClass("center"),o.find(".selected-option").text(i.description),o.addClass("noempty"),ce.fn.hideOptions(r),o.data("selectCallback")(i);break}}}),!0!==o.data("inicializate")&&(r.find(".select-title").click(function(){r.data("open")?ce.fn.hideOptions(r):ce.fn.showOptions(r)}),o.data("inicializate",!0),null==ce(document).data("comboselectatached")&&(ce(document).click(function(e){ce(e.target).hasClass("sl")||($formOpened=ce(".form-group-select .option-select[open]"),0!=$formOpened.length&&ce.fn.hideOptions($formOpened))}),ce(document).data("comboselectatached",!0)),void 0!==o.data("promess-select")&&(o.selectOptionId(o.data("promess-select")),o.data("promess-select",void 0)),void 0!==o.data("promess-selectdesc")&&(o.selectOptionDescription(o.data("promess-selectdesc")),o.data("promess-select",void 0)))})},ce.fn.showOptions=function(e){e.hasClass("disabled")||(ce.fn.hideOptions(ce(".form-group-select .option-select[open]").not(e)),e.find("ul").slideDown(),e.data("open",!0),e.attr("open",""),e.find(".select-title .bbva-icon").css({transform:"rotate(180deg)"}))},ce.fn.selectOptionId=function(e){context=this;var t=context.data("options");if(void 0!==t)for(var a=0;a<t.length;a++){var i=t[a];if(i.id==e){context.data("selected",i),context.removeComboError(),context.find(".option-text").removeClass("center"),context.find(".selected-option").text(i.description),context.data("selectCallback")(i);break}}else context.data("promess-select",e)},ce.fn.selectOptionDescription=function(e){context=this;var t=context.data("options");if(void 0!==t)for(var a=0;a<t.length;a++){var i=t[a];if(i.description==e){context.data("selected",i),context.removeComboError(),context.find(".option-text").removeClass("center"),context.find(".selected-option").text(i.description),context.data("selectCallback")(i);break}}else context.data("promess-selectdesc",e)},ce.fn.hideOptions=function(e){e.find("ul").slideUp(),_context=e.closest(".form-group-select"),_context.hasClass("required")&&null==_context.getOptionSelected()&&_context.showComboError(),e.data("open",!1),e.removeAttr("open"),e.find(".select-title .bbva-icon").css({transform:"rotate(0deg)"})},ce.fn.getOptionSelected=function(){return this.data("selected")||null},ce.fn.onSelect=function(e){"function"==typeof e&&this.data("selectCallback",e)},ce.fn.reset=function(){return this.find(".option-text").addClass("center"),this.find(".selected-option").text(""),this.find(".option-select").removeClass("disabled"),this.removeComboError(),this.removeClass("noempty"),this.data("selected",null),this},ce.fn.showComboError=function(e){return this.each(function(){ce(this).addClass("hasError"),e=e||"Selecciona una opción",ce(this).find("span.text-message").html('<i class="bbva-icon ui-warning"></i>'+e)})},ce.fn.removeComboError=function(){return this.each(function(){ce(this).removeClass("hasError"),ce(this).find("span.text-message").html("&nbsp;")})},ce.fn.comboSelect.template='<ul style="display:none">{{#items}}<li data-id="{{id}}">{{description}}</li>{{/items}}</ul>';var de,pe,fe,he=[{id:"01",description:"01"},{id:"02",description:"02"},{id:"03",description:"03"},{id:"04",description:"04"},{id:"05",description:"05"},{id:"06",description:"06"},{id:"07",description:"07"},{id:"08",description:"08"},{id:"09",description:"09"},{id:"10",description:"10"},{id:"11",description:"11"},{id:"12",description:"12"},{id:"13",description:"13"},{id:"14",description:"14"},{id:"15",description:"15"},{id:"16",description:"16"},{id:"17",description:"17"},{id:"18",description:"18"},{id:"19",description:"19"},{id:"20",description:"20"},{id:"21",description:"21"},{id:"22",description:"22"},{id:"23",description:"23"},{id:"24",description:"24"},{id:"25",description:"25"},{id:"26",description:"26"},{id:"27",description:"27"},{id:"28",description:"28"},{id:"29",description:"29"},{id:"30",description:"30"},{id:"31",description:"31"}],ue=[{id:"01",description:"Ene",monthcomplete:"ENERO"},{id:"02",description:"Feb",monthcomplete:"FEBRERO"},{id:"03",description:"Mar",monthcomplete:"MARZO"},{id:"04",description:"Abr",monthcomplete:"ABRIL"},{id:"05",description:"May",monthcomplete:"MAYO"},{id:"06",description:"Jun",monthcomplete:"JUNIO"},{id:"07",description:"Jul",monthcomplete:"JULIO"},{id:"08",description:"Ago",monthcomplete:"AGOSTO"},{id:"09",description:"Sep",monthcomplete:"SEPTIEMBRE"},{id:"10",description:"Oct",monthcomplete:"OCTUBRE"},{id:"11",description:"Nov",monthcomplete:"NOVIEMBRE"},{id:"12",description:"Dic",monthcomplete:"DICIEMBRE"}];(de=jQuery).fn.radiobutton=function(e){return this.each(function(){$rad=de(this),null==$rad.data("resetCallback")&&$rad.data("resetCallback",function(){}),null!=e&&$rad.data("checkedCallback",e),$button=$rad.find(".radio"),$rad.append("<p class='i-message'><span class='text-message'>&nbsp;</span></p>"),$button.click(function(){de(this).parents(".radio-buttons").hasClass("disabled")||de.fn.selectRadio(de(this))})})},de.fn.getButtonSelected=function(){return{id:de(this).attr("data-selectedid"),description:de(this).attr("data-selected")}},de.fn.onChecked=function(e){return"function"==typeof e&&this.data("checkedCallback",e),this},de.fn.onRadioReset=function(e){return"function"==typeof e&&this.data("resetCallback",e),this},de.fn.clearRadio=function(){return this.removeRadioError(),this.find(".radio.checked").removeClass("checked"),this.removeAttr("data-selectedid"),this.removeAttr("data-selected"),this.data("resetCallback")(),this},de.fn.showRadioError=function(e){return de(this).addClass("hasError"),de(this).find("span.text-message").html('<i class="hasError bbva-icon ui-warning"></i>'+e),this},de.fn.removeRadioError=function(){return de(this).removeClass("hasError"),de(this).find("span.text-message").html("&nbsp;"),this},de.fn.selectRadioId=function(e){return de.fn.selectRadio(de(this).find("[data-id='"+e+"']")),this},de.fn.selectRadio=function(e){if(!e.hasClass("checked")){$rad_p=e.closest(".radio-section"),$buttons=$rad_p.find(".radio"),$buttons.removeClass("checked"),e.addClass("checked");var t={id:e.attr("data-id"),description:e.closest(".radio-button").find(".radio-label").text()};$rad_p.attr("data-selectedid",t.id),$rad_p.attr("data-selected",t.description),$rad_p.removeRadioError(),null!=$rad_p.data("checkedCallback")&&$rad_p.data("checkedCallback")(t)}return this},(pe=jQuery).fn.checkeable=function(e,t){return this.each(function(){"function"!=typeof e&&(e=function(){}),"function"!=typeof t&&(t=function(){}),pe(this).data("checkcallback",e),pe(this).data("uncheckcallback",t),pe(this).click(function(){pe(this).hasClass("disabled")||(pe(this).hasClass("checked")?(pe(this).removeClass("checked"),pe(this).data("uncheckcallback")(pe(this))):(pe(this).removeCheckboxError(),pe(this).addClass("checked"),pe(this).data("checkcallback")(pe(this))))})})},pe.fn.isChecked=function(){return pe(this).hasClass("checked")},pe.fn.doCheck=function(){return this.each(function(){pe(this).addClass("checked"),pe(this).data("checkcallback")(pe(this))})},pe.fn.unCheck=function(){return this.each(function(){pe(this).removeClass("checked")})},pe.fn.showCheckBoxError=function(){pe(this).addClass("error")},pe.fn.removeCheckboxError=function(){pe(this).removeClass("error")},pe.fn.ckeckCallback=function(e,t){return this.each(function(){"function"!=typeof e&&(e=function(){}),"function"!=typeof t&&(t=function(){}),pe(this).data("checkcallback",e),pe(this).data("uncheckcallback",t)})},(fe=jQuery).fn.applyList=function(o,e){o.find(".list-result").html(Mustache.to_html(fe.fn.searchList.templates[o.attr("data-template")],e)),o.find(".list-result")[0].scrollTo(0,0),o.find(".result-item").click(function(e){o.find(".result-item").not(this).removeClass("selected");for(var t=o.data("items"),a=0;a<t.items.length;a++){var i=t.items[a];if(i[t.filterid]==fe(this).attr("data-id")){o.data("selected",i),o.find(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;"),o.find("input[name='filter']").val(i[t.filtertext]).removeError(),o.find(".list-result").slideUp(),o.data("selectCallback")(i);break}}fe(this).addClass("selected")})},fe.fn.searchList=function(e,i){return this.each(function(){var t=fe(this);"function"==typeof i?t.data("selectCallback",i):"function"!=typeof t.data("selectCallback")&&t.data("selectCallback",function(){}),t.data("items",e),t.data("selected",null),fe.fn.applyList(t,e);var a=t.find("input[name='filter']");a.clearInput(),t.find(".list-result").slideDown(),null==t.data("search-atached")&&(a.focus(function(e){e.preventDefault(),t.find(".list-result").slideDown(),fe.fn.filterList(t,fe(this).val())}),a.blur(function(e){null!=t.data("selected")&&(t.find(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;"),t.find("input[name='filter']").val(t.data("selected")[t.data("items").filtertext]).removeError(),t.find(".list-result").slideUp())}),a.keyup(function(e){fe.fn.filterList(t,a.val())})),t.data("search-atached",!0),void 0!==t.data("promess-select")&&(t.selectFromList(t.data("promess-select")),t.data("promess-select",void 0))})},fe.fn.selectFromList=function(i){return this.each(function(){var e=fe(this);if(_allitems=e.data("items"),"undefined"!=typeof _allitems)for(var t=0;t<_allitems.items.length;t++){var a=_allitems.items[t];if(a[_allitems.filterid]==i){e.data("selected",a),e.find(".placeholder-simulator").attr("style","top: 5px; font-size: 12px;"),e.find("input[name='filter']").val(a[_allitems.filtertext]).removeError(),e.find(".list-result").slideUp(),e.data("selectCallback")(a);break}}else e.data("promess-select",i)})},fe.fn.unselect=function(){return this.each(function(){var e=fe(this);e.data("selected",null),e.find("input[name='filter']").clearInput()})},fe.fn.filterList=function(e,t){var a={items:[]},i=new RegExp(fe.fn.escapeRegExp(fe.fn.removeAcute(t)),"i"),o=e.data("items");a.items=fe.map(o.items,function(e){if(i.test(fe.fn.removeAcute(e[o.filtertext])))return e}),fe.fn.applyList(e,a)},fe.fn.getSelected=function(){return(context=this).data("selected")||null},fe.fn.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},fe.fn.removeAcute=function(e){for(var t=[{i:"á",o:"a"},{i:"é",o:"e"},{i:"í",o:"i"},{i:"ó",o:"o"},{i:"ú",o:"u"}],a=e.toLowerCase(),i=0;i<t.length;i++){var o=t[i];a=a.replace(o.i,o.o)}return a},fe.fn.searchList.templates={simple:'{{#items}}<div class="result-item" data-id="{{description}}"><div class="item-title"><i class="bbva-icon bbva-icon__2_027_place"></i>{{description}}</div></div>{{/items}}',fulldetail:'{{#items}}<div class="result-item" data-id="{{keyWorkplace}}"><div class="item-title"><i class="bbva-icon bbva-icon__5_002_build"></i>{{schoolOficialName}}</div><div class="item-details"><p><span class="tagname">Tipo:</span> {{schoolAcronym}}</p><p><span class="tagname">CCT:</span> {{keyWorkplace}}</p><p><span class="tagname">Dirección:</span> {{schoolAddress}}</p><p><span class="tagname">Localidad:</span></i> {{location}}</p></div></div>{{/items}}'};var be,_e,ge={CURP:{regEx:/^[A-Z]{1}[AEIOUX]{1}[A-Z]{2}[0-9]{2}(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])[HM]{1}(AS|BC|BS|CC|CS|CH|CL|CM|DF|DG|GT|GR|HG|JC|MC|MN|MS|NT|NL|OC|PL|QT|QR|SP|SL|SR|TC|TS|TL|VZ|YN|ZS|NE)[B-DF-HJ-NP-TV-Z]{3}[0-9A-Z]{1}[0-9]{1}$/,error:"Ingresa una CURP válida"},EMAIL:{regEx:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/,error:"Ingresa un email válido"},CCT:{regEx:/^(0[1-9]|1[0-9]|2[0-9]|3[0-2])[A-Z]{3}[0-9]{4}[A-Z]{1}$/,error:"Por favor valida la clave de tu escuela"},PROM:{regEx:/10$|^\d(\.\d\d?)?$/,error:"Ingresa una calificación entre 0 y 10"},FB:{regEx:/(http|https):\/\/(?:www\.)facebook\.com\/(\b(([\w\-\.])*\/{0,1})|\b(profile\.php\?id=\d.*))$/,error:"Por favor ingresa una url válida"},ZIPCODE:{regEx:/^\d{5}/,error:"Por favor ingresa un código postal válido"},YEAR_50_ACT:{regEx:{test:function(e){return nyear=Number(e),!isNaN(nyear)&&1950<=e&&e<=(new Date).getFullYear()}},error:"Ingresa un año de 1950-actual"},YEAR_80_ACT:{regEx:{test:function(e){return nyear=Number(e),!isNaN(nyear)&&1980<=e&&e<=(new Date).getFullYear()}},error:"Ingresa un año de 1980-actual"},YEAR_MIN_80:{regEx:{test:function(e){return nyear=Number(e),!isNaN(nyear)&&1980<=e}},error:"Ingresa un año desde 1980"},FOL:{regEx:/^[0-9]{2}[127][0-9]{8}$/},FUN:{regEx:/^FUN[0-9]{8}$/}},ve=[{selector:"input.form-control,textarea.form-control",invalid:function(e){return e.prop("required")&&(""==e.val().trim()||e.parents(".form-group").hasClass("hasError"))},saveValue:function(e,t){_id=e.attr("id"),t[_id]=void 0!==e.inputmask?e.inputmask("unmaskedvalue"):e.val()},resetValue:function(e){e.clearInput()},showError:function(e){e.parents(".form-group").hasClass("hasError")||e.showError("Campo obligatorio")}},{selector:".form-group-select",invalid:function(e){return e.hasClass("required")&&null==e.getOptionSelected()},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.getOptionSelected()},resetValue:function(e){e.reset()},showError:function(e){e.showComboError("Selecciona una opción")}},{selector:".radio-section",invalid:function(e){return e.hasClass("required")&&null==e.getButtonSelected().id},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.getButtonSelected()},resetValue:function(e){e.clearRadio()},showError:function(e){e.showRadioError("Selecciona una opción")}},{selector:".checkbox",invalid:function(e){return e.hasClass("required")&&!e.isChecked()},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.isChecked()},resetValue:function(e){e.unCheck()},showError:function(e){e.showCheckBoxError("")}},{selector:".list-filter-result",invalid:function(e){return!1},saveValue:function(e,t){_id=e.attr("id"),t[_id]=e.getSelected()},resetValue:function(e){e.unselect()},showError:function(e){}}];function ye(e,t){var a=e.attr(t);return void 0!==a&&!1!==a}be=$(document),(_e=window).validateControl=function(e){e.find("input[type='text']").inputable(),e.find("textarea").inputable(),e.find(".radio-section").radiobutton(),e.find(".uppercase").keyup(function(e){$(this).val($(this).val().replace(/á/gi,"A").replace(/é/gi,"E").replace(/í/gi,"I").replace(/ó/gi,"O").replace(/ú/gi,"U").toUpperCase())}),e.find(".letters").keypress(function(e){return 97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90||0==e.charCode||32==e.charCode||45==e.charCode||46==e.charCode||209==e.charCode||241==e.charCode||225==e.charCode||233==e.charCode||237==e.charCode||243==e.charCode||250==e.charCode||193==e.charCode||201==e.charCode||205==e.charCode||211==e.charCode||218==e.charCode||220==e.charCode||252==e.charCode}),e.find(".alphanumeric").keypress(function(e){return 97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90||48<=e.charCode&&e.charCode<=57||0==e.charCode||32==e.charCode}),e.find(".letnum").keypress(function(e){return 97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90||0==e.charCode||32==e.charCode||45==e.charCode||46==e.charCode||209==e.charCode||241==e.charCode||225==e.charCode||233==e.charCode||237==e.charCode||243==e.charCode||250==e.charCode||193==e.charCode||201==e.charCode||205==e.charCode||211==e.charCode||218==e.charCode||220==e.charCode||252==e.charCode||48<=e.charCode&&e.charCode<=57}),e.find(".decimals").keypress(function(e){return 48<=e.charCode&&e.charCode<=57||46==e.charCode}),e.find(".numbers").keypress(function(e){return 48<=e.charCode&&e.charCode<=57}),e.find(".numg").keypress(function(e){return 48<=e.charCode&&e.charCode<=57||45==e.charCode||97<=e.charCode&&e.charCode<=122||65<=e.charCode&&e.charCode<=90}),e.find("input[data-regex]").not("input[data-confirm]").blur(function(){_$this=$(this),_regex=$(this).attr("data-regex"),_thisval=$(this).val(),""==_thisval||ge[_regex].regEx.test(_thisval)?_$this.removeError():_$this.showError(ge[_regex].error)}),e.find("input[required]").attr("data-required",!0),e.find("input[data-confirm]").each(function(){confirm_element=$(this),main_element=$(confirm_element.attr("data-confirm")),main_element.keyup(function(){$confirm_element=$('[data-confirm="#'+$(this).attr("id")+'"]'),""!=$(this).val()?(ye($(this),"data-required")||$(this).attr("required","required"),ye($confirm_element,"data-required")||($confirm_element.parents(".grid-item").slideDown(),$confirm_element.attr("required",!0))):ye($confirm_element,"data-required")||($confirm_element.parents(".grid-item").slideUp(),$confirm_element.removeAttr("required"),$confirm_element.val(""),$confirm_element.removeError())}),confirm_element.add(main_element).blur(function(){var e,t;t=ye($(this),"data-confirm")?(e=$(this),$(e.attr("data-confirm"))):(e=$('[data-confirm="#'+$(this).attr("id")+'"]'),$(this)),""!=e.val()&&e.val()!=t.val()?(e.showError("Los correos no coinciden"),t.showError("")):""!=t.val()||ye(t,"data-required")?""!=e.val()&&e.val()==t.val()&&(e.removeError(),t.removeError(),ge.EMAIL.regEx.test(t.val())||(t.showError(ge.EMAIL.error),e.showError(ge.EMAIL.error))):(t.removeAttr("required"),t.removeError(),e.removeError(),e.removeAttr("required"))})}),e.find("input.phonenumber").inputmask({mask:"(999) 999-9999",showMaskOnHover:!1}).blur(function(){_phonen=$(this).inputmask("unmaskedvalue").length,0<_phonen&&_phonen<10&&$(this).showError("Ingresa el número completo")}),e.find("input.no-repeat").each(function(){$(this).keyup(function(){var e=$(".no-repeat"),a="",t="",i=$().add($(this)),o=0;$.each(e,function(e,t){a=$().add(t),i.is(a)||i.val()===a.val()&&(i.showError("No se permite número telefónico repetido"),i.addClass("repeated"))});for(var r=0;r<e.length;r++){a=$().add(e[r]);for(var s=o=0;s<e.length;s++)t=$().add(e[s]),a.is(t)||a.hasClass("repeated")&&a.val()!==t.val()&&o++;2===o&&(a.removeError(),a.removeClass("repeated"))}})}),e.find("input.mxnamount").focus(function(){$(this).inputmask("currency",{rightAlign:!1,autoUnmask:!0,allowPlus:!1,allowMinus:!1,integerDigits:"6"})}).blur(function(){$(this).inputmask&&0==$(this).inputmask("unmaskedvalue").length&&$(this).inputmask("remove")}),e.find(".lastnameb").each(function(){$(this).keyup(function(){var e=$().add($(this)),t=e.closest(".grid-container").find('[data-targetdisable="#'+e.attr("id")+'"]');t.addClass("disabled");var a=e.closest(".grid-container").find('[data-targettoggle="#'+t.attr("id")+'"]');""!==e.val()||a.hasClass("checked")||t.removeClass("disabled")})}),e.find("form").each(function(){$form=$(this),$form.find("input.form-control").each(function(){$formelement=this,$formelement.addEventListener("blur",function(){$(this).val($(this).val().trim()),this.required&&0==$(this).val().length&&$(this).showError($(this).attr("data-emptymessage")||"Campo obligatorio")})}),$form.find(".form-group-select").each(function(){$formcombo=$(this),$formcombo.find(".option-select").append("<p class='i-message'><span class='text-message'>&nbsp;</span></p>")}),$form.find(".checkbox").checkeable(),$form.find(".checkbox[data-targettoggle]").each(function(){$(this).ckeckCallback(function(){$($(this).attr("data-targetdisable")).clearInput().prop("disabled",!0).prop("required",!1),$($(this).attr("data-targettoggle")).unCheck().addClass("disabled").data("uncheck",!0),$($(this).attr("data-targetdisable")).setValue("XXXXX")}.bind(this),function(){$($(this).attr("data-targetdisable")).clearInput().prop("disabled",!1).prop("required",!0),""===$($($(this).attr("data-targettoggle")).attr("data-targetdisable")).val()&&$($(this).attr("data-targettoggle")).removeClass("disabled").data("uncheck",!1)}.bind(this))}),$form.find(".e-tooltip-f").each(function(){$etooltip=$(this),new Tooltip($etooltip,{placement:"bottom",trigger:"focus",html:!0,title:$etooltip.attr("data-tooltitle")})}),$form.find(".e-tooltip").each(function(){$etooltip=$(this),new Tooltip($etooltip,{placement:"bottom",html:!0,title:$etooltip.attr("data-tooltitle")})}),$form.find("textarea.form-control").each(function(){$formelement=this,$formelement.addEventListener("blur",function(){$(this).val($(this).val().trim()),this.required&&0==$(this).val().length&&$(this).showError($(this).attr("data-emptymessage")||"Campo obligatorio")})}),$form.find(".btn__submit").click(function(){$(this).hasClass("btn__disabled")||(_$form=$(this).closest("form"),allDataForm=function(e){var t={isValid:!0};for(var a in _$form=$(e).closest("form"),ve)_$form.find(ve[a].selector).each(function(){ve[a].saveValue($(this),t),ve[a].invalid($(this))&&(t.isValid=!1,ve[a].showError($(this)))});return t}(this),formValidations="function"!=typeof _$form.data("validations")||_$form.data("validations")(allDataForm),!_$form.hasClass("notify-on-error")||allDataForm.isValid&&formValidations?(0!=_$form.prev().length&&_$form.prev().hasClass("notification")&&_$form.prev().remove(),"function"==typeof $(this).data("complete")&&$(this).data("complete")(allDataForm)):(_$form.parents(".modal").length?(notifyElem=_$form.find(".actionsection:last").prev(),0!=notifyElem.length&&notifyElem.hasClass("notification")&&notifyElem.remove(),ne(_$form.find(".actionsection:last"),me.notification,{type:"error",title:"Datos obligatorios incompletos",message:"Por favor ingresa todos campos obligatorios"},"before")):(_scrollTo=ye(_$form,"data-notify")?_$form.attr("data-notify"):"Edge"==BrowserDetect.browser?"body":"html",$(_scrollTo).animate({scrollTop:_$form.offset().top-100},2e3,"swing",function(){notifyElem=_$form.prev(),0!=notifyElem.length&&notifyElem.hasClass("notification")&&notifyElem.remove(),ne(_$form,me.notification,{type:"error",title:"Datos obligatorios incompletos",message:"Por favor ingresa todos campos obligatorios"},"before")})),ye(_$form,"data-status")&&($(_$form.attr("data-status")).removeClass("complete"),$(_$form.attr("data-status")).addClass("incomplete"),$(_$form.attr("data-status")).html('<i class="bbva-icon ui-warning"></i>Incompleto'))))})})},_e.validateControl(be),_e.fillForm=function(a,e){$.each(e,function(e,t){$3l=a.find("#"+e),$3l.is("input")||$3l.is("textarea")?($3l.clearInput(),$3l.setValue(t)):$3l.hasClass("form-group-select")?($3l.reset(),null!=t&&$3l.selectOptionId("object"==typeof t?t.id:t)):$3l.hasClass("radio-section")?($3l.clearRadio(),$3l.selectRadioId("object"==typeof t?t.id:t)):$3l.hasClass("list-filter-result")?($3l.unselect(),$3l.selectFromList(t)):$3l.hasClass("checkbox")?($3l.unCheck(),t&&$3l.doCheck()):console.log("fillForm: Element "+e+" doesn't exists in form",a)})},_e.resetForm=function(e){for(var t in ve)e.find(ve[t].selector).each(function(){ve[t].resetValue($(this))})};var $e={get:function(e,t,a){var i=null==e?void 0:function(e,t){for(var a=t.split("."),i=0;i<a.length;i++){if(wasArray={flag:!1,value:0},-1!=a[i].indexOf("[")&&(wasArray.flag=!0,wasArray.value=a[i].substring(a[i].indexOf("[")+1,a[i].indexOf("]")),a[i]=a[i].split("[")[0]),!e||!e.hasOwnProperty(a[i]))return;e=wasArray.flag?e[a[i]][wasArray.value]:e[a[i]]}return"string"==typeof e?e.trim():e}(e,t);return void 0===i?a:i}};$("#btn-exit").click(function(){E(),setTimeout(function(){L({service:"TERMINATE_SESSION",async:!1,data:{},success:function(e){console.log("se cerró sesión en back end")},error:function(e){console.log("no se cerró sesión en back end")}}),$.ajax({type:"GET",dataType:"html",url:window.location.origin+"/pkmslogout.form",async:!0,success:function(){_()},error:function(){_()}})},400)});var Ce=function(e){if(!e.hasClass("animated"))if($content=$("#"+e.attr("data-target")),e.addClass("animated"),e.hasClass("is-open"))e.removeClass("is-open"),$content.slideUp(400,function(){e.removeClass("animated")});else{for(var t=0;t<$(".accordion .step-header").length;t++)element=$(".accordion .step-header")[t],$(element).hasClass("is-open")&&$(element).attr("data-target")!=e.attr("data-target")&&($idTemp=$("#"+$(element).attr("data-target")),$idTemp.slideUp());$(".accordion .step-header").not("data-target",e.attr("data-target")).removeClass("is-open"),e.addClass("is-open"),$content.slideDown(400,function(){e.removeClass("animated")})}};$(".accordion .step-header").click(function(e){ye($(this),"data-catalog")&&"false"==$(this).attr("data-loaded")?(_lcatalog=$(this).attr("data-catalog"),k(De.moduleCatalog[_lcatalog].list(),De.moduleCatalog[_lcatalog].callback)):Ce($(this))}),$("#email, #email2, #email3").blur(function(){""!=$("#email").val()&&$("#email").val()==$("#email2").val()&&$("#email2").showError("No se permiten correos duplicados"),""!=$("#email2").val()&&$("#email2").val()==$("#email3").val()&&$("#email3").showError("No se permiten correos duplicados"),""!=$("#email").val()&&$("#email").val()==$("#email3").val()&&$("#email3").showError("No se permiten correos duplicados")}),$("#dbirthdate").comboSelect(he),$("#mbirthdate").comboSelect(ue),fn_showAddFam=function(e,t){_scrollTo=ye(e,"data-notify")?e.attr("data-notify"):"html",$(_scrollTo).animate({scrollTop:e.prev().offset().top-100},1e3,"swing",function(){notifyElem=e.prev(),0!=notifyElem.length&&notifyElem.hasClass("notification")&&notifyElem.remove(),ne(e,me.btnnotification,{type:"error",title:"Datos obligatorios incompletos",message:"Por favor ingresa la información de tu familiar",button:"Agregar familiar",section:t},"before")})};var Se,Te=function(e,t,a){t=t||[],$("#"+e).comboSelect(t,a)};function Ee(e,t,a){_title=t||"Datos guardados",_message=a||"Tus datos se han almacenado correctamente, gracias",$elstatus=e.siblings(".step-header").find(".step-status"),e.siblings(".step-header").removeClass("is-open"),e.slideUp(),ne($("#modal_generic .body"),me.success,{title:_title,message:_message})}function Ae(e,t){$elstatus=e.siblings(".step-header").find(".step-status"),"complete"==t?($elstatus.removeClass("incomplete"),$elstatus.addClass("complete"),$elstatus.html('<i class="bbva-icon ui-checkmark-filled"></i>Completo')):($elstatus.removeClass("complete"),$elstatus.addClass("incomplete"),$elstatus.html('<i class="bbva-icon ui-warning"></i>Incompleto'))}function we(){$("#reportschool_sec").slideDown(),$("#help_sh").slideDown("slow",function(){$("#help_sh").click(),a.show(),$("#st_btn_reportschool").click(function(){state_id=$("#state_s").getOptionSelected().id,mun_id=$("#municipalities_s").getOptionSelected().id,De.getCatalog("CAT_TPO_ESCUELA-"+state_id+"-"+mun_id+"-"+u.announcement.scholarshipProgram.id,function(){ne($("#modal_generic .body"),se.school,{})}),$("#help_sh").click(),a.hide()}),$("#st_btn_cancel").click(function(){$("#help_sh").click(),a.hide()})})}$("#dsclass").comboSelect(he),$("#msclass").comboSelect(ue),$("#btn_fb").click(function(e){e.preventDefault(),ne($("#modal_generic .body"),se.fb,{title:"Para vincular tu facebook, realiza los siguiente pasos"})}),$("#btn_savegd").data("complete",function(e){Ie($("#mbirthdate").getOptionSelected().id+"/"+$("#dbirthdate").getOptionSelected().description+"/"+$("#ybirthdate").val())?L({service:"MODIF_UPLOADSCHOLAR",data:{userCurrent:"ALUMNO",registerType:"2",student:[{studentId:"",scholarUser:ivUser,programType:u.announcement.scholarshipProgram.id,statusDispersion:"",originRegion:"",schoolCycle:"",cdAssignedCR:"",assignedCR:"",scholarNumber:"",accountNumber:"",folioPhoto:"",name:e.username,firstName:e.firstname,lastName:e.lastname,CURP:e.curp,scholarBirthdate:e.dbirthdate.description+"-"+e.mbirthdate.id+"-"+e.ybirthdate,gender:e.gender.id,schoolData:[{duration:"",turn:"",typeCareer:"",nameCareer:"",area:"",school:[{cdState:"",state:"",cdMunicipality:"",municipality:"",CCT:"",control:"",initials:"",type:"",name:"",domicile:""}]}],domicile:[{street:e.street,locality:"",numExterior:e.outdoornum,numInterior:e.interiornum,codePostal:e.zipcode,cdMunicipality:e.municipalities.id,municipality:e.municipalities.description,colony:e.neighborhood,cdState:e.state.id,state:e.state.description,betweenStreet:"",typeOfRoad1:"",andTheStreet:"",typeOfRoad2:"",behindStreet:"",typeOfRoad3:"",particularReferences:e.references}],contactInf:[{homePhone:e.phone,cellPhone:e.cellphone,messagePhone:e.errandsphone,email:e.email,email1:e.email2,email2:e.email3,facebook:""}],tutorData:[{tutorName:e.tutorname,firstNameTutor:e.tutorlastname,lastNameTutor:e.tutorslastname,kinship:e.relationship.description,kinshipType:e.o_relationship}],program:[{status:"",modalityParticipation:"",generation:"",originResources:"",projectSEPNumber:"",numberNMDP:"",schoolGrade:"",resultImpactEvaluation:""}]}]},showWait:!0,success:function(){De.general(function(){Ee($("#general-data"))})}}):(l=!1,$("#dbirthdate").showComboError("Fecha inválida"),$("#mbirthdate").showComboError("Fecha inválida"),$("html").animate({scrollTop:$("#dbirthdate").offset().top-200},1e3,"swing","before"))}),$("#formschdata").data("validations",function(e){return""!=e.schoolname||""==e.cct&&""==e.localities&&null==e.schoolT||($("#snerror").show(),!1)}),$("#btn_savesd").data("complete",function(e){var t="",a=!1;if("7"==u.announcement.scholarshipProgram.id&&(t=e.msclass.id+"/"+e.dsclass.description+"/"+e.ysclass,a=!0),a&&!Ie(t))return $("#dsclass").showComboError("Fecha inválida"),$("#msclass").showComboError("Fecha inválida"),void $("html").animate({scrollTop:$("#dsclass").offset().top-200},1e3,"swing","before");L({service:"UPDATE_SCHOLARINF",data:{id:ivUser,scholarshipProgram:[{id:u.announcement.scholarshipProgram.id}],average:e.promgen,schooling:{schoolName:e.schoolname,location:{state:{id:e.state_s.id},municipality:{id:e.municipalities_s.id}},profession:{area:e.career_area,subArea:e.career_subarea,careerName:e.program_career,modality:e.modality,type:e.type_s,scholarShift:e.turn,duration:e.duration,classesStartDate:a?e.dsclass.description+"-"+e.msclass.id+"-"+e.ysclass:""},newLocation:{state:{id:$e.get(e,"state_m.id",""),name:$e.get(e,"state_m.description","")},municipality:{id:$e.get(e,"municipalities_m.id",""),name:$e.get(e,"municipalities_m.description","")}}},operation:{searchType:"CCT",searchDescription:e.schoolslist.keyWorkplace,userCurrent:"ALUMNO",keyWorkplace:e.schoolslist.keyWorkplace},changeAddress:!!a&&"SI"==e.change_h.id,expenses:{mounthlyRent:a&&""!=e.payment_rent?N(e.payment_rent,!0).replace(/,/g,"").replace(/\$/g,""):"",isPayRent:!!a&&"SI"==e.rent.id,transportationAmount:a&&""!=e.trans?N(e.trans,!0).replace(/,/g,"").replace(/\$/g,""):""}},showWait:!0,success:function(){De.schoolData(function(){Ee($("#schoolar-data")),A()})}})}),$("#btn_savesoc").data("complete",function(e){var t=!1,a=c.fromhome.getMembers();if("7"!=u.announcement.scholarshipProgram.id&&c.fromhome.getTotal()<2)fn_showAddFam($("#fam_members"),"fromhome");else{for(var i in a)if("Sí"==a[i].familyBoss){t=!0;break}if(!t&&0<c.fromhome.getTotal())ne($("#modal_generic .body"),se.selectboss,{members:a});else{var o=$("#social-data").find(".notification.error");if(0===o.length){for(allFamilies=[],_i=0;_i<c.fromhome.members.length;_i++)c_family=c.fromhome.members[_i],"OK"!=c_family.statusRelated&&(n_data={id:""==$e.get(c_family,"relatedid","0")?"0":$e.get(c_family,"relatedid","0"),name:c_family.fam_name,lastName:c_family.fam_appat,secondLastName:c_family.fam_apmat,statusRelatedPersonsInformation:c.unregistered?"Add":c_family.statusRelated,relationship:{id:c_family.fam_relationship.id,otherRelationshipDescription:c_family.fam_o_relationship},personDetail:{personType:"PERSONS_LIVE_HOME",isHeadOfHousehold:"Sí"==c_family.familyBoss?"true":"false",gender:{id:c_family.fam_gender.id},age:c_family.fam_age,maritalStatus:{id:c_family.fam_civil.id},education:{id:c_family.fam_schoollevel.id},isStudent:c_family.fam_studing.id,economicActivity:{id:c_family.fam_ocupation.id},healthCareEntity:{id:c_family.fam_medic.id,otherHealthCareEntity:c_family.fam_omedic},incomes:[{amount:c_family.total_f.toString().replace(/,/g,"").replace(/\$/g,""),currency:"MXN"}],hasWorkedLastMonth:c_family.fam_worked.id}},"0"==c_family.fam_otherschoolarship.id&&(n_data.personDetail.otherGovernmentScholarship={id:c_family.fam_programschoolarship.id,otherScholarshipProgramDescription:"6"!=c_family.fam_programschoolarship.id?c_family.fam_programschoolarship.description:c_family.sprogramname,otherGovernmentScholarshipType:{id:c_family.fam_kindschoolarship.id},incomes:[{amount:c_family.total_sf.toString().replace(/,/g,"").replace(/\$/g,""),currency:"MXN"}]}),allFamilies.push(n_data));for(_i=0;_i<c.awayfromhome.members.length;_i++)c_family=c.awayfromhome.members[_i],"OK"!=c_family.statusRelated&&(n_data={id:""==$e.get(c_family,"relatedid","0")?"0":$e.get(c_family,"relatedid","0"),name:c_family.fam_name,lastName:c_family.fam_appat,secondLastName:c_family.fam_apmat,statusRelatedPersonsInformation:$e.get(c_family,"statusRelated","Add"),relationship:{id:c_family.fam_relationship.id,otherRelationshipDescription:c_family.fam_o_relationship},personDetail:{personType:"NOT_LIVE_HOME_ECONOMIC_SUPPORT",residencePlace:{id:c_family.fam_lives.id},incomes:[{amount:c_family.total_f.toString().replace(/,/g,"").replace(/\$/g,""),currency:"MXN"}],economicActivity:{id:c_family.fam_ocupation.id}}},allFamilies.push(n_data));if(c_family=c.bbva.member,0<Object.keys(c.bbva.member).length&&"OK"!=c_family.statusRelated&&(n_data={id:""==$e.get(c_family,"relatedid","0")?"0":$e.get(c_family,"relatedid","0"),name:c_family.name_fbbva,lastName:c_family.lastname_fbbva,secondLastName:c_family.slastname_fbbva,statusRelatedPersonsInformation:c_family.statusRelated,relationship:{id:c_family.relationship.id,otherRelationshipDescription:c_family.relationship_b_o},personDetail:{personType:"RELATIVE_WORKS_BBVA",professionPosition:c_family.workposition_fbbva,managementUnit:c_family.workstation_fbbva}},allFamilies.push(n_data)),0==allFamilies.length)return;L({service:c.unregistered?"CREATE_SOCINF":"UPDATE_SOCINF",data:{relatedPersons:allFamilies},hasUrlParam:!0,urlParam:{scholarId:ivUser},showWait:!0,success:function(){De.sociodemographic(function(){Ee($("#social-data"))})},error:function(e){200==$e.get(e,"status",0)?De.sociodemographic(function(){Ee($("#social-data"))}):G(e)}})}else $("html").animate({scrollTop:o.offset().top-100},2e3,"swing")}}}),$("#btn_savehd").data("complete",function(e){L({service:"UPDATE_HOMEINF",data:{operation:{userCurrent:"ALUMNO"},id:ivUser,homeInformation:{roomsNumber:e.roomsNumber.id,bedroomsNumber:e.bedroomsNumber.id,bathroomsNumber:e.bathroomsNumber.id,drainageType:e.drainageType,homeService:{waterServicesType:e.waterServicesType,lightServicesType:e.lightServicesType},wallMaterialsType:e.wallMaterialsType,cookingFuelType:e.cookingFuelType,ceilingMaterialsType:e.ceilingMaterialsType,floorMaterialsType:e.floorMaterialsType,belongings:{carsNumber:e.carsNumber.id,hasInternet:"SI"==e.hasInternet.id,hasComputer:"SI"==e.hasComputer.id,hasMicrowave:"SI"==e.hasMicrowave.id,hasPayTV:"SI"==e.hasPayTV.id,hasWashingMachine:"SI"==e.hasWashingMachine.id,hasMotorcycle:"SI"==e.hasMotorcycle.id}}},hasUrlParam:!0,urlParam:{scholarId:ivUser},showWait:!0,success:function(){De.home(function(){Ee($("#home-data"))})}})}),$("#btn_saveld").data("complete",function(){var e=[];$("#legal1, #legal2, #legal3").each(function(){$(this).isChecked()&&e.push({id:$(this).attr("data-legal-id"),isAccepted:"Y",consecutive:$(this).attr("data-legal-consecutive"),moduleId:31})}),L({service:"UPDATE_LEGAL",data:{legalDisclaimers:e,scholar:{id:ivUser},scholarshipProgram:{id:u.announcement.scholarshipProgram.id}},showWait:!0,success:function(){De.legalDisclaimer(function(){Ee($("#legal-data"))})}})}),$(".modal .icon-close").click(function(){$(this).parents(".modal").removeAttr("open"),w()}),new Tooltip($("#ybirthdate").parent(".placeholder-wrapper"),{placement:"bottom",trigger:"focus",html:!0,closeOnClickOutside:!0,title:"Por ejemplo: 2001"}),new Tooltip($("#ysclass").parent(".placeholder-wrapper"),{placement:"bottom",trigger:"focus",html:!0,closeOnClickOutside:!0,title:"Por ejemplo: 2001"}),$("#search_by").onChecked(function(e){switch(null==Se&&(Se=setTimeout(we,12e4)),$(".school-list").hide(),$("#schoolT").removeClass("required"),$("#schoolslist").unselect(),$("#btn_locality, #btn_type, #btn_cct").addClass("btn__disabled"),$("#cct, #localities").removeAttr("required"),$(".school-list").find(".list-result").addClass("disabled"),$("#schoolname").prop("disabled",!0),$(".school-list").show(),e.id){case"CCT":$("#cct").clearInput(),$("#cct").attr("required","required");break;case"LOC":$("#localities").attr("required","true"),state_id=$("#state_s").getOptionSelected().id,mun_id=$("#municipalities_s").getOptionSelected().id,De.getCatalog("CAT_LOCALIDADES-"+state_id+"-"+mun_id+"-"+u.announcement.scholarshipProgram.id,function(){$("#localitieslist").searchList({filterid:"description",filtertext:"description",items:h["CAT_LOCALIDADES-"+$("#state_s").getOptionSelected().id+"-"+$("#municipalities_s").getOptionSelected().id+"-"+u.announcement.scholarshipProgram.id]},function(e){$("#btn_locality").removeClass("btn__disabled")})});break;case"TYP":$("#schoolT").reset(),state_id=$("#state_s").getOptionSelected().id,mun_id=$("#municipalities_s").getOptionSelected().id,De.getCatalog("CAT_TPO_ESCUELA-"+state_id+"-"+mun_id+"-"+u.announcement.scholarshipProgram.id,function(){Te("schoolT",h["CAT_TPO_ESCUELA-"+state_id+"-"+mun_id+"-"+u.announcement.scholarshipProgram.id],function(){$("#btn_type").removeClass("btn__disabled")})})}$(".search-filter .filter:not(.filter_"+e.id.toLowerCase()+")").hide("fast",function(){$(".search-filter .filter_"+e.id.toLowerCase()).show("fast")})}),$(".radio-section.search-by").onRadioReset(function(){$(".school-list").hide(),$("#schoolT").removeClass("required"),$("#schoolslist").unselect(),$("#btn_locality, #btn_type, #btn_cct").addClass("btn__disabled"),$("#cct, #localities").removeAttr("required"),$(".search-filter .filter").hide("fast")}),$("#cct").keyup(function(e){ge.CCT.regEx.test($(this).val().toUpperCase())?$("#btn_cct").removeClass("btn__disabled"):$("#btn_cct").addClass("btn__disabled")}),$(".btn_reportschool").click(function(){ne($("#modal_generic .body"),se.school,{})}),$("#btn_locality, #btn_type, #btn_cct").click(function(){if($("#snerror").hide(),!$(this).hasClass("btn__disabled")){switch(searchType="",value="",this.id){case"btn_locality":searchType="location",value=$("#localities").val();break;case"btn_type":searchType="schoolAcronym",value=$("#schoolT").getOptionSelected().description;break;case"btn_cct":searchType="keyWorkplace",value=$("#cct").val()}(Ne={region:"",state:$("#state_s").getOptionSelected().description,municipality:$("#municipalities_s").getOptionSelected().description,location:"",schoolType:"",programScholarshipId:u.announcement.scholarshipProgram.id,keyWorkplace:"",schoolOficialName:"",schoolAcronym:"",completeInformation:2,paginationIn:[{paginationKey:"1",pageSize:"100"}]})[searchType]=value,f=[],ke(),$(".school-list").slideDown("slow",function(){$(".school-list").find(".list-result").removeClass("disabled"),$("#schoolname").prop("disabled",!1),$("#schoolslist").onSelect(function(){clearTimeout(Se),Se=void 0})})}});var Ne,Oe=function(e){"1"==e.paginationOut[0].hasMoreData&&(Ne.paginationIn[0].paginationKey=e.paginationOut[0].paginationKey,ke()),$("#schoolslist").searchList({filterid:"keyWorkplace",filtertext:"schoolOficialName",items:f})};function ke(){L({service:"GET_SCHOOLS",data:Ne,showWait:!0,success:J,finallySuccess:Oe,error:function(e){"01229001"==$e.get(e,"responseJSON.code","")?0<f.length?$("#schoolslist").searchList({filterid:"keyWorkplace",filtertext:"schoolOficialName",items:f}):($("#schoolslist").searchList({filterid:"keyWorkplace",filtertext:"schoolOficialName",items:f}),ne($("#modal_generic .body"),me.error,{title:"No se encontraron escuelas",message:"No se encontraron resultados de escuelas con los filtros ingresados"})):G(e)}})}function Ie(e){var t=e[0]+e[1],a=new Date(e);return parseInt(t)==parseInt(a.getMonth()+1)}Se=void 0,$("#n_family").onSelect(function(e){if(nfam=Number(e.id),nfam!=c.fromhome.getTotal())if(c.fromhome.total=nfam,c.fromhome.flags={type:"add",text:"Continuar"},nfam<c.fromhome.getTotal()){var t=c.fromhome.getMembers();t.splice(0,1),ne($("#modal_generic .body"),se.deletefam,{title:"¿Deseas eliminar algún familiar?",message:"Selecciona el familiar que deseas eliminar(al eliminarlo ya no se podrá recuperar):",members:t,origin:"family",onAccept:function(){if(nFam=c.fromhome.getTotal(),newNfam=c.fromhome.total,dif=nFam-newNfam,cChecked=$("#list-member").find(".checkbox.checked").length,cChecked>dif)$("#formdeletefam").prev(".notification.error").length&&$("#formdeletefam").prev(".notification.error").remove(),ne($("#formdeletefam"),me.notification,{type:"error",title:"Lo sentimos",message:"Sólo puedes eliminar "+dif+" familiar(es)"},"before");else if(cChecked<dif)$("#formdeletefam").prev(".notification.error").length&&$("#formdeletefam").prev(".notification.error").remove(),ne($("#formdeletefam"),me.notification,{type:"error",title:"Lo sentimos",message:"Debes seleccionar "+dif+" familiar(es) o cancelar"},"before");else if(cChecked==dif){indexR=$("#list-member").find(".checkbox.checked"),bossFamilyDeleted=!1;for(var e=indexR.length-1;0<=e;e--){var t=$(indexR[e]).attr("data-index");"Sí"==c.fromhome.members[Number(t)].familyBoss&&(bossFamilyDeleted=!0),"true"==$e.get(c.fromhome.members[Number(t)],"alreadyExists","false")?c.fromhome.members[Number(t)].statusRelated="Delete":c.fromhome.members.splice(Number(t),1)}if(bossFamilyDeleted)_famLst={members:c.fromhome.getMembers()},1==_famLst.members.length?(c.fromhome.members[0].familyBoss="Sí","true"==$e.get(c.fromhome.members[0],"alreadyExists","false")&&(c.fromhome.members[0].statusRelated="Edit")):ne($("#modal_generic .body"),se.selectboss,_famLst);else for(var a in ie(),$("#nfamilylist").empty(),c.fromhome.members)c.fromhome.members[a].memberid=a,"Delete"!=c.fromhome.members[a].statusRelated&&ne($("#nfamilylist"),me.familymembercard,c.fromhome.members[a],"append")}},onDecline:function(){$("#n_family").selectOptionId(c.fromhome.getTotal()),ie()}})}else k(["CAT_INST_MEDICA","CAT_EDO_CIVIL","CAT_OCUPACION","CAT_TPO_APOYO","CAT_INST_APOYO","CAT_PARENTESCO-Miembro","CAT_MAX_NVL_ESTUDIO"],function(){ne($("#modal_generic .body"),se.family,c.fromhome)});else $("#fam_members").prev().hasClass("error")&&$("#fam_members").prev().remove()}),$("#extrafamily").comboSelect(function(){_arrFamily=[];for(var e=0;e<10;e++)_arrFamily.push({id:""+e,description:""+e});return _arrFamily.push({id:"10",description:"10 o más"}),_arrFamily}(),function(e){if(nfam=Number(e.id),0==nfam&&0==c.awayfromhome.getTotal())$("#ext_family").prev().hasClass("error")&&$("#ext_family").prev().remove();else if(nfam!=c.awayfromhome.getTotal())c.awayfromhome.total=nfam,c.awayfromhome.flags={type:"add",text:"Continuar"},0===nfam?ne($("#modal_generic .body"),se.conf,{title:"¿Deseas eliminar todos los familiares?",message:"Al eliminarlos ya no se podrán recuperar",onAccept:function(){for($("#ext_family").prev().hasClass("error")&&$("#ext_family").prev().remove(),fam_toDelete=[],t=0;t<c.awayfromhome.members.length;t++)e_fam=c.awayfromhome.members[t],"true"==$e.get(e_fam,"alreadyExists","false")?c.awayfromhome.members[t].statusRelated="Delete":fam_toDelete.push(t);for(_ei=fam_toDelete.length-1;0<=_ei;_ei--)c.awayfromhome.members.splice(fam_toDelete[_ei],1);$("#nextrafamilylist").empty(),ie()},onDecline:function(){$("#extrafamily").selectOptionId(c.awayfromhome.getTotal()),ie()}}):nfam<c.awayfromhome.getTotal()?ne($("#modal_generic .body"),se.deletefam,{title:"¿Deseas eliminar algún familiar?",message:"Selecciona el familiar que deseas eliminar(al eliminarlo ya no se podrá recuperar):",members:c.awayfromhome.getMembers(),origin:"efamily",onAccept:function(){if(nFam=c.awayfromhome.getTotal(),newNfam=c.awayfromhome.total,dif=nFam-newNfam,cChecked=$("#list-member").find(".checkbox.checked").length,cChecked>dif)$("#formdeletefam").prev(".notification.error").length&&$("#formdeletefam").prev(".notification.error").remove(),ne($("#formdeletefam"),me.notification,{type:"error",title:"Lo sentimos",message:"Sólo puedes eliminar "+dif+" familiar(es)"},"before");else if(cChecked<dif)$("#formdeletefam").prev(".notification.error").length&&$("#formdeletefam").prev(".notification.error").remove(),ne($("#formdeletefam"),me.notification,{type:"error",title:"Lo sentimos",message:"Debes seleccionar "+dif+" familiar(es) o cancelar"},"before");else if(cChecked==dif){indexR=$("#list-member").find(".checkbox.checked");for(var e=indexR.length-1;0<=e;e--){var t=$(indexR[e]).attr("data-index");"true"==$e.get(c.awayfromhome.members[Number(t)],"alreadyExists","false")?c.awayfromhome.members[Number(t)].statusRelated="Delete":c.awayfromhome.members.splice(Number(t),1)}for(var a in ie(),$("#nextrafamilylist").empty(),c.awayfromhome.members)c.awayfromhome.members[a].memberid=a,"Delete"!=c.awayfromhome.members[a].statusRelated&&ne($("#nextrafamilylist"),me.efamilymembercard,c.awayfromhome.members[a],"append")}},onDecline:function(){ie(),$("#extrafamily").selectOptionId(c.awayfromhome.getTotal())}}):nfam!=c.awayfromhome.getTotal()&&k(["CAT_OCUPACION","CAT_RESIDENCIA","CAT_PARENTESCO-Miembro"],function(){ne($("#modal_generic .body"),se.efamily,c.awayfromhome)});else for(var t in c.awayfromhome.getTotal()==nfam&&$("#ext_family").prev().hasClass("error")&&$("#ext_family").prev().remove(),$("#nextrafamilylist").empty(),c.awayfromhome.members)"Delete"!=c.awayfromhome.members[t].statusRelated&&ne($("#nextrafamilylist"),me.efamilymembercard,c.awayfromhome.members[t],"append")}),$("#bbvafamily").onChecked(function(e){$("#fam_bbvacard").html(""),"0"==e.id?0==Object.keys(c.bbva.member).length?(c.bbva.flag="create",k(["CAT_PARENTESCO-Soporte"],function(){ne($("#modal_generic .body"),se.fambbva,{title:"Modifica la información de tu familiar"})})):("true"==$e.get(c.bbva.member,"alreadyExists","false")?"Delete"==$e.get(c.bbva.member,"statusRelated","")&&(c.bbva.member.statusRelated="Edit"):c.bbva.member.statusRelated="Add",c.bbva.flag="edit",ne($("#fam_bbvacard"),me.familybbvacard,c.bbva.member),c.bbva.member&&$("#bbva_employee").prev(".notification.error").length&&$("#bbva_employee").prev(".notification.error").slideUp("slow")):($("#bbva_employee").prev(".notification.error").length&&$("#bbva_employee").prev(".notification.error").remove(),"true"==$e.get(c.bbva.member,"alreadyExists","false")?c.bbva.member.statusRelated="Delete":(c.bbva.member={},c.bbva.flag="create"))}),$("#roomsNumber").comboSelect(function(){_arrNumRooms=[];for(var e=1;e<20;e++)_arrNumRooms.push({id:""+e,description:""+e});return _arrNumRooms.push({id:"20",description:"20 o más"}),_arrNumRooms}()),$("#bedroomsNumber").comboSelect(function(){_arrNumRooms=[];for(var e=0;e<4;e++)_arrNumRooms.push({id:""+e,description:""+e});return _arrNumRooms.push({id:"4",description:"4 o más"}),_arrNumRooms}()),$(".o_two").comboSelect(function(){_arr_0_2=[];for(var e=0;e<2;e++)_arr_0_2.push({id:""+e,description:""+e});return _arr_0_2.push({id:"2",description:"2 o más"}),_arr_0_2}()),$(".r-options").onChecked(),$(".query_curp").click(function(){window.open("https://www.gob.mx/curp/","_blank")}),$(".query_privacy").click(function(){window.open(" https://www.fundacionbbvabancomer.org/aviso-de-privacidad/","_blank")}),$("#fam_mig").onSelect(function(e){"0"==e.id?($("#y_fam_mig").slideDown("slow"),$("#n_fam_mig").addClass("required")):($("#y_fam_mig").slideUp("slow"),$("#n_fam_mig").removeClass("required"),$("#fam_mig_cards").empty())}),$("#change_h").onChecked(function(e){"SI"==e.id?($("#migrate_area").slideDown(),$("#migrate_area .form-group-select").addClass("required"),$("#migrate_area input#trans").attr("required",""),$("#rent").addClass("required")):($("#migrate_area").slideUp(),$("#migrate_area .form-group-select").removeClass("required").removeComboError(),$("#migrate_area input#trans").removeAttr("required"),$("#migrate_area input#trans").clearInput(),$("#rent").selectRadioId("NO").clearRadio().removeClass("required"))}),$("#rent").onChecked(function(e){"SI"==e.id?($("#pay_rent").slideDown("slow"),$("#payment_rent").attr("required","required")):($("#pay_rent").slideUp("slow"),$("#payment_rent").removeAttr("required"),$("#payment_rent").clearInput())}),$("#dbirthdate").onSelect(function(){l||(Ie($("#mbirthdate").getOptionSelected().id+"/"+$("#dbirthdate").getOptionSelected().description+"/"+$("#ybirthdate").val())?(l=!0,$("#mbirthdate").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#mbirthdate").onSelect(function(){l||(Ie($("#mbirthdate").getOptionSelected().id+"/"+$("#dbirthdate").getOptionSelected().description+"/"+$("#ybirthdate").val())?(l=!0,$("#dbirthdate").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#dsclass").onSelect(function(){e||(Ie($("#msclass").getOptionSelected().id+"/"+$("#dsclass").getOptionSelected().description+"/"+$("#ysclass").val())?(e=!0,$("#msclass").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#msclass").onSelect(function(){e||(Ie($("#msclass").getOptionSelected().id+"/"+$("#dsclass").getOptionSelected().description+"/"+$("#ysclass").val())?(e=!0,$("#dsclass").removeComboError()):$(this).showComboError("Fecha inválida"))}),$("#btn_save_all").click(function(){if(_StateId=u.schoolData.schooling.location.state.id,_StateDesc="",_MunicipalityDesc="",0!=_StateId){for(_i=0;_i<o.length;_i++)if(o[_i].id==_StateId){_StateDesc=o[_i].description;break}for(_i=0;_i<r[_StateId].length;_i++)if(r[_StateId][_i].id==u.schoolData.schooling.location.municipality.id){_MunicipalityDesc=r[_StateId][_i].description;break}}else _StateDesc="PENDIENTE",_MunicipalityDesc="PENDIENTE";var e="",t="No";switch(u.announcement.scholarshipProgram.id){case"1":e="primaria";break;case"2":e="secundaria";break;case"7":e="preparatoria";break;default:e="Desconocido"}0<Object.keys(c.bbva.member).length&&(t="Si"),ne($("#modal_generic .body"),se.confirmAllData,{tutorName:u.general.student[0].tutorData[0].tutorName,tutorLastName:u.general.student[0].tutorData[0].firstNameTutor,tutorSecondLastName:u.general.student[0].tutorData[0].lastaNameTutor,tutorRelationship:u.general.student[0].tutorData[0].kinship,name:u.general.student[0].name,lastName:u.general.student[0].firstName,secondLastName:u.general.student[0].lastName,birthdate:u.general.student[0].scholarBirthdate,gender:u.general.student[0].gender,curp:u.general.student[0].CURP,street:u.general.student[0].domicile[0].street,interiorNumber:u.general.student[0].domicile[0].numInterior,outdoorNumber:u.general.student[0].domicile[0].numExterior,zipcode:u.general.student[0].domicile[0].codePostal,colony:u.general.student[0].domicile[0].colony,municipality:u.general.student[0].domicile[0].municipality,state:u.general.student[0].domicile[0].state,references:u.general.student[0].domicile[0].particularReferences,homePhone:u.general.student[0].contactInf[0].homePhone,cellPhone:u.general.student[0].contactInf[0].cellPhone,errandsphone:u.general.student[0].contactInf[0].messagePhone,email:u.general.student[0].contactInf[0].email,email2:u.general.student[0].contactInf[0].email1,email3:u.general.student[0].contactInf[0].email2,levelDescription:e,average:u.schoolData.average,municipalitySchool:_MunicipalityDesc,stateSchool:_StateDesc,schoolName:u.schoolData.schooling.schoolName,turn:u.schoolData.schooling.profession.scholarShift.description,flagCareer:"Universidad"==e?"block":"none",area:u.schoolData.schooling.profession.area.description,subarea:u.schoolData.schooling.profession.subArea.description,career:u.schoolData.schooling.profession.careerName,modality:u.schoolData.schooling.profession.modality.description,careerType:u.schoolData.schooling.profession.type.description,duration:u.schoolData.schooling.profession.duration.description,spendingOnTransportation:N(u.schoolData.expenses.transportationAmount),startClassDate:u.schoolData.schooling.profession.classesStartDate,changeHome:1==u.schoolData.changeAddress?"Sí":"No",flagChangeHome:1==u.schoolData.changeAddress?"block":"none",municipalityChange:u.schoolData.schooling.newLocation.municipality.name,stateChange:u.schoolData.schooling.newLocation.state.name,rent:u.schoolData.expenses.isPayRent?"Sí":"No",flagIsRent:u.schoolData.expenses.isPayRent?"block":"none",paymentRent:N(u.schoolData.expenses.mounthlyRent),bbvaFamily:t,flagBbvaFam:"Si"==t?"block":"none",numRooms:"20"==u.home.homeInformation.roomsNumber?u.home.homeInformation.roomsNumber+" o más":u.home.homeInformation.roomsNumber,numRoomsSleep:"4"==u.home.homeInformation.bedroomsNumber?u.home.homeInformation.bedroomsNumber+" o más":u.home.homeInformation.bedroomsNumber,numBath:"2"==u.home.homeInformation.bathroomsNumber?u.home.homeInformation.bathroomsNumber+" o más":u.home.homeInformation.bathroomsNumber,water:u.home.homeInformation.homeService.waterServicesType.description,drain:u.home.homeInformation.drainageType.description,light:u.home.homeInformation.homeService.lightServicesType.description,fuel:u.home.homeInformation.cookingFuelType.description,wall:u.home.homeInformation.wallMaterialsType.description,roof:u.home.homeInformation.ceilingMaterialsType.description,floor:u.home.homeInformation.floorMaterialsType.description,cars:"2"==u.home.homeInformation.belongings.carsNumber?u.home.homeInformation.belongings.carsNumber+" o más":u.home.homeInformation.belongings.carsNumber,internet:1==u.home.homeInformation.belongings.hasInternet?"Sí":"No",laptop:1==u.home.homeInformation.belongings.hasComputer?"Sí":"No",washingMachine:1==u.home.homeInformation.belongings.hasWashingMachine?"Sí":"No",microwave:1==u.home.homeInformation.belongings.hasMicrowave?"Sí":"No",tvService:1==u.home.homeInformation.belongings.hasPayTV?"Sí":"No",motorcyle:1==u.home.homeInformation.belongings.hasMotorcycle?"Sí":"No",urlLegal:u.legalDisclaimer.legalDisclaimers[0].link,textLegal:u.legalDisclaimer.legalDisclaimers[0].description.split("|")[1],legal1:u.legalDisclaimer.legalDisclaimers[0].description.split("|")[0],urlLegal2:u.legalDisclaimer.legalDisclaimers[1].link,textLegal2:u.legalDisclaimer.legalDisclaimers[1].description.split("|")[1],legal2:u.legalDisclaimer.legalDisclaimers[1].description.split("|")[0],urlLegal3:u.legalDisclaimer.legalDisclaimers[2].link,textLegal3:u.legalDisclaimer.legalDisclaimers[2].description.split("|")[1],legal3:u.legalDisclaimer.legalDisclaimers[2].description.split("|")[0],onAccept:function(){ie(),L({service:"UPDATE_ANNOUNCEMENT",data:{scholarshipProgram:{id:u.announcement.scholarshipProgram.id},scholar:{Id:ivUser}},showWait:!0,success:j})},onDecline:function(){ie()}})});var De={getCatalog:function(t,e){null==h[t]||0==h[t].length?L({service:"LIST_CATALOGS",type:"GET",async:!0,showWait:!0,hasUrlParam:!0,urlParam:{catalog:t},data:{},finallyError:function(){e()},finallySuccess:[function(e){z(t,e)},e]}):e(h[t])},getJSONCatalog:function(t,e){return{service:"LIST_CATALOGS",type:"GET",async:!1,hasUrlParam:!0,urlParam:{catalog:t},data:{},finallySuccess:[function(e){z(t,e)},e||F]}},general:function(e){L({service:"SCHOLAR_DETAIL",type:"POST",data:{userScholar:ivUser,registerType:"2"},success:Z,finallySuccess:[De.ensureFun(e),De.checkStatus],error:function(e){"01229001"!=$e.get(e,"responseJSON.code","")?G(e):resetForm($("#formgendata"))}})},schoolData:function(e){L({service:"GET_SCHOLARINF",type:"GET",hasUrlParam:!0,async:!1,urlParam:{scholarId:ivUser,programScholarshipId:u.announcement.scholarshipProgram.id},data:{},success:q,finallySuccess:[De.ensureFun(e),De.checkStatus],error:function(e){"01229001"!=$e.get(e,"responseJSON.code","")?G(e):resetForm($("#formschdata"))}})},sociodemographic:function(e){L({service:"GET_SOCINF",type:"GET",hasUrlParam:!0,urlParam:{scholarId:ivUser,scholarshipProgramId:u.announcement.scholarshipProgram.id},data:{},success:V,finallySuccess:[De.ensureFun(e),De.checkStatus],error:function(e){"01229001"!=$e.get(e,"responseJSON.code","")?G(e):(resetForm($("#formsocdata")),c.fromhome.members=[],c.awayfromhome.members=[],c.bbva.member={},$("#nfamilylist").empty(),$("#nextrafamilylist").empty(),$("#fam_bbvacard").empty())}})},home:function(e){L({service:"GET_HOMEINF",type:"GET",hasUrlParam:!0,urlParam:{scholarId:ivUser,programScholarshipId:u.announcement.scholarshipProgram.id},data:{},success:H,finallySuccess:[De.ensureFun(e),De.checkStatus],error:function(e){"01229001"!=$e.get(e,"responseJSON.code","")&&"01229008"!=$e.get(e,"responseJSON.code","")?G(e):resetForm($("#formhdata"))}})},legalDisclaimer:function(e){L({service:"GET_LEGAL",type:"GET",hasUrlParam:!0,urlParam:{scholarId:ivUser,scholarshipProgramId:u.announcement.scholarshipProgram.id,moduleID:31},data:{},success:B,finallySuccess:[De.ensureFun(e),De.checkStatus]})},scholarshipAnnouncement:function(e){L({service:"GET_ANNOUNCEMENT",type:"GET",hasUrlParam:!0,showWait:!0,urlParam:{registerType:"CO",scholarId:ivUser},data:{},success:W,finallySuccess:[De.ensureFun(e),De.checkStatus],finallyError:function(){$(".content").hide()}})},moduleCatalog:{general:{list:function(){return["CAT_PARENTESCO-Tutor"]},callback:function(){Te("relationship",$e.get(h,"CAT_PARENTESCO-Tutor",[]),function(e){"25"==e.id?($("#o_relationship").clearInput(),$("#o_relationship").attr("required","required"),$("#other_relationship").slideDown()):($("#o_relationship").removeAttr("required"),$("#other_relationship").slideUp(),$("#o_relationship").clearInput())}),$('[data-target="general-data"]').attr("data-loaded","true"),void 0!==u.general&&Z(u.general),Ce($('[data-target="general-data"]'))}},schoolData:{list:function(){switch(_arrSc=["CAT_TURNO"],u.announcement.scholarshipProgram.id){case"2":_arrSc.push("CAT_MODALIDAD");break;case"7":_arrSc.push("CAT_MODALIDAD"),_arrSc.push("CAT_TIPO_CARRERA"),_arrSc.push("CAT_DURACION"),_arrSc.push("CAT_AREA"),void 0!==u.schoolData&&"X"!=$e.get(u.schoolData,"schooling.profession.area.id","X")&&_arrSc.push("CAT_SUBAREA-"+$e.get(u.schoolData,"schooling.profession.area.id",0))}return _arrSc},callback:function(){switch(Te("turn",$e.get(h,"CAT_TURNO",[])),u.announcement.scholarshipProgram.id){case"2":Te("modality",$e.get(h,"CAT_MODALIDAD",[]));break;case"7":Te("modality",$e.get(h,"CAT_MODALIDAD",[])),Te("career_area",$e.get(h,"CAT_AREA",[])),$("#career_area").onSelect(function(e){$("#career_subarea").reset(),$("#career_subarea").find(".option-select").addClass("disabled"),k(["CAT_SUBAREA-"+e.id],function(){Te("career_subarea",h["CAT_SUBAREA-"+e.id]),$("#career_subarea").find(".option-select").removeClass("disabled")})}),Te("type_s",$e.get(h,"CAT_TIPO_CARRERA",[])),Te("duration",$e.get(h,"CAT_DURACION",[])),void 0!==u.schoolData&&"X"!=$e.get(u.schoolData,"schooling.profession.area.id","X")&&(_arrSc.push("CAT_SUBAREA-"+$e.get(u.schoolData,"schooling.profession.area.id",0)),Te("career_subarea",$e.get(h,"CAT_SUBAREA-"+$e.get(u.schoolData,"schooling.profession.area.id",0),[])))}$('[data-target="schoolar-data"]').attr("data-loaded","true"),void 0!==u.schoolData&&q(u.schoolData),Ce($('[data-target="schoolar-data"]'))}},home:{list:function(){return["CAT_AGUA","CAT_DRENAJE","CAT_LUZ","CAT_COMBUSTIBLE","CAT_PAREDES","CAT_TECHO","CAT_PISO"]},callback:function(){Te("waterServicesType",$e.get(h,"CAT_AGUA",[])),Te("drainageType",$e.get(h,"CAT_DRENAJE",[])),Te("lightServicesType",$e.get(h,"CAT_LUZ",[])),Te("cookingFuelType",$e.get(h,"CAT_COMBUSTIBLE",[])),Te("wallMaterialsType",$e.get(h,"CAT_PAREDES",[])),Te("ceilingMaterialsType",$e.get(h,"CAT_TECHO",[])),Te("floorMaterialsType",$e.get(h,"CAT_PISO",[])),$('[data-target="home-data"]').attr("data-loaded","true"),void 0!==u.home&&H(u.home),Ce($('[data-target="home-data"]'))}}},checkStatus:function(){setTimeout(function(){0==$(".step-header .step-status.incomplete").length&&"0"==$e.get(u,"announcement.globalStatus","0")?$(".submtbtn.send").removeAttr("style"):$(".submtbtn.send").attr("style","display: none")},450)},ensureFun:function(e){return"function"==typeof e?e:F},getStates:function(e){null==o||0==o.length?L({showWait:!0,service:"GET_STATES",type:"POST",data:{},asyn:!1,finallySuccess:[function(e){Y(e)},e],finallyError:[function(e){Y(e)},e]}):e(o)},getMunicipalities:function(t,e){null==r[t]||0==r[t].length?L({showWait:!0,service:"GET_MUNICIPALITY",type:"POST",asyn:!1,data:{state:t},finallySuccess:[function(e){K(t,e)},e],finallyError:[function(e){K(t,e)},e]}):e(r[t])}},xe=function(){$("#n_family").comboSelect(function(){_arrFamily=[];for(var e="7"==u.announcement.scholarshipProgram.id?1:2;e<20;e++)_arrFamily.push({id:""+e,description:""+e});return _arrFamily.push({id:"20",description:"20 o más"}),_arrFamily}()),M.listRestExec({showWait:!0,service:"GET_STATES",type:"POST",data:{},asyn:!1,finallySuccess:[function(e){Y(e)},function(){$("#state").comboSelect(o,function(e){$("#municipalities").reset(),De.getMunicipalities(e.id,function(){$("#municipalities").comboSelect(r[e.id])})}),$("#state_s").comboSelect(o,function(e){$("#municipalities_s").reset(),$("#school_s").css("display","none"),$(".radio-section.search-by").clearRadio().removeClass("required"),0!=e.id&&"0"!=e.id||(_prId=u.announcement.scholarshipProgram.id,r[0]=[{id:0,description:s.getDommyDescription()}]),De.getMunicipalities(e.id,function(){$("#municipalities_s").comboSelect(r[e.id],function(){$("#search_by .radio-buttons").removeClass("disabled"),$("input#cct").prop("disabled",!1),$("#school_s").css("display","block"),$(".radio-section.search-by").clearRadio().addClass("required")})})}),$("#state_m").comboSelect(o,function(e){$("#municipalities_m").reset(),De.getMunicipalities(e.id,function(){$("#municipalities_m").comboSelect(r[e.id])})})}]}),M.listRestExec({service:"SCHOLAR_DETAIL",type:"POST",data:{userScholar:ivUser,registerType:"2"},success:Z,ignoreError:!0,error:function(e){"01229001"!=$e.get(e,"responseJSON.code","")&&M.errors.push(e)}})},Pe=function(e){"function"!=typeof e&&(e=De.checkStatus),M.listRestExec({service:"GET_SCHOLARINF",type:"GET",hasUrlParam:!0,urlParam:{scholarId:ivUser,programScholarshipId:u.announcement.scholarshipProgram.id},data:{},success:q,ignoreError:!0,error:function(e){"01229001"!=$e.get(e,"responseJSON.code","")&&M.errors.push(e)}}),M.listRestExec({service:"GET_SOCINF",type:"GET",hasUrlParam:!0,urlParam:{scholarId:ivUser,scholarshipProgramId:u.announcement.scholarshipProgram.id},data:{},success:V,ignoreError:!0,error:function(e){"01229001"!=$e.get(e,"responseJSON.code","")&&M.errors.push(e)}}),M.listRestExec({service:"GET_HOMEINF",type:"GET",hasUrlParam:!0,urlParam:{scholarId:ivUser,programScholarshipId:u.announcement.scholarshipProgram.id},data:{},success:H,ignoreError:!0,error:function(e){"01229001"!=$e.get(e,"responseJSON.code","")&&"01229008"!=$e.get(e,"responseJSON.code","")&&M.errors.push(e)}}),M.listRestExec({service:"GET_LEGAL",type:"GET",hasUrlParam:!0,urlParam:{scholarId:ivUser,scholarshipProgramId:u.announcement.scholarshipProgram.id,moduleID:31},data:{},success:B},e)};ge.FOL.regEx.test(ivUser)?De.scholarshipAnnouncement():ge.FUN.regEx.test(ivUser)&&L({service:"SCHOLAR_DETAIL",type:"POST",data:{userScholar:ivUser,registerType:"2"},showWait:!0,finallyError:function(){$(".content").hide()},success:function(e){n=e.student[0],"NUEVO"==e.moduleStatus?ne($("#modal_generic .body"),se.confirmemail,{c_email:n.contactInf[0].email}):"ERROR"==e.moduleStatus?ne($("#modal_generic .body"),me.error,{title:"Aún no puedes participar en la convocatoria",message:"Podrás participar en la convocatoria cuando estés por finalizar el último grado",redirectToLogin:!0}):De.scholarshipAnnouncement()}}),Object.keys(se).forEach(function(t){$.get(se[t].path,function(e){se[t].html=e})}),$("#currentYear").text((new Date).getFullYear())}();